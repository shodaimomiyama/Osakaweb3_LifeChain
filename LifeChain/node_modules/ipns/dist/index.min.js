(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Ipns = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Ipns=(()=>{var ph=Object.create;var fi=Object.defineProperty;var yh=Object.getOwnPropertyDescriptor;var gh=Object.getOwnPropertyNames;var xh=Object.getPrototypeOf,mh=Object.prototype.hasOwnProperty;var ft=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ut=(t,e)=>{for(var r in e)fi(t,r,{get:e[r],enumerable:!0})},r0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of gh(e))!mh.call(t,i)&&i!==r&&fi(t,i,{get:()=>e[i],enumerable:!(n=yh(e,i))||n.enumerable});return t};var Rt=(t,e,r)=>(r=t!=null?ph(xh(t)):{},r0(e||!t||!t.__esModule?fi(r,"default",{value:t,enumerable:!0}):r,t)),bh=t=>r0(fi({},"__esModule",{value:!0}),t);var dt=ft((n2,n0)=>{n0.exports={options:{usePureJavaScript:!1}}});var s0=ft((i2,o0)=>{var wo={};o0.exports=wo;var i0={};wo.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=vh(t,e);else{var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var c=0,f=t[i];c<a.length;++c)f+=a[c]<<8,a[c]=f%o,f=f/o|0;for(;f>0;)a.push(f%o),f=f/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join(`\r
`)}return n};wo.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=i0[e];if(!r){r=i0[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),s=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var c=0,f=a;c<s.length;++c)f+=s[c]*i,s[c]=f&255,f>>=8;for(;f>0;)s.push(f&255),f>>=8}for(var u=0;t[u]===o&&u<t.length-1;++u)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function vh(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=e[o[r]];return c}});var Tt=ft((o2,u0)=>{var a0=dt(),c0=s0(),m=u0.exports=a0.util=a0.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){m.nextTick=process.nextTick,typeof setImmediate=="function"?m.setImmediate=setImmediate:m.setImmediate=m.nextTick;return}if(typeof setImmediate=="function"){m.setImmediate=function(){return setImmediate.apply(void 0,arguments)},m.nextTick=function(a){return setImmediate(a)};return}if(m.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var f=e.slice();e.length=0,f.forEach(function(u){u()})}};var s=a,t="forge.setImmediate",e=[];m.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(f){f()})}).observe(i,{attributes:!0});var o=m.setImmediate;m.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}m.nextTick=m.setImmediate})();m.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;m.globalScope=function(){return m.isNodejs?globalThis:typeof self>"u"?window:self}();m.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};m.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};m.isArrayBufferView=function(t){return t&&m.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function Tn(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}m.ByteBuffer=Eo;function Eo(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(m.isArrayBuffer(t)||m.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Eo||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}m.ByteStringBuffer=Eo;var wh=4096;m.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>wh&&(this.data.substr(0,1),this._constructedStringLength=0)};m.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};m.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};m.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};m.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};m.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};m.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(m.encodeUtf8(t))};m.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};m.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};m.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};m.ByteStringBuffer.prototype.putInt=function(t,e){Tn(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};m.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};m.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};m.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};m.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};m.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};m.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};m.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};m.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};m.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};m.ByteStringBuffer.prototype.getInt=function(t){Tn(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};m.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};m.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};m.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};m.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};m.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};m.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};m.ByteStringBuffer.prototype.copy=function(){var t=m.createBuffer(this.data);return t.read=this.read,t};m.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};m.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};m.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};m.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};m.ByteStringBuffer.prototype.toString=function(){return m.decodeUtf8(this.bytes())};function Eh(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=m.isArrayBuffer(t),n=m.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}m.DataBuffer=Eh;m.DataBuffer.prototype.length=function(){return this.write-this.read};m.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};m.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};m.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};m.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};m.DataBuffer.prototype.putBytes=function(t,e){if(m.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(m.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof m.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&m.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof m.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=m.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=m.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};m.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};m.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};m.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};m.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};m.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};m.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};m.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};m.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};m.DataBuffer.prototype.putInt=function(t,e){Tn(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};m.DataBuffer.prototype.putSignedInt=function(t,e){return Tn(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};m.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};m.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};m.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};m.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};m.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};m.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};m.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};m.DataBuffer.prototype.getInt=function(t){Tn(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};m.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};m.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};m.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};m.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};m.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};m.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};m.DataBuffer.prototype.copy=function(){return new m.DataBuffer(this)};m.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};m.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};m.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};m.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};m.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return m.binary.raw.encode(e);if(t==="hex")return m.binary.hex.encode(e);if(t==="base64")return m.binary.base64.encode(e);if(t==="utf8")return m.text.utf8.decode(e);if(t==="utf16")return m.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};m.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=m.encodeUtf8(t)),new m.ByteBuffer(t)};m.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};m.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o,n};m.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};m.bytesToHex=function(t){return m.createBuffer(t).toHex()};m.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",tr=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";m.encode64=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.length;)i=t.charCodeAt(a++),o=t.charCodeAt(a++),s=t.charCodeAt(a++),r+=je.charAt(i>>2),r+=je.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=je.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":je.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};m.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,s=0;s<t.length;)r=tr[t.charCodeAt(s++)-43],n=tr[t.charCodeAt(s++)-43],i=tr[t.charCodeAt(s++)-43],o=tr[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};m.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};m.decodeUtf8=function(t){return decodeURIComponent(escape(t))};m.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:c0.encode,decode:c0.decode}};m.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};m.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};m.binary.hex.encode=m.bytesToHex;m.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};m.binary.base64.encode=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.byteLength;)i=t[a++],o=t[a++],s=t[a++],r+=je.charAt(i>>2),r+=je.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=je.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":je.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};m.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,s,a,c=0,f=r;c<t.length;)i=tr[t.charCodeAt(c++)-43],o=tr[t.charCodeAt(c++)-43],s=tr[t.charCodeAt(c++)-43],a=tr[t.charCodeAt(c++)-43],n[f++]=i<<2|o>>4,s!==64&&(n[f++]=(o&15)<<4|s>>2,a!==64&&(n[f++]=(s&3)<<6|a));return e?f-r:n.subarray(0,f)};m.binary.base58.encode=function(t,e){return m.binary.baseN.encode(t,f0,e)};m.binary.base58.decode=function(t,e){return m.binary.baseN.decode(t,f0,e)};m.text={utf8:{},utf16:{}};m.text.utf8.encode=function(t,e,r){t=m.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};m.text.utf8.decode=function(t){return m.decodeUtf8(String.fromCharCode.apply(null,t))};m.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n};m.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};m.deflate=function(t,e,r){if(e=m.decode64(t.deflate(m.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};m.inflate=function(t,e,r){var n=t.inflate(m.encode64(e)).rval;return n===null?null:m.decode64(n)};var So=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=m.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},Bo=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(m.decode64(r))),r},Sh=function(t,e,r,n){var i=Bo(t,e);i===null&&(i={}),i[r]=n,So(t,e,i)},Bh=function(t,e,r){var n=Bo(t,e);return n!==null&&(n=r in n?n[r]:null),n},Ch=function(t,e,r){var n=Bo(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),So(t,e,n)}},Ah=function(t,e){So(t,e,null)},ui=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,s=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(c){s=c}if(o)break}if(!o)throw s;return n};m.setItem=function(t,e,r,n,i){ui(Sh,arguments,i)};m.getItem=function(t,e,r,n){return ui(Bh,arguments,n)};m.removeItem=function(t,e,r,n){ui(Ch,arguments,n)};m.clearItems=function(t,e,r){ui(Ah,arguments,r)};m.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};m.format=function(t){for(var e=/%./g,r,n,i=0,o=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&o.push(n),s=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")};m.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,a=n===void 0?".":n,c=i<0?"-":"",f=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",u=f.length>3?f.length%3:0;return c+(u?f.substr(0,u)+a:"")+f.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-f).toFixed(o).slice(2):"")};m.formatSize=function(t){return t>=1073741824?t=m.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=m.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=m.formatNumber(t/1024,0)+" KiB":t=m.formatNumber(t,0)+" bytes",t};m.bytesFromIP=function(t){return t.indexOf(".")!==-1?m.bytesFromIPv4(t):t.indexOf(":")!==-1?m.bytesFromIPv6(t):null};m.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=m.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};m.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=m.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=m.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};m.bytesToIP=function(t){return t.length===4?m.bytesToIPv4(t):t.length===16?m.bytesToIPv6(t):null};m.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};m.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=m.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var s=r[r.length-1],a=e.length;!s||a!==s.end+1?r.push({start:a,end:a}):(s.end=a,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};m.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in m&&!t.update)return e(null,m.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return m.cores=navigator.hardwareConcurrency,e(null,m.cores);if(typeof Worker>"u")return m.cores=1,e(null,m.cores);if(typeof Blob>"u")return m.cores=2,e(null,m.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,a,c){if(a===0){var f=Math.floor(s.reduce(function(u,l){return u+l},0)/s.length);return m.cores=Math.max(1,f),URL.revokeObjectURL(r),e(null,m.cores)}i(c,function(u,l){s.push(o(c,l)),n(s,a-1,c)})}function i(s,a){for(var c=[],f=[],u=0;u<s;++u){var l=new Worker(r);l.addEventListener("message",function(d){if(f.push(d.data),f.length===s){for(var g=0;g<s;++g)c[g].terminate();a(null,f)}}),c.push(l)}for(var u=0;u<s;++u)c[u].postMessage(u)}function o(s,a){for(var c=[],f=0;f<s;++f)for(var u=a[f],l=c[f]=[],d=0;d<s;++d)if(f!==d){var g=a[d];(u.st>g.st&&u.st<g.et||g.st>u.st&&g.st<u.et)&&l.push(d)}return c.reduce(function(h,p){return Math.max(h,p.length)},0)}}});var li=ft((s2,l0)=>{var In=dt();In.pki=In.pki||{};var Co=l0.exports=In.pki.oids=In.oids=In.oids||{};function U(t,e){Co[t]=e,Co[e]=t}function lt(t,e){Co[t]=e}U("1.2.840.113549.1.1.1","rsaEncryption");U("1.2.840.113549.1.1.4","md5WithRSAEncryption");U("1.2.840.113549.1.1.5","sha1WithRSAEncryption");U("1.2.840.113549.1.1.7","RSAES-OAEP");U("1.2.840.113549.1.1.8","mgf1");U("1.2.840.113549.1.1.9","pSpecified");U("1.2.840.113549.1.1.10","RSASSA-PSS");U("1.2.840.113549.1.1.11","sha256WithRSAEncryption");U("1.2.840.113549.1.1.12","sha384WithRSAEncryption");U("1.2.840.113549.1.1.13","sha512WithRSAEncryption");U("1.3.101.112","EdDSA25519");U("1.2.840.10040.4.3","dsa-with-sha1");U("1.3.14.3.2.7","desCBC");U("1.3.14.3.2.26","sha1");U("1.3.14.3.2.29","sha1WithRSASignature");U("2.16.840.1.101.3.4.2.1","sha256");U("2.16.840.1.101.3.4.2.2","sha384");U("2.16.840.1.101.3.4.2.3","sha512");U("2.16.840.1.101.3.4.2.4","sha224");U("2.16.840.1.101.3.4.2.5","sha512-224");U("2.16.840.1.101.3.4.2.6","sha512-256");U("1.2.840.113549.2.2","md2");U("1.2.840.113549.2.5","md5");U("1.2.840.113549.1.7.1","data");U("1.2.840.113549.1.7.2","signedData");U("1.2.840.113549.1.7.3","envelopedData");U("1.2.840.113549.1.7.4","signedAndEnvelopedData");U("1.2.840.113549.1.7.5","digestedData");U("1.2.840.113549.1.7.6","encryptedData");U("1.2.840.113549.1.9.1","emailAddress");U("1.2.840.113549.1.9.2","unstructuredName");U("1.2.840.113549.1.9.3","contentType");U("1.2.840.113549.1.9.4","messageDigest");U("1.2.840.113549.1.9.5","signingTime");U("1.2.840.113549.1.9.6","counterSignature");U("1.2.840.113549.1.9.7","challengePassword");U("1.2.840.113549.1.9.8","unstructuredAddress");U("1.2.840.113549.1.9.14","extensionRequest");U("1.2.840.113549.1.9.20","friendlyName");U("1.2.840.113549.1.9.21","localKeyId");U("1.2.840.113549.1.9.22.1","x509Certificate");U("1.2.840.113549.1.12.10.1.1","keyBag");U("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");U("1.2.840.113549.1.12.10.1.3","certBag");U("1.2.840.113549.1.12.10.1.4","crlBag");U("1.2.840.113549.1.12.10.1.5","secretBag");U("1.2.840.113549.1.12.10.1.6","safeContentsBag");U("1.2.840.113549.1.5.13","pkcs5PBES2");U("1.2.840.113549.1.5.12","pkcs5PBKDF2");U("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");U("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");U("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");U("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");U("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");U("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");U("1.2.840.113549.2.7","hmacWithSHA1");U("1.2.840.113549.2.8","hmacWithSHA224");U("1.2.840.113549.2.9","hmacWithSHA256");U("1.2.840.113549.2.10","hmacWithSHA384");U("1.2.840.113549.2.11","hmacWithSHA512");U("1.2.840.113549.3.7","des-EDE3-CBC");U("2.16.840.1.101.3.4.1.2","aes128-CBC");U("2.16.840.1.101.3.4.1.22","aes192-CBC");U("2.16.840.1.101.3.4.1.42","aes256-CBC");U("2.5.4.3","commonName");U("2.5.4.4","surname");U("2.5.4.5","serialNumber");U("2.5.4.6","countryName");U("2.5.4.7","localityName");U("2.5.4.8","stateOrProvinceName");U("2.5.4.9","streetAddress");U("2.5.4.10","organizationName");U("2.5.4.11","organizationalUnitName");U("2.5.4.12","title");U("2.5.4.13","description");U("2.5.4.15","businessCategory");U("2.5.4.17","postalCode");U("2.5.4.42","givenName");U("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");U("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");U("2.16.840.1.113730.1.1","nsCertType");U("2.16.840.1.113730.1.13","nsComment");lt("2.5.29.1","authorityKeyIdentifier");lt("2.5.29.2","keyAttributes");lt("2.5.29.3","certificatePolicies");lt("2.5.29.4","keyUsageRestriction");lt("2.5.29.5","policyMapping");lt("2.5.29.6","subtreesConstraint");lt("2.5.29.7","subjectAltName");lt("2.5.29.8","issuerAltName");lt("2.5.29.9","subjectDirectoryAttributes");lt("2.5.29.10","basicConstraints");lt("2.5.29.11","nameConstraints");lt("2.5.29.12","policyConstraints");lt("2.5.29.13","basicConstraints");U("2.5.29.14","subjectKeyIdentifier");U("2.5.29.15","keyUsage");lt("2.5.29.16","privateKeyUsagePeriod");U("2.5.29.17","subjectAltName");U("2.5.29.18","issuerAltName");U("2.5.29.19","basicConstraints");lt("2.5.29.20","cRLNumber");lt("2.5.29.21","cRLReason");lt("2.5.29.22","expirationDate");lt("2.5.29.23","instructionCode");lt("2.5.29.24","invalidityDate");lt("2.5.29.25","cRLDistributionPoints");lt("2.5.29.26","issuingDistributionPoint");lt("2.5.29.27","deltaCRLIndicator");lt("2.5.29.28","issuingDistributionPoint");lt("2.5.29.29","certificateIssuer");lt("2.5.29.30","nameConstraints");U("2.5.29.31","cRLDistributionPoints");U("2.5.29.32","certificatePolicies");lt("2.5.29.33","policyMappings");lt("2.5.29.34","policyConstraints");U("2.5.29.35","authorityKeyIdentifier");lt("2.5.29.36","policyConstraints");U("2.5.29.37","extKeyUsage");lt("2.5.29.46","freshestCRL");lt("2.5.29.54","inhibitAnyPolicy");U("1.3.6.1.4.1.11129.2.4.2","timestampList");U("1.3.6.1.5.5.7.1.1","authorityInfoAccess");U("1.3.6.1.5.5.7.3.1","serverAuth");U("1.3.6.1.5.5.7.3.2","clientAuth");U("1.3.6.1.5.5.7.3.3","codeSigning");U("1.3.6.1.5.5.7.3.4","emailProtection");U("1.3.6.1.5.5.7.3.8","timeStamping")});var Rn=ft((a2,d0)=>{var gt=dt();Tt();li();var M=d0.exports=gt.asn1=gt.asn1||{};M.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};M.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};M.create=function(t,e,r,n,i){if(gt.util.isArray(n)){for(var o=[],s=0;s<n.length;++s)n[s]!==void 0&&o.push(n[s]);n=o}var a={tagClass:t,type:e,constructed:r,composed:r||gt.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=M.copy(a)),a};M.copy=function(t,e){var r;if(gt.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(M.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:M.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};M.equals=function(t,e,r){if(gt.util.isArray(t)){if(!gt.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!M.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&M.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};M.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function _n(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var Th=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;_n(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};M.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=gt.util.createBuffer(t));var r=t.length(),n=hi(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function hi(t,e,r,n){var i;_n(t,e,2);var o=t.getByte();e--;var s=o&192,a=o&31;i=t.length();var c=Th(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var f=new Error("Too few bytes to read ASN.1 value.");throw f.available=t.length(),f.remaining=e,f.requested=c,f}c=e}var u,l,d=(o&32)===32;if(d)if(u=[],c===void 0)for(;;){if(_n(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),u.push(hi(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),u.push(hi(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(u===void 0&&s===M.Class.UNIVERSAL&&a===M.Type.BITSTRING&&(l=t.bytes(c)),u===void 0&&n.decodeBitStrings&&s===M.Class.UNIVERSAL&&a===M.Type.BITSTRING&&c>1){var g=t.read,h=e,p=0;if(a===M.Type.BITSTRING&&(_n(t,e,1),p=t.getByte(),e--),p===0)try{i=t.length();var y={strict:!0,decodeBitStrings:!0},x=hi(t,e,r+1,y),w=i-t.length();e-=w,a==M.Type.BITSTRING&&w++;var b=x.tagClass;w===c&&(b===M.Class.UNIVERSAL||b===M.Class.CONTEXT_SPECIFIC)&&(u=[x])}catch{}u===void 0&&(t.read=g,e=h)}if(u===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===M.Type.BMPSTRING)for(u="";c>0;c-=2)_n(t,e,2),u+=String.fromCharCode(t.getInt16()),e-=2;else u=t.getBytes(c),e-=c}var _=l===void 0?null:{bitStringContents:l};return M.create(s,a,d,u,_)}M.toDer=function(t){var e=gt.util.createBuffer(),r=t.tagClass|t.type,n=gt.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=M.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(M.toDer(t.value[o]))}else if(t.type===M.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===M.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),a="";do a+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(a.length|128);for(var o=a.length-1;o>=0;--o)e.putByte(a.charCodeAt(o))}return e.putBuffer(n),e};M.oidToDer=function(t){var e=t.split("."),r=gt.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,s,a=2;a<e.length;++a){n=!0,i=[],o=parseInt(e[a],10);do s=o&127,o=o>>>7,n||(s|=128),i.push(s),n=!1;while(o>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};M.derToOid=function(t){var e;typeof t=="string"&&(t=gt.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};M.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),f=10;c!=="+"&&c!=="-"&&(a=parseInt(t.substr(10,2),10),f+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),f&&(c=t.charAt(f),c==="+"||c==="-")){var u=parseInt(t.substr(f+1,2),10),l=parseInt(t.substr(f+4,2),10),d=u*60+l;d*=6e4,c==="+"?e.setTime(+e-d):e.setTime(+e+d)}return e};M.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,f=0,u=!1;t.charAt(t.length-1)==="Z"&&(u=!0);var l=t.length-5,d=t.charAt(l);if(d==="+"||d==="-"){var g=parseInt(t.substr(l+1,2),10),h=parseInt(t.substr(l+4,2),10);f=g*60+h,f*=6e4,d==="+"&&(f*=-1),u=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),u?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,c),e.setTime(+e+f)):(e.setFullYear(r,n,i),e.setHours(o,s,a,c)),e};M.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};M.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};M.integerToDer=function(t){var e=gt.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};M.derToInteger=function(t){typeof t=="string"&&(t=gt.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};M.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&gt.util.isArray(e.value))for(var o=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[o]&&(i=M.validate(t.value[o],e.value[s],r,n),i?++o:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var h0=/[^\\u0000-\\u00ff]/;M.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case M.Class.UNIVERSAL:n+="Universal:";break;case M.Class.APPLICATION:n+="Application:";break;case M.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case M.Class.PRIVATE:n+="Private:";break}if(t.tagClass===M.Class.UNIVERSAL)switch(n+=t.type,t.type){case M.Type.NONE:n+=" (None)";break;case M.Type.BOOLEAN:n+=" (Boolean)";break;case M.Type.INTEGER:n+=" (Integer)";break;case M.Type.BITSTRING:n+=" (Bit string)";break;case M.Type.OCTETSTRING:n+=" (Octet string)";break;case M.Type.NULL:n+=" (Null)";break;case M.Type.OID:n+=" (Object Identifier)";break;case M.Type.ODESC:n+=" (Object Descriptor)";break;case M.Type.EXTERNAL:n+=" (External or Instance of)";break;case M.Type.REAL:n+=" (Real)";break;case M.Type.ENUMERATED:n+=" (Enumerated)";break;case M.Type.EMBEDDED:n+=" (Embedded PDV)";break;case M.Type.UTF8:n+=" (UTF8)";break;case M.Type.ROID:n+=" (Relative Object Identifier)";break;case M.Type.SEQUENCE:n+=" (Sequence)";break;case M.Type.SET:n+=" (Set)";break;case M.Type.PRINTABLESTRING:n+=" (Printable String)";break;case M.Type.IA5String:n+=" (IA5String (ASCII))";break;case M.Type.UTCTIME:n+=" (UTC time)";break;case M.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case M.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,a="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(s+=1,a+=M.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(a+=","));n+=i+"Sub values: "+s+a}else{if(n+=i+"Value: ",t.type===M.Type.OID){var c=M.derToOid(t.value);n+=c,gt.pki&&gt.pki.oids&&c in gt.pki.oids&&(n+=" ("+gt.pki.oids[c]+") ")}if(t.type===M.Type.INTEGER)try{n+=M.derToInteger(t.value)}catch{n+="0x"+gt.util.bytesToHex(t.value)}else if(t.type===M.Type.BITSTRING){if(t.value.length>1?n+="0x"+gt.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var f=t.value.charCodeAt(0);f==1?n+=" (1 unused bit shown)":f>1&&(n+=" ("+f+" unused bits shown)")}}else if(t.type===M.Type.OCTETSTRING)h0.test(t.value)||(n+="("+t.value+") "),n+="0x"+gt.util.bytesToHex(t.value);else if(t.type===M.Type.UTF8)try{n+=gt.util.decodeUtf8(t.value)}catch(u){if(u.message==="URI malformed")n+="0x"+gt.util.bytesToHex(t.value)+" (malformed UTF8)";else throw u}else t.type===M.Type.PRINTABLESTRING||t.type===M.Type.IA5String?n+=t.value:h0.test(t.value)?n+="0x"+gt.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var To=ft((c2,p0)=>{var Nt=dt();Tt();p0.exports=Nt.cipher=Nt.cipher||{};Nt.cipher.algorithms=Nt.cipher.algorithms||{};Nt.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Nt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Nt.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Nt.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Nt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Nt.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Nt.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Nt.cipher.algorithms[t]=e};Nt.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Nt.cipher.algorithms?Nt.cipher.algorithms[t]:null};var Ao=Nt.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};Ao.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Nt.util.createBuffer(),this.output=t.output||Nt.util.createBuffer(),this.mode.start(e)};Ao.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Ao.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var _o=ft((f2,y0)=>{var Dt=dt();Tt();Dt.cipher=Dt.cipher||{};var et=y0.exports=Dt.cipher.modes=Dt.cipher.modes||{};et.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};et.ecb.prototype.start=function(t){};et.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};et.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};et.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};et.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};et.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};et.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=di(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};et.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};et.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};et.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};et.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};et.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Dt.util.createBuffer(),this._partialBytes=0};et.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=di(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};et.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};et.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};et.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Dt.util.createBuffer(),this._partialBytes=0};et.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=di(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};et.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};et.ofb.prototype.decrypt=et.ofb.prototype.encrypt;et.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Dt.util.createBuffer(),this._partialBytes=0};et.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=di(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};et.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}pi(this._inBlock)};et.ctr.prototype.decrypt=et.ctr.prototype.encrypt;et.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Dt.util.createBuffer(),this._partialBytes=0,this._R=3774873600};et.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Dt.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Dt.util.createBuffer(t.additionalData):r=Dt.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Dt.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Io(n*8)))}this._inBlock=this._j0.slice(0),pi(this._inBlock),this._partialBytes=0,r=Dt.util.createBuffer(r),this._aDataLength=Io(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};et.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),pi(this._inBlock)};et.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),pi(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};et.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Dt.util.createBuffer();var n=this._aDataLength.concat(Io(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};et.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};et.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};et.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};et.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};et.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],c=s/n|0,f=(n-1-s%n)*e;a[c]=1<<e-1<<f,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o};et.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],c=i[s];i[o+s]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var f=i[o^n];i[o]=[t[0]^f[0],t[1]^f[1],t[2]^f[2],t[3]^f[3]]}return i};function di(t,e){if(typeof t=="string"&&(t=Dt.util.createBuffer(t)),Dt.util.isArray(t)&&t.length>4){var r=t;t=Dt.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Dt.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}function pi(t){t[t.length-1]=t[t.length-1]+1&4294967295}function Io(t){return[t/4294967296|0,t&4294967295]}});var Lo=ft((u2,b0)=>{var yt=dt();To();_o();Tt();b0.exports=yt.aes=yt.aes||{};yt.aes.startEncrypting=function(t,e,r,n){var i=yi({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};yt.aes.createEncryptionCipher=function(t,e){return yi({key:t,output:null,decrypt:!1,mode:e})};yt.aes.startDecrypting=function(t,e,r,n){var i=yi({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};yt.aes.createDecryptionCipher=function(t,e){return yi({key:t,output:null,decrypt:!0,mode:e})};yt.aes.Algorithm=function(t,e){Do||x0();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return No(r._w,n,i,!1)},decrypt:function(n,i){return No(r._w,n,i,!0)}}}),r._init=!1};yt.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=yt.util.createBuffer(e);else if(yt.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=yt.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!yt.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!yt.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=m0(e,t.decrypt&&!s),this._init=!0}};yt.aes._expandKey=function(t,e){return Do||x0(),m0(t,e)};yt.aes._updateBlock=No;Vr("AES-ECB",yt.cipher.modes.ecb);Vr("AES-CBC",yt.cipher.modes.cbc);Vr("AES-CFB",yt.cipher.modes.cfb);Vr("AES-OFB",yt.cipher.modes.ofb);Vr("AES-CTR",yt.cipher.modes.ctr);Vr("AES-GCM",yt.cipher.modes.gcm);function Vr(t,e){var r=function(){return new yt.aes.Algorithm(t,e)};yt.cipher.registerAlgorithm(t,r)}var Do=!1,Mr=4,qt,Ro,g0,gr,ue;function x0(){Do=!0,g0=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;qt=new Array(256),Ro=new Array(256),gr=new Array(4),ue=new Array(4);for(var e=0;e<4;++e)gr[e]=new Array(256),ue[e]=new Array(256);for(var r=0,n=0,i,o,s,a,c,f,u,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,qt[r]=a,Ro[a]=r,c=t[a],i=t[r],o=t[i],s=t[o],f=c<<24^a<<16^a<<8^(a^c),u=(i^o^s)<<24^(r^s)<<16^(r^o^s)<<8^(r^i^s);for(var l=0;l<4;++l)gr[l][r]=f,ue[l][a]=u,f=f<<24|f>>>8,u=u<<24|u>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function m0(t,e){for(var r=t.slice(0),n,i=1,o=r.length,s=o+6+1,a=Mr*s,c=o;c<a;++c)n=r[c-1],c%o===0?(n=qt[n>>>16&255]<<24^qt[n>>>8&255]<<16^qt[n&255]<<8^qt[n>>>24]^g0[i]<<24,i++):o>6&&c%o===4&&(n=qt[n>>>24]<<24^qt[n>>>16&255]<<16^qt[n>>>8&255]<<8^qt[n&255]),r[c]=r[c-o]^n;if(e){var f,u=ue[0],l=ue[1],d=ue[2],g=ue[3],h=r.slice(0);a=r.length;for(var c=0,p=a-Mr;c<a;c+=Mr,p-=Mr)if(c===0||c===a-Mr)h[c]=r[p],h[c+1]=r[p+3],h[c+2]=r[p+2],h[c+3]=r[p+1];else for(var y=0;y<Mr;++y)f=r[p+y],h[c+(3&-y)]=u[qt[f>>>24]]^l[qt[f>>>16&255]]^d[qt[f>>>8&255]]^g[qt[f&255]];r=h}return r}function No(t,e,r,n){var i=t.length/4-1,o,s,a,c,f;n?(o=ue[0],s=ue[1],a=ue[2],c=ue[3],f=Ro):(o=gr[0],s=gr[1],a=gr[2],c=gr[3],f=qt);var u,l,d,g,h,p,y;u=e[0]^t[0],l=e[n?3:1]^t[1],d=e[2]^t[2],g=e[n?1:3]^t[3];for(var x=3,w=1;w<i;++w)h=o[u>>>24]^s[l>>>16&255]^a[d>>>8&255]^c[g&255]^t[++x],p=o[l>>>24]^s[d>>>16&255]^a[g>>>8&255]^c[u&255]^t[++x],y=o[d>>>24]^s[g>>>16&255]^a[u>>>8&255]^c[l&255]^t[++x],g=o[g>>>24]^s[u>>>16&255]^a[l>>>8&255]^c[d&255]^t[++x],u=h,l=p,d=y;r[0]=f[u>>>24]<<24^f[l>>>16&255]<<16^f[d>>>8&255]<<8^f[g&255]^t[++x],r[n?3:1]=f[l>>>24]<<24^f[d>>>16&255]<<16^f[g>>>8&255]<<8^f[u&255]^t[++x],r[2]=f[d>>>24]<<24^f[g>>>16&255]<<16^f[u>>>8&255]<<8^f[l&255]^t[++x],r[n?1:3]=f[g>>>24]<<24^f[u>>>16&255]<<16^f[l>>>8&255]<<8^f[d&255]^t[++x]}function yi(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=yt.cipher.createDecipher(r,t.key):n=yt.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof yt.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var E0=ft((l2,w0)=>{var mt=dt();To();_o();Tt();w0.exports=mt.des=mt.des||{};mt.des.startEncrypting=function(t,e,r,n){var i=gi({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};mt.des.createEncryptionCipher=function(t,e){return gi({key:t,output:null,decrypt:!1,mode:e})};mt.des.startDecrypting=function(t,e,r,n){var i=gi({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};mt.des.createDecryptionCipher=function(t,e){return gi({key:t,output:null,decrypt:!0,mode:e})};mt.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return v0(r._keys,n,i,!1)},decrypt:function(n,i){return v0(r._keys,n,i,!0)}}}),r._init=!1};mt.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=mt.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=Ph(e),this._init=!0}};we("DES-ECB",mt.cipher.modes.ecb);we("DES-CBC",mt.cipher.modes.cbc);we("DES-CFB",mt.cipher.modes.cfb);we("DES-OFB",mt.cipher.modes.ofb);we("DES-CTR",mt.cipher.modes.ctr);we("3DES-ECB",mt.cipher.modes.ecb);we("3DES-CBC",mt.cipher.modes.cbc);we("3DES-CFB",mt.cipher.modes.cfb);we("3DES-OFB",mt.cipher.modes.ofb);we("3DES-CTR",mt.cipher.modes.ctr);function we(t,e){var r=function(){return new mt.des.Algorithm(t,e)};mt.cipher.registerAlgorithm(t,r)}var Ih=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],_h=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Rh=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Nh=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Dh=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Lh=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Uh=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],kh=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Ph(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],g=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],h=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],p=t.length()>8?3:1,y=[],x=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],w=0,b,_=0;_<p;_++){var E=t.getInt32(),S=t.getInt32();b=(E>>>4^S)&252645135,S^=b,E^=b<<4,b=(S>>>-16^E)&65535,E^=b,S^=b<<-16,b=(E>>>2^S)&858993459,S^=b,E^=b<<2,b=(S>>>-16^E)&65535,E^=b,S^=b<<-16,b=(E>>>1^S)&1431655765,S^=b,E^=b<<1,b=(S>>>8^E)&16711935,E^=b,S^=b<<8,b=(E>>>1^S)&1431655765,S^=b,E^=b<<1,b=E<<8|S>>>20&240,E=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=b;for(var N=0;N<x.length;++N){x[N]?(E=E<<2|E>>>26,S=S<<2|S>>>26):(E=E<<1|E>>>27,S=S<<1|S>>>27),E&=-15,S&=-15;var B=e[E>>>28]|r[E>>>24&15]|n[E>>>20&15]|i[E>>>16&15]|o[E>>>12&15]|s[E>>>8&15]|a[E>>>4&15],P=c[S>>>28]|f[S>>>24&15]|u[S>>>20&15]|l[S>>>16&15]|d[S>>>12&15]|g[S>>>8&15]|h[S>>>4&15];b=(P>>>16^B)&65535,y[w++]=B^b,y[w++]=P^b<<16}}return y}function v0(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,a=e[0],c=e[1];s=(a>>>4^c)&252645135,c^=s,a^=s<<4,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var f=0;f<i;f+=3){for(var u=o[f+1],l=o[f+2],d=o[f];d!=u;d+=l){var g=c^t[d],h=(c>>>4|c<<28)^t[d+1];s=a,a=c,c=s^(_h[g>>>24&63]|Nh[g>>>16&63]|Lh[g>>>8&63]|kh[g&63]|Ih[h>>>24&63]|Rh[h>>>16&63]|Dh[h>>>8&63]|Uh[h&63])}s=a,a=c,c=s}a=a>>>1|a<<31,c=c>>>1|c<<31,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(a>>>4^c)&252645135,c^=s,a^=s<<4,r[0]=a,r[1]=c}function gi(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=mt.cipher.createDecipher(r,t.key):n=mt.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof mt.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var xr=ft((h2,S0)=>{var xi=dt();S0.exports=xi.md=xi.md||{};xi.md.algorithms=xi.md.algorithms||{}});var C0=ft((d2,B0)=>{var Pe=dt();xr();Tt();var Oh=B0.exports=Pe.hmac=Pe.hmac||{};Oh.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,s){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in Pe.md.algorithms)e=Pe.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(s===null)s=t;else{if(typeof s=="string")s=Pe.util.createBuffer(s);else if(Pe.util.isArray(s)){var a=s;s=Pe.util.createBuffer();for(var c=0;c<a.length;++c)s.putByte(a[c])}var f=s.length();f>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=Pe.util.createBuffer(),n=Pe.util.createBuffer(),f=s.length();for(var c=0;c<f;++c){var a=s.at(c);r.putByte(54^a),n.putByte(92^a)}if(f<e.blockLength)for(var a=e.blockLength-f,c=0;c<a;++c)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var mi=ft(()=>{});var T0=ft((g2,A0)=>{var zt=dt();C0();xr();Tt();var Kh=zt.pkcs5=zt.pkcs5||{},Oe;zt.util.isNodejs&&!zt.options.usePureJavaScript&&(Oe=mi());A0.exports=zt.pbkdf2=Kh.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),zt.util.isNodejs&&!zt.options.usePureJavaScript&&Oe.pbkdf2&&(i===null||typeof i!="object")&&(Oe.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?Oe.pbkdf2Sync.length===4?Oe.pbkdf2(t,e,r,n,function(b,_){if(b)return o(b);o(null,_.toString("binary"))}):Oe.pbkdf2(t,e,r,n,i,function(b,_){if(b)return o(b);o(null,_.toString("binary"))}):Oe.pbkdf2Sync.length===4?Oe.pbkdf2Sync(t,e,r,n).toString("binary"):Oe.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in zt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=zt.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var a=new Error("Derived key is too long.");if(o)return o(a);throw a}var c=Math.ceil(n/s),f=n-(c-1)*s,u=zt.hmac.create();u.start(i,t);var l="",d,g,h;if(!o){for(var p=1;p<=c;++p){u.start(null,null),u.update(e),u.update(zt.util.int32ToBytes(p)),d=h=u.digest().getBytes();for(var y=2;y<=r;++y)u.start(null,null),u.update(h),g=u.digest().getBytes(),d=zt.util.xorBytes(d,g,s),h=g;l+=p<c?d:d.substr(0,f)}return l}var p=1,y;function x(){if(p>c)return o(null,l);u.start(null,null),u.update(e),u.update(zt.util.int32ToBytes(p)),d=h=u.digest().getBytes(),y=2,w()}function w(){if(y<=r)return u.start(null,null),u.update(h),g=u.digest().getBytes(),d=zt.util.xorBytes(d,g,s),h=g,++y,zt.util.setImmediate(w);l+=p<c?d:d.substr(0,f),++p,x()}x()}});var R0=ft((x2,_0)=>{var vi=dt();Tt();var I0=_0.exports=vi.pem=vi.pem||{};I0.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=bi(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=bi(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=bi(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=bi(t.headers[i]);return t.procType&&(r+=`\r
`),r+=vi.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};I0.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var s=o[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var a={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:vi.util.decode64(o[3])};if(e.push(a),!!o[2]){for(var c=o[2].split(i),f=0;o&&f<c.length;){for(var u=c[f].replace(/\s+$/,""),l=f+1;l<c.length;++l){var d=c[l];if(!/\s/.test(d[0]))break;u+=d,f=l}if(o=u.match(n),o){for(var g={name:o[1],values:[]},h=o[2].split(","),p=0;p<h.length;++p)g.values.push(Fh(h[p]));if(a.procType)if(!a.contentDomain&&g.name==="Content-Domain")a.contentDomain=h[0]||"";else if(!a.dekInfo&&g.name==="DEK-Info"){if(g.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:h[0],parameters:h[1]||null}}else a.headers.push(g);else{if(g.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(g.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:h[0],type:h[1]}}}++f}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function bi(t){for(var e=t.name+": ",r=[],n=function(c,f){return" "+f},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,s=-1,i=0;i<e.length;++i,++o)if(o>65&&s!==-1){var a=e[s];a===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+a+e.substr(s+1),o=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function Fh(t){return t.replace(/^\s+/,"")}});var P0=ft((m2,k0)=>{var Ee=dt();xr();Tt();var D0=k0.exports=Ee.sha256=Ee.sha256||{};Ee.md.sha256=Ee.md.algorithms.sha256=D0;D0.create=function(){L0||Mh();var t=null,e=Ee.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Ee.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Ee.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),N0(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Ee.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(Uo.substr(0,n.blockLength-s));for(var a,c,f=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,c=a/4294967296>>>0,f+=c,i.putInt32(f>>>0),f=a>>>0;i.putInt32(f);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};N0(l,r,i);var d=Ee.util.createBuffer();return d.putInt32(l.h0),d.putInt32(l.h1),d.putInt32(l.h2),d.putInt32(l.h3),d.putInt32(l.h4),d.putInt32(l.h5),d.putInt32(l.h6),d.putInt32(l.h7),d},n};var Uo=null,L0=!1,U0=null;function Mh(){Uo="\x80",Uo+=Ee.util.fillString("\0",64),U0=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],L0=!0}function N0(t,e,r){for(var n,i,o,s,a,c,f,u,l,d,g,h,p,y,x,w=r.length();w>=64;){for(f=0;f<16;++f)e[f]=r.getInt32();for(;f<64;++f)n=e[f-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[f-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[f]=n+e[f-7]+i+e[f-16]|0;for(u=t.h0,l=t.h1,d=t.h2,g=t.h3,h=t.h4,p=t.h5,y=t.h6,x=t.h7,f=0;f<64;++f)s=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7),a=y^h&(p^y),o=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),c=u&l|d&(u^l),n=x+s+a+U0[f]+e[f],i=o+c,x=y,y=p,p=h,h=g+n>>>0,g=d,d=l,l=u,u=n+i>>>0;t.h0=t.h0+u|0,t.h1=t.h1+l|0,t.h2=t.h2+d|0,t.h3=t.h3+g|0,t.h4=t.h4+h|0,t.h5=t.h5+p|0,t.h6=t.h6+y|0,t.h7=t.h7+x|0,w-=64}}});var K0=ft((b2,O0)=>{var Se=dt();Tt();var wi=null;Se.util.isNodejs&&!Se.options.usePureJavaScript&&!process.versions["node-webkit"]&&(wi=mi());var Vh=O0.exports=Se.prng=Se.prng||{};Vh.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(f,u){if(!u)return e.generateSync(f);var l=e.plugin.cipher,d=e.plugin.increment,g=e.plugin.formatKey,h=e.plugin.formatSeed,p=Se.util.createBuffer();e.key=null,y();function y(x){if(x)return u(x);if(p.length()>=f)return u(null,p.getBytes(f));if(e.generated>1048575&&(e.key=null),e.key===null)return Se.util.nextTick(function(){o(y)});var w=l(e.key,e.seed);e.generated+=w.length,p.putBytes(w),e.key=g(l(e.key,d(e.seed))),e.seed=h(l(e.key,e.seed)),Se.util.setImmediate(y)}},e.generateSync=function(f){var u=e.plugin.cipher,l=e.plugin.increment,d=e.plugin.formatKey,g=e.plugin.formatSeed;e.key=null;for(var h=Se.util.createBuffer();h.length()<f;){e.generated>1048575&&(e.key=null),e.key===null&&s();var p=u(e.key,e.seed);e.generated+=p.length,h.putBytes(p),e.key=d(u(e.key,l(e.seed))),e.seed=g(u(e.key,e.seed))}return h.getBytes(f)};function o(f){if(e.pools[0].messageLength>=32)return a(),f();var u=32-e.pools[0].messageLength<<5;e.seedFile(u,function(l,d){if(l)return f(l);e.collect(d),a(),f()})}function s(){if(e.pools[0].messageLength>=32)return a();var f=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(f)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var f=e.plugin.md.create();f.update(e.keyBytes);for(var u=1,l=0;l<32;++l)e.reseeds%u===0&&(f.update(e.pools[l].digest().getBytes()),e.pools[l].start()),u=u<<1;e.keyBytes=f.digest().getBytes(),f.start(),f.update(e.keyBytes);var d=f.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(d),e.generated=0}function c(f){var u=null,l=Se.util.globalScope,d=l.crypto||l.msCrypto;d&&d.getRandomValues&&(u=function(E){return d.getRandomValues(E)});var g=Se.util.createBuffer();if(u)for(;g.length()<f;){var h=Math.max(1,Math.min(f-g.length(),65536)/4),p=new Uint32Array(Math.floor(h));try{u(p);for(var y=0;y<p.length;++y)g.putInt32(p[y])}catch(E){if(!(typeof QuotaExceededError<"u"&&E instanceof QuotaExceededError))throw E}}if(g.length()<f)for(var x,w,b,_=Math.floor(Math.random()*65536);g.length()<f;){w=16807*(_&65535),x=16807*(_>>16),w+=(x&32767)<<16,w+=x>>15,w=(w&2147483647)+(w>>31),_=w&4294967295;for(var y=0;y<3;++y)b=_>>>(y<<3),b^=Math.floor(Math.random()*256),g.putByte(b&255)}return g.getBytes(f)}return wi?(e.seedFile=function(f,u){wi.randomBytes(f,function(l,d){if(l)return u(l);u(null,d.toString())})},e.seedFileSync=function(f){return wi.randomBytes(f).toString()}):(e.seedFile=function(f,u){try{u(null,c(f))}catch(l){u(l)}},e.seedFileSync=c),e.collect=function(f){for(var u=f.length,l=0;l<u;++l)e.pools[e.pool].update(f.substr(l,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(f,u){for(var l="",d=0;d<u;d+=8)l+=String.fromCharCode(f>>d&255);e.collect(l)},e.registerWorker=function(f){if(f===self)e.seedFile=function(l,d){function g(h){var p=h.data;p.forge&&p.forge.prng&&(self.removeEventListener("message",g),d(p.forge.prng.err,p.forge.prng.bytes))}self.addEventListener("message",g),self.postMessage({forge:{prng:{needed:l}}})};else{var u=function(l){var d=l.data;d.forge&&d.forge.prng&&e.seedFile(d.forge.prng.needed,function(g,h){f.postMessage({forge:{prng:{err:g,bytes:h}}})})};f.addEventListener("message",u)}},e}});var Nn=ft((v2,ko)=>{var Lt=dt();Lo();P0();K0();Tt();(function(){if(Lt.random&&Lt.random.getBytes){ko.exports=Lt.random;return}(function(t){var e={},r=new Array(4),n=Lt.util.createBuffer();e.formatKey=function(l){var d=Lt.util.createBuffer(l);return l=new Array(4),l[0]=d.getInt32(),l[1]=d.getInt32(),l[2]=d.getInt32(),l[3]=d.getInt32(),Lt.aes._expandKey(l,!1)},e.formatSeed=function(l){var d=Lt.util.createBuffer(l);return l=new Array(4),l[0]=d.getInt32(),l[1]=d.getInt32(),l[2]=d.getInt32(),l[3]=d.getInt32(),l},e.cipher=function(l,d){return Lt.aes._updateBlock(l,d,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(l){return++l[3],l},e.md=Lt.md.sha256;function i(){var l=Lt.prng.create(e);return l.getBytes=function(d,g){return l.generate(d,g)},l.getBytesSync=function(d){return l.generate(d)},l}var o=i(),s=null,a=Lt.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(s=function(l){return c.getRandomValues(l)}),Lt.options.usePureJavaScript||!Lt.util.isNodejs&&!s){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var f="";for(var u in navigator)try{typeof navigator[u]=="string"&&(f+=navigator[u])}catch{}o.collect(f),f=null}t&&(t().mousemove(function(l){o.collectInt(l.clientX,16),o.collectInt(l.clientY,16)}),t().keypress(function(l){o.collectInt(l.charCode,8)}))}if(!Lt.random)Lt.random=o;else for(var u in o)Lt.random[u]=o[u];Lt.random.createInstance=i,ko.exports=Lt.random})(typeof jQuery<"u"?jQuery:null)})()});var q0=ft((w2,V0)=>{var Gt=dt();Tt();var Po=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],F0=[1,2,3,5],qh=function(t,e){return t<<e&65535|(t&65535)>>16-e},zh=function(t,e){return(t&65535)>>e|t<<16-e&65535};V0.exports=Gt.rc2=Gt.rc2||{};Gt.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Gt.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),s=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(Po[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-o,Po[r.at(128-o)&s]),a=127-o;a>=0;a--)r.setAt(a,Po[r.at(a+1)^r.at(a+o)]);return r};var M0=function(t,e,r){var n=!1,i=null,o=null,s=null,a,c,f,u,l=[];for(t=Gt.rc2.expandKey(t,e),f=0;f<64;f++)l.push(t.getInt16Le());r?(a=function(h){for(f=0;f<4;f++)h[f]+=l[u]+(h[(f+3)%4]&h[(f+2)%4])+(~h[(f+3)%4]&h[(f+1)%4]),h[f]=qh(h[f],F0[f]),u++},c=function(h){for(f=0;f<4;f++)h[f]+=l[h[(f+3)%4]&63]}):(a=function(h){for(f=3;f>=0;f--)h[f]=zh(h[f],F0[f]),h[f]-=l[u]+(h[(f+3)%4]&h[(f+2)%4])+(~h[(f+3)%4]&h[(f+1)%4]),u--},c=function(h){for(f=3;f>=0;f--)h[f]-=l[h[(f+3)%4]&63]});var d=function(h){var p=[];for(f=0;f<4;f++){var y=i.getInt16Le();s!==null&&(r?y^=s.getInt16Le():s.putInt16Le(y)),p.push(y&65535)}u=r?0:63;for(var x=0;x<h.length;x++)for(var w=0;w<h[x][0];w++)h[x][1](p);for(f=0;f<4;f++)s!==null&&(r?s.putInt16Le(p[f]):p[f]^=s.getInt16Le()),o.putInt16Le(p[f])},g=null;return g={start:function(h,p){h&&typeof h=="string"&&(h=Gt.util.createBuffer(h)),n=!1,i=Gt.util.createBuffer(),o=p||new Gt.util.createBuffer,s=h,g.output=o},update:function(h){for(n||i.putBuffer(h);i.length()>=8;)d([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(h){var p=!0;if(r)if(h)p=h(8,i,!r);else{var y=i.length()===8?8:8-i.length();i.fillWithByte(y,y)}if(p&&(n=!0,g.update()),!r&&(p=i.length()===0,p))if(h)p=h(8,o,!r);else{var x=o.length(),w=o.at(x-1);w>x?p=!1:o.truncate(w)}return p}},g};Gt.rc2.startEncrypting=function(t,e,r){var n=Gt.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Gt.rc2.createEncryptionCipher=function(t,e){return M0(t,e,!0)};Gt.rc2.startDecrypting=function(t,e,r){var n=Gt.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Gt.rc2.createDecryptionCipher=function(t,e){return M0(t,e,!1)}});var Bi=ft((E2,Q0)=>{var Oo=dt();Q0.exports=Oo.jsbn=Oo.jsbn||{};var Ke,Hh=0xdeadbeefcafe,z0=(Hh&16777215)==15715070;function R(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}Oo.jsbn.BigInteger=R;function st(){return new R(null)}function Gh(t,e,r,n,i,o){for(;--o>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function $h(t,e,r,n,i,o){for(var s=e&32767,a=e>>15;--o>=0;){var c=this.data[t]&32767,f=this.data[t++]>>15,u=a*c+f*s;c=s*c+((u&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(u>>>15)+a*f+(i>>>30),r.data[n++]=c&1073741823}return i}function H0(t,e,r,n,i,o){for(var s=e&16383,a=e>>14;--o>=0;){var c=this.data[t]&16383,f=this.data[t++]>>14,u=a*c+f*s;c=s*c+((u&16383)<<14)+r.data[n]+i,i=(c>>28)+(u>>14)+a*f,r.data[n++]=c&268435455}return i}typeof navigator>"u"?(R.prototype.am=H0,Ke=28):z0&&navigator.appName=="Microsoft Internet Explorer"?(R.prototype.am=$h,Ke=30):z0&&navigator.appName!="Netscape"?(R.prototype.am=Gh,Ke=26):(R.prototype.am=H0,Ke=28);R.prototype.DB=Ke;R.prototype.DM=(1<<Ke)-1;R.prototype.DV=1<<Ke;var Ko=52;R.prototype.FV=Math.pow(2,Ko);R.prototype.F1=Ko-Ke;R.prototype.F2=2*Ke-Ko;var Yh="0123456789abcdefghijklmnopqrstuvwxyz",Ei=new Array,qr,oe;qr=48;for(oe=0;oe<=9;++oe)Ei[qr++]=oe;qr=97;for(oe=10;oe<36;++oe)Ei[qr++]=oe;qr=65;for(oe=10;oe<36;++oe)Ei[qr++]=oe;function G0(t){return Yh.charAt(t)}function $0(t,e){var r=Ei[t.charCodeAt(e)];return r??-1}function Wh(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function Zh(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function er(t){var e=st();return e.fromInt(t),e}function Qh(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var s=r==8?t[n]&255:$0(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&t[0]&128&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&R.ZERO.subTo(this,this)}function Xh(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function Jh(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this.data[s]>>a)>0&&(i=!0,o=G0(n));s>=0;)a<e?(n=(this.data[s]&(1<<a)-1)<<e-a,n|=this.data[--s]>>(a+=this.DB-e)):(n=this.data[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=G0(n));return i?o:"0"}function jh(){var t=st();return R.ZERO.subTo(this,t),t}function td(){return this.s<0?this.negate():this}function ed(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Si(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function rd(){return this.t<=0?0:this.DB*(this.t-1)+Si(this.data[this.t-1]^this.s&this.DM)}function nd(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function id(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function od(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+o+1]=this.data[a]>>n|s,s=(this.data[a]&i)<<r;for(a=o-1;a>=0;--a)e.data[a]=0;e.data[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()}function sd(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}function ad(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function cd(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&R.ZERO.subTo(e,e)}function fd(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function ud(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=st());var o=st(),s=this.s,a=t.s,c=this.DB-Si(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var f=o.t,u=o.data[f-1];if(u!=0){var l=u*(1<<this.F1)+(f>1?o.data[f-2]>>this.F2:0),d=this.FV/l,g=(1<<this.F1)/l,h=1<<this.F2,p=r.t,y=p-f,x=e??st();for(o.dlShiftTo(y,x),r.compareTo(x)>=0&&(r.data[r.t++]=1,r.subTo(x,r)),R.ONE.dlShiftTo(f,x),x.subTo(o,o);o.t<f;)o.data[o.t++]=0;for(;--y>=0;){var w=r.data[--p]==u?this.DM:Math.floor(r.data[p]*d+(r.data[p-1]+h)*g);if((r.data[p]+=o.am(0,w,r,y,0,f))<w)for(o.dlShiftTo(y,x),r.subTo(x,r);r.data[p]<--w;)r.subTo(x,r)}e!=null&&(r.drShiftTo(f,e),s!=a&&R.ZERO.subTo(e,e)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&R.ZERO.subTo(r,r)}}}function ld(t){var e=st();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(R.ZERO)>0&&t.subTo(e,e),e}function mr(t){this.m=t}function hd(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function dd(t){return t}function pd(t){t.divRemTo(this.m,null,t)}function yd(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function gd(t,e){t.squareTo(e),this.reduce(e)}mr.prototype.convert=hd;mr.prototype.revert=dd;mr.prototype.reduce=pd;mr.prototype.mulTo=yd;mr.prototype.sqrTo=gd;function xd(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function br(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function md(t){var e=st();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(R.ZERO)>0&&this.m.subTo(e,e),e}function bd(t){var e=st();return t.copyTo(e),this.reduce(e),e}function vd(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function wd(t,e){t.squareTo(e),this.reduce(e)}function Ed(t,e,r){t.multiplyTo(e,r),this.reduce(r)}br.prototype.convert=md;br.prototype.revert=bd;br.prototype.reduce=vd;br.prototype.mulTo=Ed;br.prototype.sqrTo=wd;function Sd(){return(this.t>0?this.data[0]&1:this.s)==0}function Bd(t,e){if(t>4294967295||t<1)return R.ONE;var r=st(),n=st(),i=e.convert(this),o=Si(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function Cd(t,e){var r;return t<256||e.isEven()?r=new mr(e):r=new br(e),this.exp(t,r)}R.prototype.copyTo=Wh;R.prototype.fromInt=Zh;R.prototype.fromString=Qh;R.prototype.clamp=Xh;R.prototype.dlShiftTo=nd;R.prototype.drShiftTo=id;R.prototype.lShiftTo=od;R.prototype.rShiftTo=sd;R.prototype.subTo=ad;R.prototype.multiplyTo=cd;R.prototype.squareTo=fd;R.prototype.divRemTo=ud;R.prototype.invDigit=xd;R.prototype.isEven=Sd;R.prototype.exp=Bd;R.prototype.toString=Jh;R.prototype.negate=jh;R.prototype.abs=td;R.prototype.compareTo=ed;R.prototype.bitLength=rd;R.prototype.mod=ld;R.prototype.modPowInt=Cd;R.ZERO=er(0);R.ONE=er(1);function Ad(){var t=st();return this.copyTo(t),t}function Td(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Id(){return this.t==0?this.s:this.data[0]<<24>>24}function _d(){return this.t==0?this.s:this.data[0]<<16>>16}function Rd(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Nd(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Dd(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=er(r),i=st(),o=st(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(t)+s}function Ld(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,s=0,a=0;a<t.length;++a){var c=$0(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&R.ZERO.subTo(this,this)}function Ud(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(R.ONE.shiftLeft(t-1),Fo,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(R.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function kd(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function Pd(t){return this.compareTo(t)==0}function Od(t){return this.compareTo(t)<0?this:t}function Kd(t){return this.compareTo(t)>0?this:t}function Fd(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function Md(t,e){return t&e}function Vd(t){var e=st();return this.bitwiseTo(t,Md,e),e}function Fo(t,e){return t|e}function qd(t){var e=st();return this.bitwiseTo(t,Fo,e),e}function Y0(t,e){return t^e}function zd(t){var e=st();return this.bitwiseTo(t,Y0,e),e}function W0(t,e){return t&~e}function Hd(t){var e=st();return this.bitwiseTo(t,W0,e),e}function Gd(){for(var t=st(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function $d(t){var e=st();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Yd(t){var e=st();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Wd(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function Zd(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Wd(this.data[t]);return this.s<0?this.t*this.DB:-1}function Qd(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function Xd(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Qd(this.data[r]^e);return t}function Jd(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function jd(t,e){var r=R.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function tp(t){return this.changeBit(t,Fo)}function ep(t){return this.changeBit(t,W0)}function rp(t){return this.changeBit(t,Y0)}function np(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function ip(t){var e=st();return this.addTo(t,e),e}function op(t){var e=st();return this.subTo(t,e),e}function sp(t){var e=st();return this.multiplyTo(t,e),e}function ap(t){var e=st();return this.divRemTo(t,e,null),e}function cp(t){var e=st();return this.divRemTo(t,null,e),e}function fp(t){var e=st(),r=st();return this.divRemTo(t,e,r),new Array(e,r)}function up(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function lp(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Dn(){}function Z0(t){return t}function hp(t,e,r){t.multiplyTo(e,r)}function dp(t,e){t.squareTo(e)}Dn.prototype.convert=Z0;Dn.prototype.revert=Z0;Dn.prototype.mulTo=hp;Dn.prototype.sqrTo=dp;function pp(t){return this.exp(t,new Dn)}function yp(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function gp(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function zr(t){this.r2=st(),this.q3=st(),R.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function xp(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=st();return t.copyTo(e),this.reduce(e),e}function mp(t){return t}function bp(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function vp(t,e){t.squareTo(e),this.reduce(e)}function wp(t,e,r){t.multiplyTo(e,r),this.reduce(r)}zr.prototype.convert=xp;zr.prototype.revert=mp;zr.prototype.reduce=bp;zr.prototype.mulTo=wp;zr.prototype.sqrTo=vp;function Ep(t,e){var r=t.bitLength(),n,i=er(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new mr(e):e.isEven()?o=new zr(e):o=new br(e);var s=new Array,a=3,c=n-1,f=(1<<n)-1;if(s[1]=o.convert(this),n>1){var u=st();for(o.sqrTo(s[1],u);a<=f;)s[a]=st(),o.mulTo(u,s[a-2],s[a]),a+=2}var l=t.t-1,d,g=!0,h=st(),p;for(r=Si(t.data[l])-1;l>=0;){for(r>=c?d=t.data[l]>>r-c&f:(d=(t.data[l]&(1<<r+1)-1)<<c-r,l>0&&(d|=t.data[l-1]>>this.DB+r-c)),a=n;!(d&1);)d>>=1,--a;if((r-=a)<0&&(r+=this.DB,--l),g)s[d].copyTo(i),g=!1;else{for(;a>1;)o.sqrTo(i,h),o.sqrTo(h,i),a-=2;a>0?o.sqrTo(i,h):(p=i,i=h,h=p),o.mulTo(h,s[d],i)}for(;l>=0&&!(t.data[l]&1<<r);)o.sqrTo(i,h),p=i,i=h,h=p,--r<0&&(r=this.DB-1,--l)}return o.revert(i)}function Sp(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function Bp(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function Cp(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return R.ZERO;for(var r=t.clone(),n=this.clone(),i=er(1),o=er(0),s=er(0),a=er(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),e&&s.subTo(i,s),a.subTo(o,a))}if(n.compareTo(R.ONE)!=0)return R.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var le=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Ap=(1<<26)/le[le.length-1];function Tp(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=le[le.length-1]){for(e=0;e<le.length;++e)if(r.data[0]==le[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<le.length;){for(var n=le[e],i=e+1;i<le.length&&n<Ap;)n*=le[i++];for(n=r.modInt(n);e<i;)if(n%le[e++]==0)return!1}return r.millerRabin(t)}function Ip(t){var e=this.subtract(R.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=_p(),o,s=0;s<t;++s){do o=new R(this.bitLength(),i);while(o.compareTo(R.ONE)<=0||o.compareTo(e)>=0);var a=o.modPow(n,this);if(a.compareTo(R.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(R.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function _p(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}R.prototype.chunkSize=Rd;R.prototype.toRadix=Dd;R.prototype.fromRadix=Ld;R.prototype.fromNumber=Ud;R.prototype.bitwiseTo=Fd;R.prototype.changeBit=jd;R.prototype.addTo=np;R.prototype.dMultiply=up;R.prototype.dAddOffset=lp;R.prototype.multiplyLowerTo=yp;R.prototype.multiplyUpperTo=gp;R.prototype.modInt=Bp;R.prototype.millerRabin=Ip;R.prototype.clone=Ad;R.prototype.intValue=Td;R.prototype.byteValue=Id;R.prototype.shortValue=_d;R.prototype.signum=Nd;R.prototype.toByteArray=kd;R.prototype.equals=Pd;R.prototype.min=Od;R.prototype.max=Kd;R.prototype.and=Vd;R.prototype.or=qd;R.prototype.xor=zd;R.prototype.andNot=Hd;R.prototype.not=Gd;R.prototype.shiftLeft=$d;R.prototype.shiftRight=Yd;R.prototype.getLowestSetBit=Zd;R.prototype.bitCount=Xd;R.prototype.testBit=Jd;R.prototype.setBit=tp;R.prototype.clearBit=ep;R.prototype.flipBit=rp;R.prototype.add=ip;R.prototype.subtract=op;R.prototype.multiply=sp;R.prototype.divide=ap;R.prototype.remainder=cp;R.prototype.divideAndRemainder=fp;R.prototype.modPow=Ep;R.prototype.modInverse=Cp;R.prototype.pow=pp;R.prototype.gcd=Sp;R.prototype.isProbablePrime=Tp});var ec=ft((S2,tc)=>{var Be=dt();xr();Tt();var J0=tc.exports=Be.sha1=Be.sha1||{};Be.md.sha1=Be.md.algorithms.sha1=J0;J0.create=function(){j0||Rp();var t=null,e=Be.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Be.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Be.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),X0(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Be.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(Mo.substr(0,n.blockLength-s));for(var a,c,f=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,c=a/4294967296>>>0,f+=c,i.putInt32(f>>>0),f=a>>>0;i.putInt32(f);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};X0(l,r,i);var d=Be.util.createBuffer();return d.putInt32(l.h0),d.putInt32(l.h1),d.putInt32(l.h2),d.putInt32(l.h3),d.putInt32(l.h4),d},n};var Mo=null,j0=!1;function Rp(){Mo="\x80",Mo+=Be.util.fillString("\0",64),j0=!0}function X0(t,e,r){for(var n,i,o,s,a,c,f,u,l=r.length();l>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,c=t.h4,u=0;u<16;++u)n=r.getInt32(),e[u]=n,f=a^o&(s^a),n=(i<<5|i>>>27)+f+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<20;++u)n=e[u-3]^e[u-8]^e[u-14]^e[u-16],n=n<<1|n>>>31,e[u]=n,f=a^o&(s^a),n=(i<<5|i>>>27)+f+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<32;++u)n=e[u-3]^e[u-8]^e[u-14]^e[u-16],n=n<<1|n>>>31,e[u]=n,f=o^s^a,n=(i<<5|i>>>27)+f+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<40;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,f=o^s^a,n=(i<<5|i>>>27)+f+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<60;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,f=o&s|a&(o^s),n=(i<<5|i>>>27)+f+c+2400959708+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<80;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,f=o^s^a,n=(i<<5|i>>>27)+f+c+3395469782+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,l-=64}}});var ic=ft((B2,nc)=>{var Ce=dt();Tt();Nn();ec();var rc=nc.exports=Ce.pkcs1=Ce.pkcs1||{};rc.encode_rsa_oaep=function(t,e,r){var n,i,o,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),o?o.start():o=Ce.md.sha1.create(),s||(s=o);var a=Math.ceil(t.n.bitLength()/8),c=a-2*o.digestLength-2;if(e.length>c){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=e.length,f.maxLength=c,f}n||(n=""),o.update(n,"raw");for(var u=o.digest(),l="",d=c-e.length,g=0;g<d;g++)l+="\0";var h=u.getBytes()+l+""+e;if(!i)i=Ce.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=i.length,f.digestLength=o.digestLength,f}var p=Ci(i,a-o.digestLength-1,s),y=Ce.util.xorBytes(h,p,h.length),x=Ci(y,o.digestLength,s),w=Ce.util.xorBytes(i,x,i.length);return"\0"+w+y};rc.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var y=new Error("RSAES-OAEP encoded message length is invalid.");throw y.length=e.length,y.expectedLength=s,y}if(i===void 0?i=Ce.md.sha1.create():i.start(),o||(o=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),c=e.charAt(0),f=e.substring(1,i.digestLength+1),u=e.substring(1+i.digestLength),l=Ci(u,i.digestLength,o),d=Ce.util.xorBytes(f,l,f.length),g=Ci(d,s-i.digestLength-1,o),h=Ce.util.xorBytes(u,g,u.length),p=h.substring(0,i.digestLength),y=c!=="\0",x=0;x<i.digestLength;++x)y|=a.charAt(x)!==p.charAt(x);for(var w=1,b=i.digestLength,_=i.digestLength;_<h.length;_++){var E=h.charCodeAt(_),S=E&1^1,N=w?65534:0;y|=E&N,w=w&S,b+=w}if(y||h.charCodeAt(b)!==1)throw new Error("Invalid RSAES-OAEP padding.");return h.substring(b+1)};function Ci(t,e,r){r||(r=Ce.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var oc=ft((C2,Vo)=>{var rr=dt();Tt();Bi();Nn();(function(){if(rr.prime){Vo.exports=rr.prime;return}var t=Vo.exports=rr.prime=rr.prime||{},e=rr.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(l,d){return l|d};t.generateProbablePrime=function(l,d,g){typeof d=="function"&&(g=d,d={}),d=d||{};var h=d.algorithm||"PRIMEINC";typeof h=="string"&&(h={name:h}),h.options=h.options||{};var p=d.prng||rr.random,y={nextBytes:function(x){for(var w=p.getBytesSync(x.length),b=0;b<x.length;++b)x[b]=w.charCodeAt(b)}};if(h.name==="PRIMEINC")return o(l,y,h.options,g);throw new Error("Invalid prime generation algorithm: "+h.name)};function o(l,d,g,h){return"workers"in g?c(l,d,g,h):s(l,d,g,h)}function s(l,d,g,h){var p=f(l,d),y=0,x=u(p.bitLength());"millerRabinTests"in g&&(x=g.millerRabinTests);var w=10;"maxBlockTime"in g&&(w=g.maxBlockTime),a(p,l,d,y,x,w,h)}function a(l,d,g,h,p,y,x){var w=+new Date;do{if(l.bitLength()>d&&(l=f(d,g)),l.isProbablePrime(p))return x(null,l);l.dAddOffset(r[h++%8],0)}while(y<0||+new Date-w<y);rr.util.setImmediate(function(){a(l,d,g,h,p,y,x)})}function c(l,d,g,h){if(typeof Worker>"u")return s(l,d,g,h);var p=f(l,d),y=g.workers,x=g.workLoad||100,w=x*30/8,b=g.workerScript||"forge/prime.worker.js";if(y===-1)return rr.util.estimateCores(function(E,S){E&&(S=2),y=S-1,_()});_();function _(){y=Math.max(1,y);for(var E=[],S=0;S<y;++S)E[S]=new Worker(b);for(var N=y,S=0;S<y;++S)E[S].addEventListener("message",P);var B=!1;function P(F){if(!B){--N;var O=F.data;if(O.found){for(var V=0;V<E.length;++V)E[V].terminate();return B=!0,h(null,new e(O.prime,16))}p.bitLength()>l&&(p=f(l,d));var Y=p.toString(16);F.target.postMessage({hex:Y,workLoad:x}),p.dAddOffset(w,0)}}}}function f(l,d){var g=new e(l,d),h=l-1;return g.testBit(h)||g.bitwiseTo(e.ONE.shiftLeft(h),i,g),g.dAddOffset(31-g.mod(n).byteValue(),0),g}function u(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}})()});var Ti=ft((A2,hc)=>{var $=dt();Rn();Bi();li();ic();oc();Nn();Tt();typeof it>"u"&&(it=$.jsbn.BigInteger);var it,qo=$.util.isNodejs?mi():null,v=$.asn1,se=$.util;$.pki=$.pki||{};hc.exports=$.pki.rsa=$.rsa=$.rsa||{};var Q=$.pki,Np=[6,4,2,4,2,4,6,2],Dp={name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Lp={name:"RSAPrivateKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Up={name:"RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},kp=$.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Pp={name:"DigestInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:v.Class.UNIVERSAL,type:v.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},Op=function(t){var e;if(t.algorithm in Q.oids)e=Q.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=v.oidToDer(e).getBytes(),i=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),o=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);o.value.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,n)),o.value.push(v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,""));var s=v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(s),v.toDer(i).getBytes()},uc=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(it.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(it.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new it($.util.bytesToHex($.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(it.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var s=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};Q.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=lc(t,e,r)):(i=$.util.createBuffer(),i.putBytes(t));for(var s=new it(i.toHex(),16),a=uc(s,e,n),c=a.toString(16),f=$.util.createBuffer(),u=o-Math.ceil(c.length/2);u>0;)f.putByte(0),--u;return f.putBytes($.util.hexToBytes(c)),f.getBytes()};Q.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var s=new it($.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=uc(s,e,r),c=a.toString(16),f=$.util.createBuffer(),u=i-Math.ceil(c.length/2);u>0;)f.putByte(0),--u;return f.putBytes($.util.hexToBytes(c)),n!==!1?Ai(f.getBytes(),e,r):f.getBytes()};Q.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||$.random,i={nextBytes:function(a){for(var c=n.getBytesSync(a.length),f=0;f<a.length;++f)a[f]=c.charCodeAt(f)}},o=r.algorithm||"PRIMEINC",s;if(o==="PRIMEINC")s={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new it(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+o);return s};Q.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new it(null);r.fromInt(30);for(var n=0,i=function(l,d){return l|d},o=+new Date,s,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,f=c-1;t.pqState===0?(t.num=new it(c,t.rng),t.num.testBit(f)||t.num.bitwiseTo(it.ONE.shiftLeft(f),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(Fp(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(Np[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(it.ONE).gcd(t.e).compareTo(it.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(it.ONE),t.q1=t.q.subtract(it.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(it.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var u=t.e.modInverse(t.phi);t.keys={privateKey:Q.rsa.setPrivateKey(t.n,t.e,u,t.p,t.q,u.mod(t.p1),u.mod(t.q1),t.q.modInverse(t.p)),publicKey:Q.rsa.setPublicKey(t.n,t.e)}}s=+new Date,a+=s-o,o=s}return t.keys!==null};Q.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!$.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(sc("generateKeyPair"))return qo.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,f){if(a)return n(a);n(null,{privateKey:Q.privateKeyFromPem(f),publicKey:Q.publicKeyFromPem(c)})});if(ac("generateKey")&&ac("exportKey"))return se.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:fc(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return se.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=Q.privateKeyFromAsn1(v.fromDer($.util.createBuffer(a)));n(null,{privateKey:c,publicKey:Q.setRsaPublicKey(c.n,c.e)})}});if(cc("generateKey")&&cc("exportKey")){var i=se.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:fc(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var c=a.target.result,f=se.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);f.oncomplete=function(u){var l=u.target.result,d=Q.privateKeyFromAsn1(v.fromDer($.util.createBuffer(l)));n(null,{privateKey:d,publicKey:Q.setRsaPublicKey(d.n,d.e)})},f.onerror=function(u){n(u)}},i.onerror=function(a){n(a)};return}}else if(sc("generateKeyPairSync")){var o=qo.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Q.privateKeyFromPem(o.privateKey),publicKey:Q.publicKeyFromPem(o.publicKey)}}}var s=Q.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Q.rsa.stepKeyPairGenerationState(s,0),s.keys;Kp(s,r,n)};Q.setRsaPublicKey=Q.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,c,f){return lc(a,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,c){return $.pkcs1.encode_rsa_oaep(c,a,o)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return Q.rsa.encrypt(s,r,!0)},r.verify=function(n,i,o,s){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:function(c,f){f=Ai(f,r,!0);var u=v.fromDer(f,{parseAllBytes:s._parseAllDigestBytes}),l={},d=[];if(!v.validate(u,Pp,l,d)){var g=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw g.errors=d,g}var h=v.derToOid(l.algorithmIdentifier);if(!(h===$.oids.md2||h===$.oids.md5||h===$.oids.sha1||h===$.oids.sha224||h===$.oids.sha256||h===$.oids.sha384||h===$.oids.sha512||h===$.oids["sha512-224"]||h===$.oids["sha512-256"])){var g=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw g.oid=h,g}if((h===$.oids.md2||h===$.oids.md5)&&!("parameters"in l))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===l.digest}}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:function(c,f){return f=Ai(f,r,!0),c===f}});var a=Q.rsa.decrypt(i,r,!0,!1);return o.verify(n,a,r.n.bitLength())},r};Q.setRsaPrivateKey=Q.rsa.setPrivateKey=function(t,e,r,n,i,o,s,a){var c={n:t,e,d:r,p:n,q:i,dP:o,dQ:s,qInv:a};return c.decrypt=function(f,u,l){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var d=Q.rsa.decrypt(f,c,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:Ai};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(g,h){return $.pkcs1.decode_rsa_oaep(h,g,l)}};else if(["RAW","NONE","NULL",null].indexOf(u)!==-1)u={decode:function(g){return g}};else throw new Error('Unsupported encryption scheme: "'+u+'".');return u.decode(d,c,!1)},c.sign=function(f,u){var l=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:Op},l=1):(u==="NONE"||u==="NULL"||u===null)&&(u={encode:function(){return f}},l=1);var d=u.encode(f,c.n.bitLength());return Q.rsa.encrypt(d,c,l)},c};Q.wrapRsaPrivateKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(Q.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(t).getBytes())])};Q.privateKeyFromAsn1=function(t){var e={},r=[];if(v.validate(t,Dp,e,r)&&(t=v.fromDer($.util.createBuffer(e.privateKey))),e={},r=[],!v.validate(t,Lp,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,s,a,c,f,u,l;return i=$.util.createBuffer(e.privateKeyModulus).toHex(),o=$.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=$.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=$.util.createBuffer(e.privateKeyPrime1).toHex(),c=$.util.createBuffer(e.privateKeyPrime2).toHex(),f=$.util.createBuffer(e.privateKeyExponent1).toHex(),u=$.util.createBuffer(e.privateKeyExponent2).toHex(),l=$.util.createBuffer(e.privateKeyCoefficient).toHex(),Q.setRsaPrivateKey(new it(i,16),new it(o,16),new it(s,16),new it(a,16),new it(c,16),new it(f,16),new it(u,16),new it(l,16))};Q.privateKeyToAsn1=Q.privateKeyToRSAPrivateKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ae(t.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ae(t.e)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ae(t.d)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ae(t.p)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ae(t.q)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ae(t.dP)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ae(t.dQ)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ae(t.qInv))])};Q.publicKeyFromAsn1=function(t){var e={},r=[];if(v.validate(t,kp,e,r)){var n=v.derToOid(e.publicKeyOid);if(n!==Q.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!v.validate(t,Up,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=$.util.createBuffer(e.publicKeyModulus).toHex(),s=$.util.createBuffer(e.publicKeyExponent).toHex();return Q.setRsaPublicKey(new it(o,16),new it(s,16))};Q.publicKeyToAsn1=Q.publicKeyToSubjectPublicKeyInfo=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(Q.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,[Q.publicKeyToRSAPublicKey(t)])])};Q.publicKeyToRSAPublicKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ae(t.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ae(t.e))])};function lc(t,e,r){var n=$.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var s=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<s;++c)n.putByte(a)}else for(;s>0;){for(var f=0,u=$.random.getBytes(s),c=0;c<s;++c)a=u.charCodeAt(c),a===0?++f:n.putByte(a);s=f}return n.putByte(0),n.putBytes(t),n}function Ai(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=$.util.createBuffer(t),s=o.getByte(),a=o.getByte();if(s!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=i-3-n;for(var f=0;f<c;++f)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(a===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var u=o.getByte();if(u!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function Kp(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(a,c){if(a)return r(a);if(t.p=c,t.q!==null)return s(a,t.q);o(t.qBits,s)})}function o(a,c){$.prime.generateProbablePrime(a,n,c)}function s(a,c){if(a)return r(a);if(t.q=c,t.p.compareTo(t.q)<0){var f=t.p;t.p=t.q,t.q=f}if(t.p.subtract(it.ONE).gcd(t.e).compareTo(it.ONE)!==0){t.p=null,i();return}if(t.q.subtract(it.ONE).gcd(t.e).compareTo(it.ONE)!==0){t.q=null,o(t.qBits,s);return}if(t.p1=t.p.subtract(it.ONE),t.q1=t.q.subtract(it.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(it.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,s);return}var u=t.e.modInverse(t.phi);t.keys={privateKey:Q.rsa.setPrivateKey(t.n,t.e,u,t.p,t.q,u.mod(t.p1),u.mod(t.q1),t.q.modInverse(t.p)),publicKey:Q.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Ae(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=$.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function Fp(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function sc(t){return $.util.isNodejs&&typeof qo[t]=="function"}function ac(t){return typeof se.globalScope<"u"&&typeof se.globalScope.crypto=="object"&&typeof se.globalScope.crypto.subtle=="object"&&typeof se.globalScope.crypto.subtle[t]=="function"}function cc(t){return typeof se.globalScope<"u"&&typeof se.globalScope.msCrypto=="object"&&typeof se.globalScope.msCrypto.subtle=="object"&&typeof se.globalScope.msCrypto.subtle[t]=="function"}function fc(t){for(var e=$.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var mc=ft((T2,xc)=>{var q=dt();Lo();Rn();E0();xr();li();T0();R0();Nn();q0();Ti();Tt();typeof dc>"u"&&(dc=q.jsbn.BigInteger);var dc,A=q.asn1,X=q.pki=q.pki||{};xc.exports=X.pbe=q.pbe=q.pbe||{};var vr=X.oids,Mp={name:"EncryptedPrivateKeyInfo",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Vp={name:"PBES2Algorithms",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},qp={name:"pkcs-12PbeParams",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"iterations"}]};X.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=q.random.getBytesSync(r.saltSize),i=r.count,o=A.integerToDer(i),s,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var f,u,l;switch(r.algorithm){case"aes128":s=16,f=16,u=vr["aes128-CBC"],l=q.aes.createEncryptionCipher;break;case"aes192":s=24,f=16,u=vr["aes192-CBC"],l=q.aes.createEncryptionCipher;break;case"aes256":s=32,f=16,u=vr["aes256-CBC"],l=q.aes.createEncryptionCipher;break;case"des":s=8,f=8,u=vr.desCBC,l=q.des.createEncryptionCipher;break;default:var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var g="hmacWith"+r.prfAlgorithm.toUpperCase(),h=gc(g),p=q.pkcs5.pbkdf2(e,n,i,s,h),y=q.random.getBytesSync(f),x=l(p);x.start(y),x.update(A.toDer(t)),x.finish(),c=x.output.getBytes();var w=zp(n,o,s,g);a=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(vr.pkcs5PBES2).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(vr.pkcs5PBKDF2).getBytes()),w]),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(u).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,y)])])])}else if(r.algorithm==="3des"){s=24;var b=new q.util.ByteBuffer(n),p=X.pbe.generatePkcs12Key(e,b,1,i,s),y=X.pbe.generatePkcs12Key(e,b,2,i,s),x=q.des.createEncryptionCipher(p);x.start(y),x.update(A.toDer(t)),x.finish(),c=x.output.getBytes(),a=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(vr["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,n),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,o.getBytes())])])}else{var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var _=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[a,A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,c)]);return _};X.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!A.validate(t,Mp,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=A.derToOid(n.encryptionOid),a=X.pbe.getCipher(s,n.encryptionParams,e),c=q.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=A.fromDer(a.output)),r};X.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:A.toDer(t).getBytes()};return q.pem.encode(r,{maxline:e})};X.encryptedPrivateKeyFromPem=function(t){var e=q.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return A.fromDer(e.body)};X.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=X.wrapRsaPrivateKey(X.privateKeyToAsn1(t));return n=X.encryptPrivateKeyInfo(n,e,r),X.encryptedPrivateKeyToPem(n)}var i,o,s,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,o=q.random.getBytesSync(16),a=q.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,o=q.random.getBytesSync(16),a=q.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,o=q.random.getBytesSync(16),a=q.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,o=q.random.getBytesSync(8),a=q.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,o=q.random.getBytesSync(8),a=q.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var f=q.pbe.opensslDeriveBytes(e,o.substr(0,8),s),u=a(f);u.start(o),u.update(A.toDer(X.privateKeyToAsn1(t))),u.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:q.util.bytesToHex(o).toUpperCase()},body:u.output.getBytes()};return q.pem.encode(l)};X.decryptRsaPrivateKey=function(t,e){var r=null,n=q.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,s;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,s=q.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,s=q.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,s=q.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,s=q.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,s=q.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,s=function(l){return q.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":o=8,s=function(l){return q.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":o=16,s=function(l){return q.rc2.createDecryptionCipher(l,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=q.util.hexToBytes(n.dekInfo.parameters),c=q.pbe.opensslDeriveBytes(e,a.substr(0,8),o),f=s(c);if(f.start(a),f.update(q.util.createBuffer(n.body)),f.finish())r=f.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=X.decryptPrivateKeyInfo(A.fromDer(r),e):r=A.fromDer(r),r!==null&&(r=X.privateKeyFromAsn1(r)),r};X.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var s,a;if(typeof o>"u"||o===null){if(!("sha1"in q.md))throw new Error('"sha1" hash algorithm unavailable.');o=q.md.sha1.create()}var c=o.digestLength,f=o.blockLength,u=new q.util.ByteBuffer,l=new q.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)l.putInt16(t.charCodeAt(a));l.putInt16(0)}var d=l.length(),g=e.length(),h=new q.util.ByteBuffer;h.fillWithByte(r,f);var p=f*Math.ceil(g/f),y=new q.util.ByteBuffer;for(a=0;a<p;a++)y.putByte(e.at(a%g));var x=f*Math.ceil(d/f),w=new q.util.ByteBuffer;for(a=0;a<x;a++)w.putByte(l.at(a%d));var b=y;b.putBuffer(w);for(var _=Math.ceil(i/c),E=1;E<=_;E++){var S=new q.util.ByteBuffer;S.putBytes(h.bytes()),S.putBytes(b.bytes());for(var N=0;N<n;N++)o.start(),o.update(S.getBytes()),S=o.digest();var B=new q.util.ByteBuffer;for(a=0;a<f;a++)B.putByte(S.at(a%c));var P=Math.ceil(g/f)+Math.ceil(d/f),F=new q.util.ByteBuffer;for(s=0;s<P;s++){var O=new q.util.ByteBuffer(b.getBytes(f)),V=511;for(a=B.length()-1;a>=0;a--)V=V>>8,V+=B.at(a)+O.at(a),O.setAt(a,V&255);F.putBuffer(O)}b=F,u.putBuffer(S)}return u.truncate(u.length()-i),u};X.pbe.getCipher=function(t,e,r){switch(t){case X.oids.pkcs5PBES2:return X.pbe.getCipherForPBES2(t,e,r);case X.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case X.oids["pbewithSHAAnd40BitRC2-CBC"]:return X.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};X.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!A.validate(e,Vp,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=A.derToOid(n.kdfOid),t!==X.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=A.derToOid(n.encOid),t!==X.oids["aes128-CBC"]&&t!==X.oids["aes192-CBC"]&&t!==X.oids["aes256-CBC"]&&t!==X.oids["des-EDE3-CBC"]&&t!==X.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var s=n.kdfSalt,a=q.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,f;switch(X.oids[t]){case"aes128-CBC":c=16,f=q.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,f=q.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,f=q.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,f=q.des.createDecryptionCipher;break;case"desCBC":c=8,f=q.des.createDecryptionCipher;break}var u=yc(n.prfOid),l=q.pkcs5.pbkdf2(r,s,a,c,u),d=n.encIv,g=f(l);return g.start(d),g};X.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!A.validate(e,qp,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=q.util.createBuffer(n.salt),a=q.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,f,u;switch(t){case X.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,f=8,u=q.des.startDecrypting;break;case X.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,f=8,u=function(p,y){var x=q.rc2.createDecryptionCipher(p,40);return x.start(y,null),x};break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var l=yc(n.prfOid),d=X.pbe.generatePkcs12Key(r,s,1,a,c,l);l.start();var g=X.pbe.generatePkcs12Key(r,s,2,a,f,l);return u(d,g)};X.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in q.md))throw new Error('"md5" hash algorithm unavailable.');n=q.md.md5.create()}e===null&&(e="");for(var i=[pc(n,t+e)],o=16,s=1;o<r;++s,o+=16)i.push(pc(n,i[s-1]+t+e));return i.join("").substr(0,r)};function pc(t,e){return t.start().update(e).digest().getBytes()}function yc(t){var e;if(!t)e="hmacWithSHA1";else if(e=X.oids[A.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return gc(e)}function gc(t){var e=q.md;switch(t){case"hmacWithSHA224":e=q.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function zp(t,e,r,n){var i=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,t),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,q.util.hexToBytes(r.toString(16))),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(X.oids[n]).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,"")])),i}});var Rf=ft((Pw,_f)=>{var xt=dt();xr();Tt();var Hn=_f.exports=xt.sha512=xt.sha512||{};xt.md.sha512=xt.md.algorithms.sha512=Hn;var Tf=xt.sha384=xt.sha512.sha384=xt.sha512.sha384||{};Tf.create=function(){return Hn.create("SHA-384")};xt.md.sha384=xt.md.algorithms.sha384=Tf;xt.sha512.sha256=xt.sha512.sha256||{create:function(){return Hn.create("SHA-512/256")}};xt.md["sha512/256"]=xt.md.algorithms["sha512/256"]=xt.sha512.sha256;xt.sha512.sha224=xt.sha512.sha224||{create:function(){return Hn.create("SHA-512/224")}};xt.md["sha512/224"]=xt.md.algorithms["sha512/224"]=xt.sha512.sha224;Hn.create=function(t){if(If||dg(),typeof t>"u"&&(t="SHA-512"),!(t in Nr))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Nr[t],r=null,n=xt.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,f=0;f<c;++f)a.fullMessageLength.push(0);n=xt.util.createBuffer(),r=new Array(e.length);for(var f=0;f<e.length;++f)r[f]=e[f].slice(0);return a},a.start(),a.update=function(c,f){f==="utf8"&&(c=xt.util.encodeUtf8(c));var u=c.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var l=a.fullMessageLength.length-1;l>=0;--l)a.fullMessageLength[l]+=u[1],u[1]=u[0]+(a.fullMessageLength[l]/4294967296>>>0),a.fullMessageLength[l]=a.fullMessageLength[l]>>>0,u[0]=u[1]/4294967296>>>0;return n.putBytes(c),Af(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=xt.util.createBuffer();c.putBytes(n.bytes());var f=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,u=f&a.blockLength-1;c.putBytes(zs.substr(0,a.blockLength-u));for(var l,d,g=a.fullMessageLength[0]*8,h=0;h<a.fullMessageLength.length-1;++h)l=a.fullMessageLength[h+1]*8,d=l/4294967296>>>0,g+=d,c.putInt32(g>>>0),g=l>>>0;c.putInt32(g);for(var p=new Array(r.length),h=0;h<r.length;++h)p[h]=r[h].slice(0);Af(p,i,c);var y=xt.util.createBuffer(),x;t==="SHA-512"?x=p.length:t==="SHA-384"?x=p.length-2:x=p.length-4;for(var h=0;h<x;++h)y.putInt32(p[h][0]),(h!==x-1||t!=="SHA-512/224")&&y.putInt32(p[h][1]);return y},a};var zs=null,If=!1,Hs=null,Nr=null;function dg(){zs="\x80",zs+=xt.util.fillString("\0",128),Hs=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Nr={},Nr["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Nr["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Nr["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Nr["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],If=!0}function Af(t,e,r){for(var n,i,o,s,a,c,f,u,l,d,g,h,p,y,x,w,b,_,E,S,N,B,P,F,O,V,Y,j,C,D,L,k,I,z,G,W=r.length();W>=128;){for(C=0;C<16;++C)e[C][0]=r.getInt32()>>>0,e[C][1]=r.getInt32()>>>0;for(;C<80;++C)k=e[C-2],D=k[0],L=k[1],n=((D>>>19|L<<13)^(L>>>29|D<<3)^D>>>6)>>>0,i=((D<<13|L>>>19)^(L<<3|D>>>29)^(D<<26|L>>>6))>>>0,z=e[C-15],D=z[0],L=z[1],o=((D>>>1|L<<31)^(D>>>8|L<<24)^D>>>7)>>>0,s=((D<<31|L>>>1)^(D<<24|L>>>8)^(D<<25|L>>>7))>>>0,I=e[C-7],G=e[C-16],L=i+I[1]+s+G[1],e[C][0]=n+I[0]+o+G[0]+(L/4294967296>>>0)>>>0,e[C][1]=L>>>0;for(p=t[0][0],y=t[0][1],x=t[1][0],w=t[1][1],b=t[2][0],_=t[2][1],E=t[3][0],S=t[3][1],N=t[4][0],B=t[4][1],P=t[5][0],F=t[5][1],O=t[6][0],V=t[6][1],Y=t[7][0],j=t[7][1],C=0;C<80;++C)f=((N>>>14|B<<18)^(N>>>18|B<<14)^(B>>>9|N<<23))>>>0,u=((N<<18|B>>>14)^(N<<14|B>>>18)^(B<<23|N>>>9))>>>0,l=(O^N&(P^O))>>>0,d=(V^B&(F^V))>>>0,a=((p>>>28|y<<4)^(y>>>2|p<<30)^(y>>>7|p<<25))>>>0,c=((p<<4|y>>>28)^(y<<30|p>>>2)^(y<<25|p>>>7))>>>0,g=(p&x|b&(p^x))>>>0,h=(y&w|_&(y^w))>>>0,L=j+u+d+Hs[C][1]+e[C][1],n=Y+f+l+Hs[C][0]+e[C][0]+(L/4294967296>>>0)>>>0,i=L>>>0,L=c+h,o=a+g+(L/4294967296>>>0)>>>0,s=L>>>0,Y=O,j=V,O=P,V=F,P=N,F=B,L=S+i,N=E+n+(L/4294967296>>>0)>>>0,B=L>>>0,E=b,S=_,b=x,_=w,x=p,w=y,L=i+s,p=n+o+(L/4294967296>>>0)>>>0,y=L>>>0;L=t[0][1]+y,t[0][0]=t[0][0]+p+(L/4294967296>>>0)>>>0,t[0][1]=L>>>0,L=t[1][1]+w,t[1][0]=t[1][0]+x+(L/4294967296>>>0)>>>0,t[1][1]=L>>>0,L=t[2][1]+_,t[2][0]=t[2][0]+b+(L/4294967296>>>0)>>>0,t[2][1]=L>>>0,L=t[3][1]+S,t[3][0]=t[3][0]+E+(L/4294967296>>>0)>>>0,t[3][1]=L>>>0,L=t[4][1]+B,t[4][0]=t[4][0]+N+(L/4294967296>>>0)>>>0,t[4][1]=L>>>0,L=t[5][1]+F,t[5][0]=t[5][0]+P+(L/4294967296>>>0)>>>0,t[5][1]=L>>>0,L=t[6][1]+V,t[6][0]=t[6][0]+O+(L/4294967296>>>0)>>>0,t[6][1]=L>>>0,L=t[7][1]+j,t[7][0]=t[7][0]+Y+(L/4294967296>>>0)>>>0,t[7][1]=L>>>0,W-=128}}});var nu=ft((W8,ru)=>{var un=1e3,ln=un*60,hn=ln*60,kr=hn*24,Mg=kr*7,Vg=kr*365.25;ru.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return qg(t);if(r==="number"&&isFinite(t))return e.long?Hg(t):zg(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function qg(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Vg;case"weeks":case"week":case"w":return r*Mg;case"days":case"day":case"d":return r*kr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*hn;case"minutes":case"minute":case"mins":case"min":case"m":return r*ln;case"seconds":case"second":case"secs":case"sec":case"s":return r*un;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function zg(t){var e=Math.abs(t);return e>=kr?Math.round(t/kr)+"d":e>=hn?Math.round(t/hn)+"h":e>=ln?Math.round(t/ln)+"m":e>=un?Math.round(t/un)+"s":t+"ms"}function Hg(t){var e=Math.abs(t);return e>=kr?Ji(t,e,kr,"day"):e>=hn?Ji(t,e,hn,"hour"):e>=ln?Ji(t,e,ln,"minute"):e>=un?Ji(t,e,un,"second"):t+" ms"}function Ji(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var ou=ft((Z8,iu)=>{function Gg(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=nu(),r.destroy=f,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let l=0;for(let d=0;d<u.length;d++)l=(l<<5)-l+u.charCodeAt(d),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(u){let l,d=null,g,h;function p(...y){if(!p.enabled)return;let x=p,w=Number(new Date),b=w-(l||w);x.diff=b,x.prev=l,x.curr=w,l=w,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let _=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(S,N)=>{if(S==="%%")return"%";_++;let B=r.formatters[N];if(typeof B=="function"){let P=y[_];S=B.call(x,P),y.splice(_,1),_--}return S}),r.formatArgs.call(x,y),(x.log||r.log).apply(x,y)}return p.namespace=u,p.useColors=r.useColors(),p.color=r.selectColor(u),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(g!==r.namespaces&&(g=r.namespaces,h=r.enabled(u)),h),set:y=>{d=y}}),typeof r.init=="function"&&r.init(p),p}function n(u,l){let d=r(this.namespace+(typeof l>"u"?":":l)+u);return d.log=this.log,d}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let l,d=(typeof u=="string"?u:"").split(/[\s,]+/),g=d.length;for(l=0;l<g;l++)d[l]&&(u=d[l].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let l,d;for(l=0,d=r.skips.length;l<d;l++)if(r.skips[l].test(u))return!1;for(l=0,d=r.names.length;l<d;l++)if(r.names[l].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}iu.exports=Gg});var su=ft((Jt,ji)=>{Jt.formatArgs=Yg;Jt.save=Wg;Jt.load=Zg;Jt.useColors=$g;Jt.storage=Qg();Jt.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Jt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function $g(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Yg(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+ji.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Jt.log=console.debug||console.log||(()=>{});function Wg(t){try{t?Jt.storage.setItem("debug",t):Jt.storage.removeItem("debug")}catch{}}function Zg(){let t;try{t=Jt.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Qg(){try{return localStorage}catch{}}ji.exports=ou()(Jt);var{formatters:Xg}=ji.exports;Xg.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ea=ft((nE,cu)=>{"use strict";function au(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function jg(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return au(t,r)}catch{r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),au(new i,r)}}cu.exports=jg});var Ca=ft((o4,Ba)=>{var i4=function(){typeof Ba<"u"&&(Ba.exports=p);var t=86400,e=3200,r=146097*e/400,n=t*r,i=1e3*n,o=864e13,s=4294967296,a=1e6,c="000000000",f=Math.trunc||function(B){var P=B-B%1;return P==0&&(B<0||B===0&&1/B!=1/0)?-0:P},u=p.prototype,l=(p.fromDate=function(B){return new p(+B)},p.fromInt64BE=_(0,1,2,3,0,4),p.fromInt64LE=_(3,2,1,0,4,0),p.fromString=function(O){var P,F=new p,O=(O+="").replace(/^\s*[+\-]?\d+/,function(Y){var Y=+Y,j=1970+(Y-1970)%400;return F.year=Y-j,j}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(V,Y,j){return Y<0&&(j*=-1),P=6e4*(60*+Y+ +j),""}).replace(/\.\d+$/,function(V){return F.nano=+(V+c).substr(1,9),""}).split(/\D+/);if(1<O.length?O[1]--:O[1]=0,F.time=P=Date.UTC.apply(Date,O)-(P||0),isNaN(P))throw new TypeError("Invalid Date");return y(F)},p.fromTimeT=function(B){return w(B,0)},u.year=0,u.time=0,u.nano=0,u.addNano=function(B){return this.nano+=+B||0,this},u.getNano=function(){var B=y(this);return(B.time%1e3*a+ +B.nano+1e9)%1e9},u.getTimeT=function(){var P=y(this),B=Math.floor(P.time/1e3),P=P.year;return P&&(B+=P*r*t/e),B},u.getYear=function(){return this.toDate().getUTCFullYear()+this.year},u.toDate=function(){return x(y(this).time)},u.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},u.toString=function(B){var P=this,F=P.toDate(),O={H:function(){return S(F.getUTCHours())},L:function(){return N(F.getUTCMilliseconds(),3)},M:function(){return S(F.getUTCMinutes())},N:function(){return N(P.getNano(),9)},S:function(){return S(F.getUTCSeconds())},Y:function(){var V=P.getYear();return 999999<V?"+"+V:9999<V?"+"+N(V,6):0<=V?N(V,4):-999999<=V?"-"+N(-V,6):V},a:function(){return g[F.getUTCDay()]},b:function(){return d[F.getUTCMonth()]},d:function(){return S(F.getUTCDate())},e:function(){return function(V){return(9<V?"":" ")+(0|V)}(F.getUTCDate())},m:function(){return S(F.getUTCMonth()+1)}};return function V(Y){return Y.replace(/%./g,function(j){var D=j[1],C=h[D],D=O[D];return C?V(C):D?D():j})}(B||l)},u.writeInt64BE=b(0,1,2,3,0,4),u.writeInt64LE=b(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return p;function p(B,P,F){var O=this;if(!(O instanceof p))return new p(B,P,F);O.time=+B||0,O.nano=+P||0,O.year=+F||0,y(O)}function y(B){var P,F,O,V=B.year,Y=B.time,j=B.nano,C=((j<0||a<=j)&&(j-=(F=Math.floor(j/a))*a,Y+=F,F=1),V%e);return(Y<-o||o<Y||C)&&((P=f(Y/i))&&(V+=P*e,Y-=P*i),(O=x(Y)).setUTCFullYear(C+O.getUTCFullYear()),O=(Y=+O)+(P=f((V-=C)/e))*i,P&&-o<=O&&O<=o&&(V-=P*e,Y=O),F=1),F&&(B.year=V,B.time=Y,B.nano=j),B}function x(B){var P=new Date(0);return P.setTime(B),P}function w(V,O){V=+V||0;var F=f((O=(O|0)*s)/n)+f(V/n),O=O%n+V%n,V=f(O/n);return V&&(F+=V,O-=V*n),new p(1e3*O,0,F*e)}function b(B,P,F,O,V,Y){return function(C,D){var k=y(this);C=C||new Array(8),E(C,D|=0);var I=Math.floor(k.time/1e3),k=k.year*(r*t/e),L=f(k/s)+f(I/s),k=k%s+I%s,I=Math.floor(k/s);return I&&(L+=I,k-=I*s),j(C,D+V,L),j(C,D+Y,k),C};function j(C,D,L){C[D+B]=L>>24&255,C[D+P]=L>>16&255,C[D+F]=L>>8&255,C[D+O]=255&L}}function _(B,P,F,O,V,Y){return function(C,D){E(C,D|=0);var L=j(C,D+V);return w(j(C,D+Y),L)};function j(C,D){return 16777216*C[D+B]+(C[D+P]<<16|C[D+F]<<8|C[D+O])}}function E(B,P){if(B=B&&B.length,B==null)throw new TypeError("Invalid Buffer");if(B<P+8)throw new RangeError("Out of range")}function S(B){return(9<B?"":"0")+(0|B)}function N(B,P){return(c+(0|B)).substr(-P)}}()});var e2={};ut(e2,{create:()=>Qm,createWithExpiration:()=>Xm,extractPublicKey:()=>Zl,getLocalKey:()=>jm,marshal:()=>Jl,namespace:()=>ih,namespaceLength:()=>Zm,peerIdFromRoutingKey:()=>eh,peerIdToRoutingKey:()=>th,unmarshal:()=>jl});var M8=Rt(Rn(),1),V8=Rt(mc(),1);var ot=class extends Error{code;props;constructor(e,r,n){super(e),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};var Fg=Rt(dt(),1);function Hr(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}var Yo={};ut(Yo,{base10:()=>Zp});function Hp(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var p=0,y=0,x=0,w=h.length;x!==w&&h[x]===0;)x++,p++;for(var b=(w-x)*u+1>>>0,_=new Uint8Array(b);x!==w;){for(var E=h[x],S=0,N=b-1;(E!==0||S<y)&&N!==-1;N--,S++)E+=256*_[N]>>>0,_[N]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");y=S,x++}for(var B=b-y;B!==b&&_[B]===0;)B++;for(var P=c.repeat(p);B<b;++B)P+=t.charAt(_[B]);return P}function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var p=0;if(h[p]!==" "){for(var y=0,x=0;h[p]===c;)y++,p++;for(var w=(h.length-p)*f+1>>>0,b=new Uint8Array(w);h[p];){var _=r[h.charCodeAt(p)];if(_===255)return;for(var E=0,S=w-1;(_!==0||E<x)&&S!==-1;S--,E++)_+=a*b[S]>>>0,b[S]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");x=E,p++}if(h[p]!==" "){for(var N=w-x;N!==w&&b[N]===0;)N++;for(var B=new Uint8Array(y+(w-N)),P=y;N!==w;)B[P++]=b[N++];return B}}}function g(h){var p=d(h);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:d,decode:g}}var Gp=Hp,$p=Gp,bc=$p;var N2=new Uint8Array(0);var vc=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Fe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var wc=t=>new TextEncoder().encode(t),Ec=t=>new TextDecoder().decode(t);var zo=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ho=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Bc(this,e)}},Go=class{constructor(e){this.decoders=e}or(e){return Bc(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Bc=(t,e)=>new Go({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),$o=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new zo(e,r,n),this.decoder=new Ho(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Gr=({name:t,prefix:e,encode:r,decode:n})=>new $o(t,e,r,n),nr=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=bc(r,e);return Gr({prefix:t,name:e,encode:n,decode:o=>Fe(i(o))})},Yp=(t,e,r,n)=>{let i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,c=0,f=0;for(let u=0;u<o;++u){let l=i[t[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,s[f++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},Wp=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},St=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Gr({prefix:e,name:t,encode(i){return Wp(i,n,r)},decode(i){return Yp(i,n,r,t)}});var Zp=nr({prefix:"9",name:"base10",alphabet:"0123456789"});var Wo={};ut(Wo,{base16:()=>Qp,base16upper:()=>Xp});var Qp=St({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Xp=St({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Zo={};ut(Zo,{base2:()=>Jp});var Jp=St({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Qo={};ut(Qo,{base256emoji:()=>ny});var Cc=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),jp=Cc.reduce((t,e,r)=>(t[r]=e,t),[]),ty=Cc.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function ey(t){return t.reduce((e,r)=>(e+=jp[r],e),"")}function ry(t){let e=[];for(let r of t){let n=ty[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var ny=Gr({prefix:"\u{1F680}",name:"base256emoji",encode:ey,decode:ry});var Jo={};ut(Jo,{base32:()=>ir,base32hex:()=>sy,base32hexpad:()=>cy,base32hexpadupper:()=>fy,base32hexupper:()=>ay,base32pad:()=>iy,base32padupper:()=>oy,base32upper:()=>Xo,base32z:()=>uy});var ir=St({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Xo=St({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iy=St({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),oy=St({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sy=St({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ay=St({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cy=St({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fy=St({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uy=St({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var jo={};ut(jo,{base36:()=>Ii,base36upper:()=>ly});var Ii=nr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ly=nr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ts={};ut(ts,{base58btc:()=>Ot,base58flickr:()=>hy});var Ot=nr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hy=nr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var es={};ut(es,{base64:()=>$r,base64pad:()=>dy,base64url:()=>py,base64urlpad:()=>yy});var $r=St({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dy=St({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),py=St({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yy=St({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var rs={};ut(rs,{base8:()=>gy});var gy=St({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ns={};ut(ns,{identity:()=>xy});var xy=Gr({prefix:"\0",name:"identity",encode:t=>Ec(t),decode:t=>wc(t)});var $2=new TextEncoder,Y2=new TextDecoder;var os={};ut(os,{identity:()=>Ie});var vy=Ic,Ac=128,wy=127,Ey=~wy,Sy=Math.pow(2,31);function Ic(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Sy;)e[r++]=t&255|Ac,t/=128;for(;t&Ey;)e[r++]=t&255|Ac,t>>>=7;return e[r]=t|0,Ic.bytes=r-n+1,e}var By=is,Cy=128,Tc=127;function is(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw is.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&Tc)<<i:(s&Tc)*Math.pow(2,i),i+=7}while(s>=Cy);return is.bytes=o-n,r}var Ay=Math.pow(2,7),Ty=Math.pow(2,14),Iy=Math.pow(2,21),_y=Math.pow(2,28),Ry=Math.pow(2,35),Ny=Math.pow(2,42),Dy=Math.pow(2,49),Ly=Math.pow(2,56),Uy=Math.pow(2,63),ky=function(t){return t<Ay?1:t<Ty?2:t<Iy?3:t<_y?4:t<Ry?5:t<Ny?6:t<Dy?7:t<Ly?8:t<Uy?9:10},Py={encode:vy,decode:By,encodingLength:ky},Oy=Py,Ln=Oy;var Un=(t,e=0)=>[Ln.decode(t,e),Ln.decode.bytes],Yr=(t,e,r=0)=>(Ln.encode(t,e,r),e),Wr=t=>Ln.encodingLength(t);var Te=(t,e)=>{let r=e.byteLength,n=Wr(t),i=n+Wr(r),o=new Uint8Array(i+r);return Yr(t,o,0),Yr(r,o,n),o.set(e,i),new Zr(t,r,e,o)},wr=t=>{let e=Fe(t),[r,n]=Un(e),[i,o]=Un(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Zr(r,i,s,e)},_c=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&vc(t.bytes,r.bytes)}},Zr=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var Rc=0,Ky="identity",Nc=Fe,Fy=t=>Te(Rc,Nc(t)),Ie={code:Rc,name:Ky,encode:Nc,digest:Fy};var cs={};ut(cs,{sha256:()=>Kt,sha512:()=>My});var as=({name:t,code:e,encode:r})=>new ss(t,e,r),ss=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Te(this.code,r):r.then(n=>Te(this.code,n))}else throw Error("Unknown type, must be binary type")}};var Lc=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Kt=as({name:"sha2-256",code:18,encode:Lc("SHA-256")}),My=as({name:"sha2-512",code:19,encode:Lc("SHA-512")});var Uc=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return qy(r,fs(t),e||Ot.encoder);default:return zy(r,fs(t),e||ir.encoder)}};var kc=new WeakMap,fs=t=>{let e=kc.get(t);if(e==null){let r=new Map;return kc.set(t,r),r}return e},he=class t{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==kn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Hy)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Te(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&_c(e.multihash,n.multihash)}toString(e){return Uc(this,e)}toJSON(){return{"/":Uc(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new t(n,i,o,s||Pc(n,i,o.bytes))}else if(r[Gy]===!0){let{version:n,multihash:i,code:o}=r,s=wr(i);return t.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==kn)throw new Error(`Version 0 CID must use dag-pb (code: ${kn}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=Pc(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,kn,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=Fe(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new Zr(r.multihashCode,r.digestSize,o,i);return[r.version===0?t.createV0(s):t.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,d]=Un(e.subarray(r));return r+=d,l},i=n(),o=kn;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),c=n(),f=r+c,u=f-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(e,r){let[n,i]=Vy(e,r),o=t.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return fs(o).set(n,e),o}},Vy=(t,e)=>{switch(t[0]){case"Q":{let r=e||Ot;return[Ot.prefix,r.decode(`${Ot.prefix}${t}`)]}case Ot.prefix:{let r=e||Ot;return[Ot.prefix,r.decode(t)]}case ir.prefix:{let r=e||ir;return[ir.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},qy=(t,e,r)=>{let{prefix:n}=r;if(n!==Ot.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},zy=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},kn=112,Hy=18,Pc=(t,e,r)=>{let n=Wr(t),i=n+Wr(e),o=new Uint8Array(i+r.byteLength);return Yr(t,o,0),Yr(e,o,n),o.set(r,i),o},Gy=Symbol.for("@ipld/js-cid/CID");var Me={...ns,...Zo,...rs,...Yo,...Wo,...Jo,...jo,...ts,...es,...Qo},fb={...cs,...os};function Ri(t=0){return globalThis.Buffer?.allocUnsafe!=null?Hr(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Kc(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var Oc=Kc("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),us=Kc("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=Ri(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),$y={utf8:Oc,"utf-8":Oc,hex:Me.base16,latin1:us,ascii:us,binary:us,...Me},Ni=$y;function Wt(t,e="utf8"){let r=Ni[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Hr(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var qs={};ut(qs,{Ed25519PrivateKey:()=>Rr,Ed25519PublicKey:()=>zn,generateKeyPair:()=>fg,generateKeyPairFromSeed:()=>Sf,unmarshalEd25519PrivateKey:()=>ag,unmarshalEd25519PublicKey:()=>cg});function _e(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Fc(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Yy(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function ls(t,...e){if(!Yy(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Mc(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Fc(t.outputLen),Fc(t.blockLen)}function Qr(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Vc(t,e){ls(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Di=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function qc(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var Li=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),de=(t,e)=>t<<32-e|t>>>e,Wy=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Wy)throw new Error("Non little-endian hardware is not supported");function hs(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Pn(t){if(typeof t=="string"&&(t=hs(t)),!qc(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Ui(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];if(!qc(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}var Xr=class{clone(){return this._cloneInto()}},Sb={}.toString;function ki(t){let e=n=>t().update(Pn(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Jr(t=32){if(Di&&typeof Di.getRandomValues=="function")return Di.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Zy(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,f=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+f,a,n)}var jr=class extends Xr{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Li(this.buffer)}update(e){Qr(this);let{view:r,buffer:n,blockLen:i}=this;e=Pn(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=Li(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qr(this),Vc(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;Zy(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=Li(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)a.setUint32(4*l,u[l],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};var Pi=BigInt(4294967295),ds=BigInt(32);function zc(t,e=!1){return e?{h:Number(t&Pi),l:Number(t>>ds&Pi)}:{h:Number(t>>ds&Pi)|0,l:Number(t&Pi)|0}}function Qy(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=zc(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}var Xy=(t,e)=>BigInt(t>>>0)<<ds|BigInt(e>>>0),Jy=(t,e,r)=>t>>>r,jy=(t,e,r)=>t<<32-r|e>>>r,t1=(t,e,r)=>t>>>r|e<<32-r,e1=(t,e,r)=>t<<32-r|e>>>r,r1=(t,e,r)=>t<<64-r|e>>>r-32,n1=(t,e,r)=>t>>>r-32|e<<64-r,i1=(t,e)=>e,o1=(t,e)=>t,s1=(t,e,r)=>t<<r|e>>>32-r,a1=(t,e,r)=>e<<r|t>>>32-r,c1=(t,e,r)=>e<<r-32|t>>>64-r,f1=(t,e,r)=>t<<r-32|e>>>64-r;function u1(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}var l1=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),h1=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,d1=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),p1=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,y1=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),g1=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0;var x1={fromBig:zc,split:Qy,toBig:Xy,shrSH:Jy,shrSL:jy,rotrSH:t1,rotrSL:e1,rotrBH:r1,rotrBL:n1,rotr32H:i1,rotr32L:o1,rotlSH:s1,rotlSL:a1,rotlBH:c1,rotlBL:f1,add:u1,add3L:l1,add3H:h1,add4L:d1,add4H:p1,add5H:g1,add5L:y1},J=x1;var[m1,b1]=J.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),or=new Uint32Array(80),sr=new Uint32Array(80),ps=class extends jr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:f,El:u,Fh:l,Fl:d,Gh:g,Gl:h,Hh:p,Hl:y}=this;return[e,r,n,i,o,s,a,c,f,u,l,d,g,h,p,y]}set(e,r,n,i,o,s,a,c,f,u,l,d,g,h,p,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=u|0,this.Fh=l|0,this.Fl=d|0,this.Gh=g|0,this.Gl=h|0,this.Hh=p|0,this.Hl=y|0}process(e,r){for(let b=0;b<16;b++,r+=4)or[b]=e.getUint32(r),sr[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){let _=or[b-15]|0,E=sr[b-15]|0,S=J.rotrSH(_,E,1)^J.rotrSH(_,E,8)^J.shrSH(_,E,7),N=J.rotrSL(_,E,1)^J.rotrSL(_,E,8)^J.shrSL(_,E,7),B=or[b-2]|0,P=sr[b-2]|0,F=J.rotrSH(B,P,19)^J.rotrBH(B,P,61)^J.shrSH(B,P,6),O=J.rotrSL(B,P,19)^J.rotrBL(B,P,61)^J.shrSL(B,P,6),V=J.add4L(N,O,sr[b-7],sr[b-16]),Y=J.add4H(V,S,F,or[b-7],or[b-16]);or[b]=Y|0,sr[b]=V|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:f,Dl:u,Eh:l,El:d,Fh:g,Fl:h,Gh:p,Gl:y,Hh:x,Hl:w}=this;for(let b=0;b<80;b++){let _=J.rotrSH(l,d,14)^J.rotrSH(l,d,18)^J.rotrBH(l,d,41),E=J.rotrSL(l,d,14)^J.rotrSL(l,d,18)^J.rotrBL(l,d,41),S=l&g^~l&p,N=d&h^~d&y,B=J.add5L(w,E,N,b1[b],sr[b]),P=J.add5H(B,x,_,S,m1[b],or[b]),F=B|0,O=J.rotrSH(n,i,28)^J.rotrBH(n,i,34)^J.rotrBH(n,i,39),V=J.rotrSL(n,i,28)^J.rotrBL(n,i,34)^J.rotrBL(n,i,39),Y=n&o^n&a^o&a,j=i&s^i&c^s&c;x=p|0,w=y|0,p=g|0,y=h|0,g=l|0,h=d|0,{h:l,l:d}=J.add(f|0,u|0,P|0,F|0),f=a|0,u=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let C=J.add3L(F,V,j);n=J.add3H(C,P,O,Y),i=C|0}({h:n,l:i}=J.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=J.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=J.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l:u}=J.add(this.Dh|0,this.Dl|0,f|0,u|0),{h:l,l:d}=J.add(this.Eh|0,this.El|0,l|0,d|0),{h:g,l:h}=J.add(this.Fh|0,this.Fl|0,g|0,h|0),{h:p,l:y}=J.add(this.Gh|0,this.Gl|0,p|0,y|0),{h:x,l:w}=J.add(this.Hh|0,this.Hl|0,x|0,w|0),this.set(n,i,o,s,a,c,f,u,l,d,g,h,p,y,x,w)}roundClean(){or.fill(0),sr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var ys=ki(()=>new ps);var Ki={};ut(Ki,{bitGet:()=>A1,bitLen:()=>C1,bitMask:()=>On,bitSet:()=>T1,bytesToHex:()=>qe,bytesToNumberBE:()=>ze,bytesToNumberLE:()=>ar,concatBytes:()=>He,createHmacDrbg:()=>ms,ensureBytes:()=>Bt,equalBytes:()=>S1,hexToBytes:()=>Sr,hexToNumber:()=>xs,isBytes:()=>pe,numberToBytesBE:()=>cr,numberToBytesLE:()=>Br,numberToHexUnpadded:()=>Yc,numberToVarBytesBE:()=>E1,utf8ToBytes:()=>B1,validateObject:()=>Re});var $c=BigInt(0),Oi=BigInt(1),v1=BigInt(2);function pe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var w1=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function qe(t){if(!pe(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=w1[t[r]];return e}function Yc(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function xs(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var Ve={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Hc(t){if(t>=Ve._0&&t<=Ve._9)return t-Ve._0;if(t>=Ve._A&&t<=Ve._F)return t-(Ve._A-10);if(t>=Ve._a&&t<=Ve._f)return t-(Ve._a-10)}function Sr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=Hc(t.charCodeAt(o)),a=Hc(t.charCodeAt(o+1));if(s===void 0||a===void 0){let c=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[i]=s*16+a}return n}function ze(t){return xs(qe(t))}function ar(t){if(!pe(t))throw new Error("Uint8Array expected");return xs(qe(Uint8Array.from(t).reverse()))}function cr(t,e){return Sr(t.toString(16).padStart(e*2,"0"))}function Br(t,e){return cr(t,e).reverse()}function E1(t){return Sr(Yc(t))}function Bt(t,e,r){let n;if(typeof e=="string")try{n=Sr(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(pe(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function He(...t){let e=0;for(let i=0;i<t.length;i++){let o=t[i];if(!pe(o))throw new Error("Uint8Array expected");e+=o.length}let r=new Uint8Array(e),n=0;for(let i=0;i<t.length;i++){let o=t[i];r.set(o,n),n+=o.length}return r}function S1(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function B1(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function C1(t){let e;for(e=0;t>$c;t>>=Oi,e+=1);return e}function A1(t,e){return t>>BigInt(e)&Oi}var T1=(t,e,r)=>t|(r?Oi:$c)<<BigInt(e),On=t=>(v1<<BigInt(t-1))-Oi,gs=t=>new Uint8Array(t),Gc=t=>Uint8Array.from(t);function ms(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=gs(t),i=gs(t),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...l)=>r(i,n,...l),c=(l=gs())=>{i=a(Gc([0]),l),n=a(),l.length!==0&&(i=a(Gc([1]),l),n=a())},f=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,d=[];for(;l<e;){n=a();let g=n.slice();d.push(g),l+=n.length}return He(...d)};return(l,d)=>{s(),c(l);let g;for(;!(g=d(f()));)c();return s(),g}}var I1={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||pe(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Re(t,e,r={}){let n=(i,o,s)=>{let a=I1[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let c=t[i];if(!(s&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(let[i,o]of Object.entries(e))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return t}var _t=BigInt(0),bt=BigInt(1),Cr=BigInt(2),_1=BigInt(3),bs=BigInt(4),Wc=BigInt(5),Zc=BigInt(8),R1=BigInt(9),N1=BigInt(16);function pt(t,e){let r=t%e;return r>=_t?r:e+r}function D1(t,e,r){if(r<=_t||e<_t)throw new Error("Expected power/modulo > 0");if(r===bt)return _t;let n=bt;for(;e>_t;)e&bt&&(n=n*t%r),t=t*t%r,e>>=bt;return n}function vt(t,e,r){let n=t;for(;e-- >_t;)n*=n,n%=r;return n}function Fi(t,e){if(t===_t||e<=_t)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=pt(t,e),n=e,i=_t,o=bt,s=bt,a=_t;for(;r!==_t;){let f=n/r,u=n%r,l=i-s*f,d=o-a*f;n=r,r=u,i=s,o=a,s=l,a=d}if(n!==bt)throw new Error("invert: does not exist");return pt(i,e)}function L1(t){let e=(t-bt)/Cr,r,n,i;for(r=t-bt,n=0;r%Cr===_t;r/=Cr,n++);for(i=Cr;i<t&&D1(i,e,t)!==t-bt;i++);if(n===1){let s=(t+bt)/bs;return function(c,f){let u=c.pow(f,s);if(!c.eql(c.sqr(u),f))throw new Error("Cannot find square root");return u}}let o=(r+bt)/Cr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=n,u=a.pow(a.mul(a.ONE,i),r),l=a.pow(c,o),d=a.pow(c,r);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let g=1;for(let p=a.sqr(d);g<f&&!a.eql(p,a.ONE);g++)p=a.sqr(p);let h=a.pow(u,bt<<BigInt(f-g-1));u=a.sqr(h),l=a.mul(l,h),d=a.mul(d,u),f=g}return l}}function U1(t){if(t%bs===_1){let e=(t+bt)/bs;return function(n,i){let o=n.pow(i,e);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%Zc===Wc){let e=(t-Wc)/Zc;return function(n,i){let o=n.mul(i,Cr),s=n.pow(o,e),a=n.mul(i,s),c=n.mul(n.mul(a,Cr),s),f=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(f),i))throw new Error("Cannot find square root");return f}}return t%N1,L1(t)}var Qc=(t,e)=>(pt(t,e)&bt)===bt,k1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function vs(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=k1.reduce((n,i)=>(n[i]="function",n),e);return Re(t,r)}function P1(t,e,r){if(r<_t)throw new Error("Expected power > 0");if(r===_t)return t.ONE;if(r===bt)return e;let n=t.ONE,i=e;for(;r>_t;)r&bt&&(n=t.mul(n,i)),i=t.sqr(i),r>>=bt;return n}function O1(t,e){let r=new Array(e.length),n=e.reduce((o,s,a)=>t.is0(s)?o:(r[a]=o,t.mul(o,s)),t.ONE),i=t.inv(n);return e.reduceRight((o,s,a)=>t.is0(s)?o:(r[a]=t.mul(o,r[a]),t.mul(o,s)),i),r}function ws(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Mi(t,e,r=!1,n={}){if(t<=_t)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:o}=ws(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=U1(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:On(i),ZERO:_t,ONE:bt,create:c=>pt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return _t<=c&&c<t},is0:c=>c===_t,isOdd:c=>(c&bt)===bt,neg:c=>pt(-c,t),eql:(c,f)=>c===f,sqr:c=>pt(c*c,t),add:(c,f)=>pt(c+f,t),sub:(c,f)=>pt(c-f,t),mul:(c,f)=>pt(c*f,t),pow:(c,f)=>P1(a,c,f),div:(c,f)=>pt(c*Fi(f,t),t),sqrN:c=>c*c,addN:(c,f)=>c+f,subN:(c,f)=>c-f,mulN:(c,f)=>c*f,inv:c=>Fi(c,t),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>O1(a,c),cmov:(c,f,u)=>u?f:c,toBytes:c=>r?Br(c,o):cr(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?ar(c):ze(c)}});return Object.freeze(a)}function Xc(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function Jc(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function Es(t){let e=Jc(t);return e+Math.ceil(e/2)}function jc(t,e,r=!1){let n=t.length,i=Jc(e),o=Es(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?ze(t):ar(t),a=pt(s,e-bt)+bt;return r?Br(a,i):cr(a,i)}var F1=BigInt(0),Ss=BigInt(1);function Vi(t,e){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=t.ZERO,a=i;for(;o>F1;)o&Ss&&(s=s.add(a)),a=a.double(),o>>=Ss;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),c=[],f=i,u=f;for(let l=0;l<s;l++){u=f,c.push(u);for(let d=1;d<a;d++)u=u.add(f),c.push(u);f=u.double()}return c},wNAF(i,o,s){let{windows:a,windowSize:c}=n(i),f=t.ZERO,u=t.BASE,l=BigInt(2**i-1),d=2**i,g=BigInt(i);for(let h=0;h<a;h++){let p=h*c,y=Number(s&l);s>>=g,y>c&&(y-=d,s+=Ss);let x=p,w=p+Math.abs(y)-1,b=h%2!==0,_=y<0;y===0?u=u.add(r(b,o[x])):f=f.add(r(_,o[w]))}return{p:f,f:u}},wNAFCached(i,o,s,a){let c=i._WINDOW_SIZE||1,f=o.get(i);return f||(f=this.precomputeWindow(i,c),c!==1&&o.set(i,a(f))),this.wNAF(c,f,s)}}}function Kn(t){return vs(t.Fp),Re(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ws(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}var ye=BigInt(0),Zt=BigInt(1),qi=BigInt(2),M1=BigInt(8),V1={zip215:!0};function q1(t){let e=Kn(t);return Re(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function zi(t){let e=q1(t),{Fp:r,n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:c}=e,f=qi<<BigInt(a*8)-Zt,u=r.create,l=e.uvRatio||((k,I)=>{try{return{isValid:!0,value:r.sqrt(k*r.inv(I))}}catch{return{isValid:!1,value:ye}}}),d=e.adjustScalarBytes||(k=>k),g=e.domain||((k,I,z)=>{if(I.length||z)throw new Error("Contexts/pre-hash are not supported");return k}),h=k=>typeof k=="bigint"&&ye<k,p=(k,I)=>h(k)&&h(I)&&k<I,y=k=>k===ye||p(k,f);function x(k,I){if(p(k,I))return k;throw new Error(`Expected valid scalar < ${I}, got ${typeof k} ${k}`)}function w(k){return k===ye?k:x(k,n)}let b=new Map;function _(k){if(!(k instanceof E))throw new Error("ExtendedPoint expected")}class E{constructor(I,z,G,W){if(this.ex=I,this.ey=z,this.ez=G,this.et=W,!y(I))throw new Error("x required");if(!y(z))throw new Error("y required");if(!y(G))throw new Error("z required");if(!y(W))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof E)throw new Error("extended point not allowed");let{x:z,y:G}=I||{};if(!y(z)||!y(G))throw new Error("invalid affine point");return new E(z,G,Zt,u(z*G))}static normalizeZ(I){let z=r.invertBatch(I.map(G=>G.ez));return I.map((G,W)=>G.toAffine(z[W])).map(E.fromAffine)}_setWindowSize(I){this._WINDOW_SIZE=I,b.delete(this)}assertValidity(){let{a:I,d:z}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:G,ey:W,ez:tt,et:rt}=this,ht=u(G*G),nt=u(W*W),at=u(tt*tt),At=u(at*at),Et=u(ht*I),kt=u(at*u(Et+nt)),Pt=u(At+u(z*u(ht*nt)));if(kt!==Pt)throw new Error("bad point: equation left != right (1)");let It=u(G*W),Mt=u(tt*rt);if(It!==Mt)throw new Error("bad point: equation left != right (2)")}equals(I){_(I);let{ex:z,ey:G,ez:W}=this,{ex:tt,ey:rt,ez:ht}=I,nt=u(z*ht),at=u(tt*W),At=u(G*ht),Et=u(rt*W);return nt===at&&At===Et}is0(){return this.equals(E.ZERO)}negate(){return new E(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){let{a:I}=e,{ex:z,ey:G,ez:W}=this,tt=u(z*z),rt=u(G*G),ht=u(qi*u(W*W)),nt=u(I*tt),at=z+G,At=u(u(at*at)-tt-rt),Et=nt+rt,kt=Et-ht,Pt=nt-rt,It=u(At*kt),Mt=u(Et*Pt),ke=u(At*Pt),yr=u(kt*Et);return new E(It,Mt,yr,ke)}add(I){_(I);let{a:z,d:G}=e,{ex:W,ey:tt,ez:rt,et:ht}=this,{ex:nt,ey:at,ez:At,et:Et}=I;if(z===BigInt(-1)){let Za=u((tt-W)*(at+nt)),Qa=u((tt+W)*(at-nt)),vo=u(Qa-Za);if(vo===ye)return this.double();let Xa=u(rt*qi*Et),Ja=u(ht*qi*At),ja=Ja+Xa,t0=Qa+Za,e0=Ja-Xa,uh=u(ja*vo),lh=u(t0*e0),hh=u(ja*e0),dh=u(vo*t0);return new E(uh,lh,dh,hh)}let kt=u(W*nt),Pt=u(tt*at),It=u(ht*G*Et),Mt=u(rt*At),ke=u((W+tt)*(nt+at)-kt-Pt),yr=Mt-It,An=Mt+It,Wa=u(Pt-z*kt),sh=u(ke*yr),ah=u(An*Wa),ch=u(ke*Wa),fh=u(yr*An);return new E(sh,ah,fh,ch)}subtract(I){return this.add(I.negate())}wNAF(I){return B.wNAFCached(this,b,I,E.normalizeZ)}multiply(I){let{p:z,f:G}=this.wNAF(x(I,n));return E.normalizeZ([z,G])[0]}multiplyUnsafe(I){let z=w(I);return z===ye?N:this.equals(N)||z===Zt?this:this.equals(S)?this.wNAF(z).p:B.unsafeLadder(this,z)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return B.unsafeLadder(this,n).is0()}toAffine(I){let{ex:z,ey:G,ez:W}=this,tt=this.is0();I==null&&(I=tt?M1:r.inv(W));let rt=u(z*I),ht=u(G*I),nt=u(W*I);if(tt)return{x:ye,y:Zt};if(nt!==Zt)throw new Error("invZ was invalid");return{x:rt,y:ht}}clearCofactor(){let{h:I}=e;return I===Zt?this:this.multiplyUnsafe(I)}static fromHex(I,z=!1){let{d:G,a:W}=e,tt=r.BYTES;I=Bt("pointHex",I,tt);let rt=I.slice(),ht=I[tt-1];rt[tt-1]=ht&-129;let nt=ar(rt);nt===ye||(z?x(nt,f):x(nt,r.ORDER));let at=u(nt*nt),At=u(at-Zt),Et=u(G*at-W),{isValid:kt,value:Pt}=l(At,Et);if(!kt)throw new Error("Point.fromHex: invalid y coordinate");let It=(Pt&Zt)===Zt,Mt=(ht&128)!==0;if(!z&&Pt===ye&&Mt)throw new Error("Point.fromHex: x=0 and x_0=1");return Mt!==It&&(Pt=u(-Pt)),E.fromAffine({x:Pt,y:nt})}static fromPrivateKey(I){return O(I).point}toRawBytes(){let{x:I,y:z}=this.toAffine(),G=Br(z,r.BYTES);return G[G.length-1]|=I&Zt?128:0,G}toHex(){return qe(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,Zt,u(e.Gx*e.Gy)),E.ZERO=new E(ye,Zt,Zt,ye);let{BASE:S,ZERO:N}=E,B=Vi(E,a*8);function P(k){return pt(k,n)}function F(k){return P(ar(k))}function O(k){let I=a;k=Bt("private key",k,I);let z=Bt("hashed private key",o(k),2*I),G=d(z.slice(0,I)),W=z.slice(I,2*I),tt=F(G),rt=S.multiply(tt),ht=rt.toRawBytes();return{head:G,prefix:W,scalar:tt,point:rt,pointBytes:ht}}function V(k){return O(k).pointBytes}function Y(k=new Uint8Array,...I){let z=He(...I);return F(o(g(z,Bt("context",k),!!i)))}function j(k,I,z={}){k=Bt("message",k),i&&(k=i(k));let{prefix:G,scalar:W,pointBytes:tt}=O(I),rt=Y(z.context,G,k),ht=S.multiply(rt).toRawBytes(),nt=Y(z.context,ht,tt,k),at=P(rt+nt*W);w(at);let At=He(ht,Br(at,r.BYTES));return Bt("result",At,a*2)}let C=V1;function D(k,I,z,G=C){let{context:W,zip215:tt}=G,rt=r.BYTES;k=Bt("signature",k,2*rt),I=Bt("message",I),i&&(I=i(I));let ht=ar(k.slice(rt,2*rt)),nt,at,At;try{nt=E.fromHex(z,tt),at=E.fromHex(k.slice(0,rt),tt),At=S.multiplyUnsafe(ht)}catch{return!1}if(!tt&&nt.isSmallOrder())return!1;let Et=Y(W,at.toRawBytes(),nt.toRawBytes(),I);return at.add(nt.multiplyUnsafe(Et)).subtract(At).clearCofactor().equals(E.ZERO)}return S._setWindowSize(8),{CURVE:e,getPublicKey:V,sign:j,verify:D,ExtendedPoint:E,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>s(r.BYTES),precompute(k=8,I=E.BASE){return I._setWindowSize(k),I.multiply(BigInt(3)),I}}}}var Cs=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),tf=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Gb=BigInt(0),z1=BigInt(1),Bs=BigInt(2),H1=BigInt(5),ef=BigInt(10),G1=BigInt(20),$1=BigInt(40),rf=BigInt(80);function Y1(t){let e=Cs,n=t*t%e*t%e,i=vt(n,Bs,e)*n%e,o=vt(i,z1,e)*t%e,s=vt(o,H1,e)*o%e,a=vt(s,ef,e)*s%e,c=vt(a,G1,e)*a%e,f=vt(c,$1,e)*c%e,u=vt(f,rf,e)*f%e,l=vt(u,rf,e)*f%e,d=vt(l,ef,e)*s%e;return{pow_p_5_8:vt(d,Bs,e)*t%e,b2:n}}function W1(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Z1(t,e){let r=Cs,n=pt(e*e*e,r),i=pt(n*n*e,r),o=Y1(t*i).pow_p_5_8,s=pt(t*n*o,r),a=pt(e*s*s,r),c=s,f=pt(s*tf,r),u=a===t,l=a===pt(-t,r),d=a===pt(-t*tf,r);return u&&(s=c),(l||d)&&(s=f),Qc(s,r)&&(s=pt(-s,r)),{isValid:u||l,value:s}}var Ge=Mi(Cs,void 0,!0),As={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ge,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ys,randomBytes:Jr,adjustScalarBytes:W1,uvRatio:Z1},tn=zi(As);function nf(t,e,r){if(e.length>255)throw new Error("Context is too big");return Ui(hs("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var $b=zi({...As,domain:nf}),Yb=zi({...As,domain:nf,prehash:ys});var Q1=(Ge.ORDER+BigInt(3))/BigInt(8),Wb=Ge.pow(Bs,Q1),Zb=Ge.sqrt(Ge.neg(Ge.ONE)),Qb=(Ge.ORDER-BigInt(5))/BigInt(8),Xb=BigInt(486662);var Jb=Xc(Ge,Ge.neg(BigInt(486664)));var jb=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),tv=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ev=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),rv=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var nv=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var en=32,$e=64,Hi=32;async function of(){let t=tn.utils.randomPrivateKey(),e=tn.getPublicKey(t);return{privateKey:ff(t,e),publicKey:e}}async function sf(t){if(t.length!==Hi)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=tn.getPublicKey(e);return{privateKey:ff(e,r),publicKey:r}}async function af(t,e){let r=t.subarray(0,Hi);return tn.sign(e,r)}async function cf(t,e,r){return tn.verify(e,r,t)}function ff(t,e){let r=new Uint8Array($e);for(let n=0;n<Hi;n++)r[n]=t[n],r[Hi+n]=e[n];return r}function Ar(t,e){e==null&&(e=t.reduce((i,o)=>i+o.length,0));let r=Ri(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return Hr(r)}var $t={get(t=globalThis){let e=t.crypto;if(e==null||e.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};var Ts={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function Is(t){let e=t?.algorithm??"AES-GCM",r=t?.keyLength??16,n=t?.nonceLength??12,i=t?.digest??"SHA-256",o=t?.saltLength??16,s=t?.iterations??32767,a=$t.get();r*=8;async function c(l,d){let g=a.getRandomValues(new Uint8Array(o)),h=a.getRandomValues(new Uint8Array(n)),p={name:e,iv:h};typeof d=="string"&&(d=Wt(d));let y;if(d.length===0){y=await a.subtle.importKey("jwk",Ts,{name:"AES-GCM"},!0,["encrypt"]);try{let w={name:"PBKDF2",salt:g,iterations:s,hash:{name:i}},b=await a.subtle.importKey("raw",d,{name:"PBKDF2"},!1,["deriveKey"]);y=await a.subtle.deriveKey(w,b,{name:e,length:r},!0,["encrypt"])}catch{y=await a.subtle.importKey("jwk",Ts,{name:"AES-GCM"},!0,["encrypt"])}}else{let w={name:"PBKDF2",salt:g,iterations:s,hash:{name:i}},b=await a.subtle.importKey("raw",d,{name:"PBKDF2"},!1,["deriveKey"]);y=await a.subtle.deriveKey(w,b,{name:e,length:r},!0,["encrypt"])}let x=await a.subtle.encrypt(p,y,l);return Ar([g,p.iv,new Uint8Array(x)])}async function f(l,d){let g=l.subarray(0,o),h=l.subarray(o,o+n),p=l.subarray(o+n),y={name:e,iv:h};typeof d=="string"&&(d=Wt(d));let x;if(d.length===0)try{let b={name:"PBKDF2",salt:g,iterations:s,hash:{name:i}},_=await a.subtle.importKey("raw",d,{name:"PBKDF2"},!1,["deriveKey"]);x=await a.subtle.deriveKey(b,_,{name:e,length:r},!0,["decrypt"])}catch{x=await a.subtle.importKey("jwk",Ts,{name:"AES-GCM"},!0,["decrypt"])}else{let b={name:"PBKDF2",salt:g,iterations:s,hash:{name:i}},_=await a.subtle.importKey("raw",d,{name:"PBKDF2"},!1,["deriveKey"]);x=await a.subtle.deriveKey(b,_,{name:e,length:r},!0,["decrypt"])}let w=await a.subtle.decrypt(y,x,p);return new Uint8Array(w)}return{encrypt:c,decrypt:f}}async function rn(t,e){let n=await Is().encrypt(t,e);return $r.encode(n)}var _s=new Float32Array([-0]),fr=new Uint8Array(_s.buffer);function lf(t,e,r){_s[0]=t,e[r]=fr[0],e[r+1]=fr[1],e[r+2]=fr[2],e[r+3]=fr[3]}function hf(t,e){return fr[0]=t[e],fr[1]=t[e+1],fr[2]=t[e+2],fr[3]=t[e+3],_s[0]}var Rs=new Float64Array([-0]),Vt=new Uint8Array(Rs.buffer);function df(t,e,r){Rs[0]=t,e[r]=Vt[0],e[r+1]=Vt[1],e[r+2]=Vt[2],e[r+3]=Vt[3],e[r+4]=Vt[4],e[r+5]=Vt[5],e[r+6]=Vt[6],e[r+7]=Vt[7]}function pf(t,e){return Vt[0]=t[e],Vt[1]=t[e+1],Vt[2]=t[e+2],Vt[3]=t[e+3],Vt[4]=t[e+4],Vt[5]=t[e+5],Vt[6]=t[e+6],Vt[7]=t[e+7],Rs[0]}var J1=BigInt(Number.MAX_SAFE_INTEGER),j1=BigInt(Number.MIN_SAFE_INTEGER),Yt=class t{lo;hi;constructor(e,r){this.lo=e|0,this.hi=r|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){let e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){let e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){let e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return Tr;if(e<J1&&e>j1)return this.fromNumber(Number(e));let r=e<0n;r&&(e=-e);let n=e>>32n,i=e-(n<<32n);return r&&(n=~n|0n,i=~i|0n,++i>yf&&(i=0n,++n>yf&&(n=0n))),new t(Number(i),Number(n))}static fromNumber(e){if(e===0)return Tr;let r=e<0;r&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new t(n,i)}static from(e){return typeof e=="number"?t.fromNumber(e):typeof e=="bigint"?t.fromBigInt(e):typeof e=="string"?t.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new t(e.low>>>0,e.high>>>0):Tr}},Tr=new Yt(0,0);Tr.toBigInt=function(){return 0n};Tr.zzEncode=Tr.zzDecode=function(){return this};Tr.length=function(){return 1};var yf=4294967296n;function gf(t){let e=0,r=0;for(let n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function xf(t,e,r){if(r-e<1)return"";let i,o=[],s=0,a;for(;e<r;)a=t[e++],a<128?o[s++]=a:a>191&&a<224?o[s++]=(a&31)<<6|t[e++]&63:a>239&&a<365?(a=((a&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,o[s++]=55296+(a>>10),o[s++]=56320+(a&1023)):o[s++]=(a&15)<<12|(t[e++]&63)<<6|t[e++]&63,s>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i!=null?(s>0&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))}function Ns(t,e,r){let n=r,i,o;for(let s=0;s<t.length;++s)i=t.charCodeAt(s),i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&((o=t.charCodeAt(s+1))&64512)===56320?(i=65536+((i&1023)<<10)+(o&1023),++s,e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128);return r-n}function ge(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function Gi(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}var Ds=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,ge(this,10);return e}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw ge(this,4);return Gi(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw ge(this,4);return Gi(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw ge(this,4);let e=hf(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw ge(this,4);let e=pf(this.buf,this.pos);return this.pos+=8,e}bytes(){let e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw ge(this,e);return this.pos+=e,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){let e=this.bytes();return xf(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw ge(this,e);this.pos+=e}else do if(this.pos>=this.len)throw ge(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){let e=new Yt(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw ge(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw ge(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw ge(this,8);let e=Gi(this.buf,this.pos+=4),r=Gi(this.buf,this.pos+=4);return new Yt(e,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){return this.readLongVarint().toNumber(!0)}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function Ls(t){return new Ds(t instanceof Uint8Array?t:t.subarray())}function nn(t,e){let r=Ls(t);return e.decode(r)}function $i(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Ir(t=0){return globalThis.Buffer?.allocUnsafe!=null?$i(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function vf(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var bf=vf("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Us=vf("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=Ir(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),tg={utf8:bf,"utf-8":bf,hex:Me.base16,latin1:Us,ascii:Us,binary:Us,...Me},wf=tg;function Ef(t,e="utf8"){let r=wf[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?$i(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function ks(t){let e=t??8192,r=e>>>1,n,i=e;return function(s){if(s<1||s>r)return Ir(s);i+s>e&&(n=Ir(e),i=0);let a=n.subarray(i,i+=s);return i&7&&(i=(i|7)+1),a}}var _r=class{fn;len;next;val;constructor(e,r,n){this.fn=e,this.len=r,this.next=void 0,this.val=n}};function Ps(){}var Ks=class{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}},eg=ks();function rg(t){return globalThis.Buffer!=null?Ir(t):eg(t)}var Vn=class{len;head;tail;states;constructor(){this.len=0,this.head=new _r(Ps,0,0),this.tail=this.head,this.states=null}_push(e,r,n){return this.tail=this.tail.next=new _r(e,r,n),this.len+=r,this}uint32(e){return this.len+=(this.tail=this.tail.next=new Fs((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(Fn,10,Yt.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){let r=Yt.fromBigInt(e);return this._push(Fn,r.length(),r)}uint64Number(e){let r=Yt.fromNumber(e);return this._push(Fn,r.length(),r)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){let r=Yt.fromBigInt(e).zzEncode();return this._push(Fn,r.length(),r)}sint64Number(e){let r=Yt.fromNumber(e).zzEncode();return this._push(Fn,r.length(),r)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(Os,1,e?1:0)}fixed32(e){return this._push(Mn,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){let r=Yt.fromBigInt(e);return this._push(Mn,4,r.lo)._push(Mn,4,r.hi)}fixed64Number(e){let r=Yt.fromNumber(e);return this._push(Mn,4,r.lo)._push(Mn,4,r.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(lf,4,e)}double(e){return this._push(df,8,e)}bytes(e){let r=e.length>>>0;return r===0?this._push(Os,1,0):this.uint32(r)._push(ig,r,e)}string(e){let r=gf(e);return r!==0?this.uint32(r)._push(Ns,r,e):this._push(Os,1,0)}fork(){return this.states=new Ks(this),this.head=this.tail=new _r(Ps,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new _r(Ps,0,0),this.len=0),this}ldelim(){let e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=r,this.len+=n),this}finish(){let e=this.head.next,r=rg(this.len),n=0;for(;e!=null;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r}};function Os(t,e,r){e[r]=t&255}function ng(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}var Fs=class extends _r{next;constructor(e,r){super(ng,e,r),this.next=void 0}};function Fn(t,e,r){for(;t.hi!==0;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}function Mn(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function ig(t,e,r){e.set(t,r)}globalThis.Buffer!=null&&(Vn.prototype.bytes=function(t){let e=t.length>>>0;return this.uint32(e),e>0&&this._push(og,e,t),this},Vn.prototype.string=function(t){let e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(sg,e,t),this});function og(t,e,r){e.set(t,r)}function sg(t,e,r){t.length<40?Ns(t,e,r):e.utf8Write!=null?e.utf8Write(t,r):e.set(Ef(t),r)}function Ms(){return new Vn}function on(t,e){let r=Ms();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var sn;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(sn||(sn={}));function Yi(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function qn(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}let r=function(o,s){let a=e(o);s.int32(a)},n=function(o){let s=o.int32();return e(s)};return Yi("enum",sn.VARINT,r,n)}function an(t,e){return Yi("message",sn.LENGTH_DELIMITED,t,e)}var wt;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"})(wt||(wt={}));var Vs;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"})(Vs||(Vs={}));(function(t){t.codec=()=>qn(Vs)})(wt||(wt={}));var Ne;(function(t){let e;t.codec=()=>(e==null&&(e=an((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),wt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.Type=wt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>on(r,t.codec()),t.decode=r=>nn(r,t.codec())})(Ne||(Ne={}));var De;(function(t){let e;t.codec=()=>(e==null&&(e=an((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),wt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.Type=wt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>on(r,t.codec()),t.decode=r=>nn(r,t.codec())})(De||(De={}));var zn=class{_key;constructor(e){this._key=cn(e,en)}async verify(e,r){return cf(this._key,r,e)}marshal(){return this._key}get bytes(){return Ne.encode({Type:wt.Ed25519,Data:this.marshal()}).subarray()}equals(e){return _e(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Kt.digest(this.bytes);return e}},Rr=class{_key;_publicKey;constructor(e,r){this._key=cn(e,$e),this._publicKey=cn(r,en)}async sign(e){return af(this._key,e)}get public(){return new zn(this._publicKey)}marshal(){return this._key}get bytes(){return De.encode({Type:wt.Ed25519,Data:this.marshal()}).subarray()}equals(e){return _e(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Kt.digest(this.bytes);return e}async id(){let e=Ie.digest(this.public.bytes);return Ot.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return rn(this.bytes,e);throw new ot(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function ag(t){if(t.length>$e){t=cn(t,$e+en);let n=t.subarray(0,$e),i=t.subarray($e,t.length);return new Rr(n,i)}t=cn(t,$e);let e=t.subarray(0,$e),r=t.subarray(en);return new Rr(e,r)}function cg(t){return t=cn(t,en),new zn(t)}async function fg(){let{privateKey:t,publicKey:e}=await of();return new Rr(t,e)}async function Sf(t){let{privateKey:e,publicKey:r}=await sf(t);return new Rr(e,r)}function cn(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new ot(`Key must be a Uint8Array of length ${e}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}function Qt(t,e="utf8"){let r=Ni[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var cw=Rt(Tt(),1),fw=Rt(Bi(),1),Bf=Rt(dt(),1);function xe(t,e){let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.subarray(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=Ar([new Uint8Array(e-r.length),r])}return Qt(r,"base64url")}function Xt(t){let e=Cf(t);return new Bf.default.jsbn.BigInteger(Qt(e,"base16"),16)}function Cf(t,e){let r=Wt(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=Ar([new Uint8Array(e-r.length),r])}return r}var ug={"P-256":256,"P-384":384,"P-521":521},lg=Object.keys(ug),vw=lg.join(" / ");var Ys={};ut(Ys,{MAX_KEY_SIZE:()=>Yn,RsaPrivateKey:()=>fn,RsaPublicKey:()=>$n,fromJwk:()=>Eg,generateKeyPair:()=>Sg,unmarshalRsaPrivateKey:()=>vg,unmarshalRsaPublicKey:()=>wg});var Gn=Rt(dt(),1);var i8=Rt(Rf(),1);function Zi(t){if(isNaN(t)||t<=0)throw new ot("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return Jr(t)}var Mw=Rt(Ti(),1),Gs=Rt(dt(),1);function Nf(t,e){return e.map(r=>Xt(t[r]))}function Df(t){return Gs.default.pki.setRsaPrivateKey(...Nf(t,["n","e","d","p","q","dp","dq","qi"]))}function Lf(t){return Gs.default.pki.setRsaPublicKey(...Nf(t,["n","e"]))}var Dr={};ut(Dr,{jwkToPkcs1:()=>yg,jwkToPkix:()=>xg,pkcs1ToJwk:()=>pg,pkixToJwk:()=>gg});var zw=Rt(Rn(),1),Hw=Rt(Ti(),1);var Ye=Rt(dt(),1);function pg(t){let e=Ye.default.asn1.fromDer(Qt(t,"ascii")),r=Ye.default.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:xe(r.n),e:xe(r.e),d:xe(r.d),p:xe(r.p),q:xe(r.q),dp:xe(r.dP),dq:xe(r.dQ),qi:xe(r.qInv),alg:"RS256"}}function yg(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw new ot("JWK was missing components","ERR_INVALID_PARAMETERS");let e=Ye.default.pki.privateKeyToAsn1({n:Xt(t.n),e:Xt(t.e),d:Xt(t.d),p:Xt(t.p),q:Xt(t.q),dP:Xt(t.dp),dQ:Xt(t.dq),qInv:Xt(t.qi)});return Wt(Ye.default.asn1.toDer(e).getBytes(),"ascii")}function gg(t){let e=Ye.default.asn1.fromDer(Qt(t,"ascii")),r=Ye.default.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:xe(r.n),e:xe(r.e)}}function xg(t){if(t.n==null||t.e==null)throw new ot("JWK was missing components","ERR_INVALID_PARAMETERS");let e=Ye.default.pki.publicKeyToAsn1({n:Xt(t.n),e:Xt(t.e)});return Wt(Ye.default.asn1.toDer(e).getBytes(),"ascii")}async function Uf(t){let e=await $t.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Of(e);return{privateKey:r[0],publicKey:r[1]}}async function $s(t){let r=[await $t.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await mg(t)],n=await Of({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function kf(t,e){let r=await $t.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await $t.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(n,0,n.byteLength)}async function Pf(t,e,r){let n=await $t.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return $t.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r)}async function Of(t){if(t.privateKey==null||t.publicKey==null)throw new ot("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([$t.get().subtle.exportKey("jwk",t.privateKey),$t.get().subtle.exportKey("jwk",t.publicKey)])}async function mg(t){return $t.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Kf(t,e,r,n){let i=e?Lf(t):Df(t),o=Qt(Uint8Array.from(r),"ascii"),s=n(o,i);return Wt(s,"ascii")}function Ff(t,e){return Kf(t,!0,e,(r,n)=>n.encrypt(r))}function Mf(t,e){return Kf(t,!1,e,(r,n)=>n.decrypt(r))}function Qi(t){if(t.kty!=="RSA")throw new ot("invalid key type","ERR_INVALID_KEY_TYPE");if(t.n==null)throw new ot("invalid key modulus","ERR_INVALID_KEY_MODULUS");return Wt(t.n,"base64url").length*8}var Yn=8192,$n=class{_key;constructor(e){this._key=e}async verify(e,r){return Pf(this._key,r,e)}marshal(){return Dr.jwkToPkix(this._key)}get bytes(){return Ne.encode({Type:wt.RSA,Data:this.marshal()}).subarray()}encrypt(e){return Ff(this._key,e)}equals(e){return _e(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Kt.digest(this.bytes);return e}},fn=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return Zi(16)}async sign(e){return kf(this._key,e)}get public(){if(this._publicKey==null)throw new ot("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new $n(this._publicKey)}decrypt(e){return Mf(this._key,e)}marshal(){return Dr.jwkToPkcs1(this._key)}get bytes(){return De.encode({Type:wt.RSA,Data:this.marshal()}).subarray()}equals(e){return _e(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Kt.digest(this.bytes);return e}async id(){let e=await this.public.hash();return Qt(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let n=new Gn.default.util.ByteBuffer(this.marshal()),i=Gn.default.asn1.fromDer(n),o=Gn.default.pki.privateKeyFromAsn1(i),s={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Gn.default.pki.encryptRsaPrivateKey(o,e,s)}else{if(r==="libp2p-key")return rn(this.bytes,e);throw new ot(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}};async function vg(t){let e=Dr.pkcs1ToJwk(t);if(Qi(e)>Yn)throw new ot("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let r=await $s(e);return new fn(r.privateKey,r.publicKey)}function wg(t){let e=Dr.pkixToJwk(t);if(Qi(e)>Yn)throw new ot("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new $n(e)}async function Eg(t){if(Qi(t)>Yn)throw new ot("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let e=await $s(t);return new fn(e.privateKey,e.publicKey)}async function Sg(t){if(t>Yn)throw new ot("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let e=await Uf(t);return new fn(e.privateKey,e.publicKey)}var js={};ut(js,{Secp256k1PrivateKey:()=>Zn,Secp256k1PublicKey:()=>Wn,generateKeyPair:()=>Kg,unmarshalSecp256k1PrivateKey:()=>Pg,unmarshalSecp256k1PublicKey:()=>Og});var Bg=(t,e,r)=>t&e^~t&r,Cg=(t,e,r)=>t&e^t&r^e&r,Ag=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ur=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lr=new Uint32Array(64),Ws=class extends jr{constructor(){super(64,32,8,!1),this.A=ur[0]|0,this.B=ur[1]|0,this.C=ur[2]|0,this.D=ur[3]|0,this.E=ur[4]|0,this.F=ur[5]|0,this.G=ur[6]|0,this.H=ur[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[e,r,n,i,o,s,a,c]}set(e,r,n,i,o,s,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,r){for(let l=0;l<16;l++,r+=4)lr[l]=e.getUint32(r,!1);for(let l=16;l<64;l++){let d=lr[l-15],g=lr[l-2],h=de(d,7)^de(d,18)^d>>>3,p=de(g,17)^de(g,19)^g>>>10;lr[l]=p+lr[l-7]+h+lr[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:f,H:u}=this;for(let l=0;l<64;l++){let d=de(a,6)^de(a,11)^de(a,25),g=u+d+Bg(a,c,f)+Ag[l]+lr[l]|0,p=(de(n,2)^de(n,13)^de(n,22))+Cg(n,i,o)|0;u=f,f=c,c=a,a=s+g|0,s=o,o=i,i=n,n=g+p|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,i,o,s,a,c,f,u)}roundClean(){lr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Vf=ki(()=>new Ws);function Tg(t){let e=Kn(t);Re(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:Ig,hexToBytes:_g}=Ki,Lr={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=Lr;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Ig(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=Lr,r=typeof t=="string"?_g(t):t;if(!pe(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:o}=Lr._parseInt(r.subarray(2)),{d:s,l:a}=Lr._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){let e=f=>Number.parseInt(f[0],16)&8?"00"+f:f,r=f=>{let u=f.toString(16);return u.length&1?`0${u}`:u},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},We=BigInt(0),ae=BigInt(1),d8=BigInt(2),qf=BigInt(3),p8=BigInt(4);function Rg(t){let e=Tg(t),{Fp:r}=e,n=e.toBytes||((h,p,y)=>{let x=p.toAffine();return He(Uint8Array.from([4]),r.toBytes(x.x),r.toBytes(x.y))}),i=e.fromBytes||(h=>{let p=h.subarray(1),y=r.fromBytes(p.subarray(0,r.BYTES)),x=r.fromBytes(p.subarray(r.BYTES,2*r.BYTES));return{x:y,y:x}});function o(h){let{a:p,b:y}=e,x=r.sqr(h),w=r.mul(x,h);return r.add(r.add(w,r.mul(h,p)),y)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(h){return typeof h=="bigint"&&We<h&&h<e.n}function a(h){if(!s(h))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(h){let{allowedPrivateKeyLengths:p,nByteLength:y,wrapPrivateKey:x,n:w}=e;if(p&&typeof h!="bigint"){if(pe(h)&&(h=qe(h)),typeof h!="string"||!p.includes(h.length))throw new Error("Invalid key");h=h.padStart(y*2,"0")}let b;try{b=typeof h=="bigint"?h:ze(Bt("private key",h,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof h}`)}return x&&(b=pt(b,w)),a(b),b}let f=new Map;function u(h){if(!(h instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(p,y,x){if(this.px=p,this.py=y,this.pz=x,p==null||!r.isValid(p))throw new Error("x required");if(y==null||!r.isValid(y))throw new Error("y required");if(x==null||!r.isValid(x))throw new Error("z required")}static fromAffine(p){let{x:y,y:x}=p||{};if(!p||!r.isValid(y)||!r.isValid(x))throw new Error("invalid affine point");if(p instanceof l)throw new Error("projective point not allowed");let w=b=>r.eql(b,r.ZERO);return w(y)&&w(x)?l.ZERO:new l(y,x,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){let y=r.invertBatch(p.map(x=>x.pz));return p.map((x,w)=>x.toAffine(y[w])).map(l.fromAffine)}static fromHex(p){let y=l.fromAffine(i(Bt("pointHex",p)));return y.assertValidity(),y}static fromPrivateKey(p){return l.BASE.multiply(c(p))}_setWindowSize(p){this._WINDOW_SIZE=p,f.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:p,y}=this.toAffine();if(!r.isValid(p)||!r.isValid(y))throw new Error("bad point: x or y not FE");let x=r.sqr(y),w=o(p);if(!r.eql(x,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:p}=this.toAffine();if(r.isOdd)return!r.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){u(p);let{px:y,py:x,pz:w}=this,{px:b,py:_,pz:E}=p,S=r.eql(r.mul(y,E),r.mul(b,w)),N=r.eql(r.mul(x,E),r.mul(_,w));return S&&N}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:p,b:y}=e,x=r.mul(y,qf),{px:w,py:b,pz:_}=this,E=r.ZERO,S=r.ZERO,N=r.ZERO,B=r.mul(w,w),P=r.mul(b,b),F=r.mul(_,_),O=r.mul(w,b);return O=r.add(O,O),N=r.mul(w,_),N=r.add(N,N),E=r.mul(p,N),S=r.mul(x,F),S=r.add(E,S),E=r.sub(P,S),S=r.add(P,S),S=r.mul(E,S),E=r.mul(O,E),N=r.mul(x,N),F=r.mul(p,F),O=r.sub(B,F),O=r.mul(p,O),O=r.add(O,N),N=r.add(B,B),B=r.add(N,B),B=r.add(B,F),B=r.mul(B,O),S=r.add(S,B),F=r.mul(b,_),F=r.add(F,F),B=r.mul(F,O),E=r.sub(E,B),N=r.mul(F,P),N=r.add(N,N),N=r.add(N,N),new l(E,S,N)}add(p){u(p);let{px:y,py:x,pz:w}=this,{px:b,py:_,pz:E}=p,S=r.ZERO,N=r.ZERO,B=r.ZERO,P=e.a,F=r.mul(e.b,qf),O=r.mul(y,b),V=r.mul(x,_),Y=r.mul(w,E),j=r.add(y,x),C=r.add(b,_);j=r.mul(j,C),C=r.add(O,V),j=r.sub(j,C),C=r.add(y,w);let D=r.add(b,E);return C=r.mul(C,D),D=r.add(O,Y),C=r.sub(C,D),D=r.add(x,w),S=r.add(_,E),D=r.mul(D,S),S=r.add(V,Y),D=r.sub(D,S),B=r.mul(P,C),S=r.mul(F,Y),B=r.add(S,B),S=r.sub(V,B),B=r.add(V,B),N=r.mul(S,B),V=r.add(O,O),V=r.add(V,O),Y=r.mul(P,Y),C=r.mul(F,C),V=r.add(V,Y),Y=r.sub(O,Y),Y=r.mul(P,Y),C=r.add(C,Y),O=r.mul(V,C),N=r.add(N,O),O=r.mul(D,C),S=r.mul(j,S),S=r.sub(S,O),O=r.mul(j,V),B=r.mul(D,B),B=r.add(B,O),new l(S,N,B)}subtract(p){return this.add(p.negate())}is0(){return this.equals(l.ZERO)}wNAF(p){return g.wNAFCached(this,f,p,y=>{let x=r.invertBatch(y.map(w=>w.pz));return y.map((w,b)=>w.toAffine(x[b])).map(l.fromAffine)})}multiplyUnsafe(p){let y=l.ZERO;if(p===We)return y;if(a(p),p===ae)return this;let{endo:x}=e;if(!x)return g.unsafeLadder(this,p);let{k1neg:w,k1:b,k2neg:_,k2:E}=x.splitScalar(p),S=y,N=y,B=this;for(;b>We||E>We;)b&ae&&(S=S.add(B)),E&ae&&(N=N.add(B)),B=B.double(),b>>=ae,E>>=ae;return w&&(S=S.negate()),_&&(N=N.negate()),N=new l(r.mul(N.px,x.beta),N.py,N.pz),S.add(N)}multiply(p){a(p);let y=p,x,w,{endo:b}=e;if(b){let{k1neg:_,k1:E,k2neg:S,k2:N}=b.splitScalar(y),{p:B,f:P}=this.wNAF(E),{p:F,f:O}=this.wNAF(N);B=g.constTimeNegate(_,B),F=g.constTimeNegate(S,F),F=new l(r.mul(F.px,b.beta),F.py,F.pz),x=B.add(F),w=P.add(O)}else{let{p:_,f:E}=this.wNAF(y);x=_,w=E}return l.normalizeZ([x,w])[0]}multiplyAndAddUnsafe(p,y,x){let w=l.BASE,b=(E,S)=>S===We||S===ae||!E.equals(w)?E.multiplyUnsafe(S):E.multiply(S),_=b(this,y).add(b(p,x));return _.is0()?void 0:_}toAffine(p){let{px:y,py:x,pz:w}=this,b=this.is0();p==null&&(p=b?r.ONE:r.inv(w));let _=r.mul(y,p),E=r.mul(x,p),S=r.mul(w,p);if(b)return{x:r.ZERO,y:r.ZERO};if(!r.eql(S,r.ONE))throw new Error("invZ was invalid");return{x:_,y:E}}isTorsionFree(){let{h:p,isTorsionFree:y}=e;if(p===ae)return!0;if(y)return y(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:p,clearCofactor:y}=e;return p===ae?this:y?y(l,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return this.assertValidity(),n(l,this,p)}toHex(p=!0){return qe(this.toRawBytes(p))}}l.BASE=new l(e.Gx,e.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let d=e.nBitLength,g=Vi(l,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function Ng(t){let e=Kn(t);return Re(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function zf(t){let e=Ng(t),{Fp:r,n}=e,i=r.BYTES+1,o=2*r.BYTES+1;function s(C){return We<C&&C<r.ORDER}function a(C){return pt(C,n)}function c(C){return Fi(C,n)}let{ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:d}=Rg({...e,toBytes(C,D,L){let k=D.toAffine(),I=r.toBytes(k.x),z=He;return L?z(Uint8Array.from([D.hasEvenY()?2:3]),I):z(Uint8Array.from([4]),I,r.toBytes(k.y))},fromBytes(C){let D=C.length,L=C[0],k=C.subarray(1);if(D===i&&(L===2||L===3)){let I=ze(k);if(!s(I))throw new Error("Point is not on curve");let z=l(I),G=r.sqrt(z),W=(G&ae)===ae;return(L&1)===1!==W&&(G=r.neg(G)),{x:I,y:G}}else if(D===o&&L===4){let I=r.fromBytes(k.subarray(0,r.BYTES)),z=r.fromBytes(k.subarray(r.BYTES,2*r.BYTES));return{x:I,y:z}}else throw new Error(`Point of length ${D} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),g=C=>qe(cr(C,e.nByteLength));function h(C){let D=n>>ae;return C>D}function p(C){return h(C)?a(-C):C}let y=(C,D,L)=>ze(C.slice(D,L));class x{constructor(D,L,k){this.r=D,this.s=L,this.recovery=k,this.assertValidity()}static fromCompact(D){let L=e.nByteLength;return D=Bt("compactSignature",D,L*2),new x(y(D,0,L),y(D,L,2*L))}static fromDER(D){let{r:L,s:k}=Lr.toSig(Bt("DER",D));return new x(L,k)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(D){return new x(this.r,this.s,D)}recoverPublicKey(D){let{r:L,s:k,recovery:I}=this,z=N(Bt("msgHash",D));if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");let G=I===2||I===3?L+e.n:L;if(G>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let W=I&1?"03":"02",tt=f.fromHex(W+g(G)),rt=c(G),ht=a(-z*rt),nt=a(k*rt),at=f.BASE.multiplyAndAddUnsafe(tt,ht,nt);if(!at)throw new Error("point at infinify");return at.assertValidity(),at}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Sr(this.toDERHex())}toDERHex(){return Lr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Sr(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}let w={isValidPrivateKey(C){try{return u(C),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let C=Es(e.n);return jc(e.randomBytes(C),e.n)},precompute(C=8,D=f.BASE){return D._setWindowSize(C),D.multiply(BigInt(3)),D}};function b(C,D=!0){return f.fromPrivateKey(C).toRawBytes(D)}function _(C){let D=pe(C),L=typeof C=="string",k=(D||L)&&C.length;return D?k===i||k===o:L?k===2*i||k===2*o:C instanceof f}function E(C,D,L=!0){if(_(C))throw new Error("first arg must be private key");if(!_(D))throw new Error("second arg must be public key");return f.fromHex(D).multiply(u(C)).toRawBytes(L)}let S=e.bits2int||function(C){let D=ze(C),L=C.length*8-e.nBitLength;return L>0?D>>BigInt(L):D},N=e.bits2int_modN||function(C){return a(S(C))},B=On(e.nBitLength);function P(C){if(typeof C!="bigint")throw new Error("bigint expected");if(!(We<=C&&C<B))throw new Error(`bigint expected < 2^${e.nBitLength}`);return cr(C,e.nByteLength)}function F(C,D,L=O){if(["recovered","canonical"].some(Et=>Et in L))throw new Error("sign() legacy options not supported");let{hash:k,randomBytes:I}=e,{lowS:z,prehash:G,extraEntropy:W}=L;z==null&&(z=!0),C=Bt("msgHash",C),G&&(C=Bt("prehashed msgHash",k(C)));let tt=N(C),rt=u(D),ht=[P(rt),P(tt)];if(W!=null){let Et=W===!0?I(r.BYTES):W;ht.push(Bt("extraEntropy",Et))}let nt=He(...ht),at=tt;function At(Et){let kt=S(Et);if(!d(kt))return;let Pt=c(kt),It=f.BASE.multiply(kt).toAffine(),Mt=a(It.x);if(Mt===We)return;let ke=a(Pt*a(at+Mt*rt));if(ke===We)return;let yr=(It.x===Mt?0:2)|Number(It.y&ae),An=ke;return z&&h(ke)&&(An=p(ke),yr^=1),new x(Mt,An,yr)}return{seed:nt,k2sig:At}}let O={lowS:e.lowS,prehash:!1},V={lowS:e.lowS,prehash:!1};function Y(C,D,L=O){let{seed:k,k2sig:I}=F(C,D,L),z=e;return ms(z.hash.outputLen,z.nByteLength,z.hmac)(k,I)}f.BASE._setWindowSize(8);function j(C,D,L,k=V){let I=C;if(D=Bt("msgHash",D),L=Bt("publicKey",L),"strict"in k)throw new Error("options.strict was renamed to lowS");let{lowS:z,prehash:G}=k,W,tt;try{if(typeof I=="string"||pe(I))try{W=x.fromDER(I)}catch(It){if(!(It instanceof Lr.Err))throw It;W=x.fromCompact(I)}else if(typeof I=="object"&&typeof I.r=="bigint"&&typeof I.s=="bigint"){let{r:It,s:Mt}=I;W=new x(It,Mt)}else throw new Error("PARSE");tt=f.fromHex(L)}catch(It){if(It.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(z&&W.hasHighS())return!1;G&&(D=e.hash(D));let{r:rt,s:ht}=W,nt=N(D),at=c(ht),At=a(nt*at),Et=a(rt*at),kt=f.BASE.multiplyAndAddUnsafe(tt,At,Et)?.toAffine();return kt?a(kt.x)===rt:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:E,sign:Y,verify:j,ProjectivePoint:f,Signature:x,utils:w}}var Xi=class extends Xr{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Mc(e);let n=Pn(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return Qr(this),this.iHash.update(e),this}digestInto(e){Qr(this),ls(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Zs=(t,e,r)=>new Xi(t,e).update(r).digest();Zs.create=(t,e)=>new Xi(t,e);function Dg(t){return{hash:t,hmac:(e,...r)=>Zs(t,e,Ui(...r)),randomBytes:Jr}}function Hf(t,e){let r=n=>zf({...t,...Dg(n)});return Object.freeze({...r(e),create:r})}var Yf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Gf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Lg=BigInt(1),Qs=BigInt(2),$f=(t,e)=>(t+e/Qs)/e;function Ug(t){let e=Yf,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),f=t*t*t%e,u=f*f*t%e,l=vt(u,r,e)*u%e,d=vt(l,r,e)*u%e,g=vt(d,Qs,e)*f%e,h=vt(g,i,e)*g%e,p=vt(h,o,e)*h%e,y=vt(p,a,e)*p%e,x=vt(y,c,e)*y%e,w=vt(x,a,e)*p%e,b=vt(w,r,e)*u%e,_=vt(b,s,e)*h%e,E=vt(_,n,e)*f%e,S=vt(E,Qs,e);if(!Xs.eql(Xs.sqr(S),t))throw new Error("Cannot find square root");return S}var Xs=Mi(Yf,void 0,void 0,{sqrt:Ug}),Ze=Hf({a:BigInt(0),b:BigInt(7),Fp:Xs,n:Gf,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=Gf,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Lg*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=$f(o*t,e),c=$f(-n*t,e),f=pt(t-a*r-c*i,e),u=pt(-a*n-c*o,e),l=f>s,d=u>s;if(l&&(f=e-f),d&&(u=e-u),f>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:f,k2neg:d,k2:u}}}},Vf),A8=BigInt(0);var T8=Ze.ProjectivePoint;function Wf(){return Ze.utils.randomPrivateKey()}async function Zf(t,e){let{digest:r}=await Kt.digest(e);try{return Ze.sign(r,t).toDERRawBytes()}catch(n){throw new ot(String(n),"ERR_INVALID_INPUT")}}async function Qf(t,e,r){try{let{digest:n}=await Kt.digest(r);return Ze.verify(e,n,t)}catch(n){throw new ot(String(n),"ERR_INVALID_INPUT")}}function Xf(t){return Ze.ProjectivePoint.fromHex(t).toRawBytes(!0)}function Jf(t){try{Ze.getPublicKey(t,!0)}catch(e){throw new ot(String(e),"ERR_INVALID_PRIVATE_KEY")}}function Js(t){try{Ze.ProjectivePoint.fromHex(t)}catch(e){throw new ot(String(e),"ERR_INVALID_PUBLIC_KEY")}}function jf(t){try{return Ze.getPublicKey(t,!0)}catch(e){throw new ot(String(e),"ERR_INVALID_PRIVATE_KEY")}}var Wn=class{_key;constructor(e){Js(e),this._key=e}async verify(e,r){return Qf(this._key,r,e)}marshal(){return Xf(this._key)}get bytes(){return Ne.encode({Type:wt.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return _e(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Kt.digest(this.bytes);return e}},Zn=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r??jf(e),Jf(this._key),Js(this._publicKey)}async sign(e){return Zf(this._key,e)}get public(){return new Wn(this._publicKey)}marshal(){return this._key}get bytes(){return De.encode({Type:wt.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return _e(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Kt.digest(this.bytes);return e}async id(){let e=await this.public.hash();return Qt(e,"base58btc")}async export(e,r="libp2p-key"){if(r==="libp2p-key")return rn(this.bytes,e);throw new ot(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function Pg(t){return new Zn(t)}function Og(t){return new Wn(t)}async function Kg(){let t=Wf();return new Zn(t)}var Ur={rsa:Ys,ed25519:qs,secp256k1:js};function tu(t){let e=Object.keys(Ur).join(" / ");return new ot(`invalid or unsupported key type ${t}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function ta(t){let e=Ne.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case wt.RSA:return Ur.rsa.unmarshalRsaPublicKey(r);case wt.Ed25519:return Ur.ed25519.unmarshalEd25519PublicKey(r);case wt.Secp256k1:return Ur.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw tu(e.Type??"unknown")}}async function eu(t){let e=De.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case wt.RSA:return Ur.rsa.unmarshalRsaPrivateKey(r);case wt.Ed25519:return Ur.ed25519.unmarshalEd25519PrivateKey(r);case wt.Secp256k1:return Ur.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw tu(e.Type??"RSA")}}var jt=Rt(su(),1);jt.default.formatters.b=t=>t==null?"undefined":Ot.baseEncode(t);jt.default.formatters.t=t=>t==null?"undefined":ir.baseEncode(t);jt.default.formatters.m=t=>t==null?"undefined":$r.baseEncode(t);jt.default.formatters.p=t=>t==null?"undefined":t.toString();jt.default.formatters.c=t=>t==null?"undefined":t.toString();jt.default.formatters.k=t=>t==null?"undefined":t.toString();jt.default.formatters.a=t=>t==null?"undefined":t.toString();function Jg(t){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function to(t){let e=Jg(`${t}:trace`);return jt.default.enabled(`${t}:trace`)&&jt.default.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=(0,jt.default)(`${t}:trace`)),Object.assign((0,jt.default)(t),{error:(0,jt.default)(`${t}:error`),trace:e})}var Ga=Rt(ea(),1);function Pr(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}var sa={};ut(sa,{base10:()=>ox});var oE=new Uint8Array(0);function fu(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Qe(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function uu(t){return new TextEncoder().encode(t)}function lu(t){return new TextDecoder().decode(t)}function tx(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var p=0,y=0,x=0,w=h.length;x!==w&&h[x]===0;)x++,p++;for(var b=(w-x)*u+1>>>0,_=new Uint8Array(b);x!==w;){for(var E=h[x],S=0,N=b-1;(E!==0||S<y)&&N!==-1;N--,S++)E+=256*_[N]>>>0,_[N]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");y=S,x++}for(var B=b-y;B!==b&&_[B]===0;)B++;for(var P=c.repeat(p);B<b;++B)P+=t.charAt(_[B]);return P}function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var p=0;if(h[p]!==" "){for(var y=0,x=0;h[p]===c;)y++,p++;for(var w=(h.length-p)*f+1>>>0,b=new Uint8Array(w);h[p];){var _=r[h.charCodeAt(p)];if(_===255)return;for(var E=0,S=w-1;(_!==0||E<x)&&S!==-1;S--,E++)_+=a*b[S]>>>0,b[S]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");x=E,p++}if(h[p]!==" "){for(var N=w-x;N!==w&&b[N]===0;)N++;for(var B=new Uint8Array(y+(w-N)),P=y;N!==w;)B[P++]=b[N++];return B}}}function g(h){var p=d(h);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:d,decode:g}}var ex=tx,rx=ex,du=rx;var ra=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},na=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return pu(this,e)}},ia=class{decoders;constructor(e){this.decoders=e}or(e){return pu(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function pu(t,e){return new ia({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}var oa=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new ra(e,r,n),this.decoder=new na(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function dn({name:t,prefix:e,encode:r,decode:n}){return new oa(t,e,r,n)}function hr({name:t,prefix:e,alphabet:r}){let{encode:n,decode:i}=du(r,t);return dn({prefix:e,name:t,encode:n,decode:o=>Qe(i(o))})}function nx(t,e,r,n){let i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,c=0,f=0;for(let u=0;u<o;++u){let l=i[t[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,s[f++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s}function ix(t,e,r){let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s!==0&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o}function Ct({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return dn({prefix:e,name:t,encode(i){return ix(i,n,r)},decode(i){return nx(i,n,r,t)}})}var ox=hr({prefix:"9",name:"base10",alphabet:"0123456789"});var aa={};ut(aa,{base16:()=>sx,base16upper:()=>ax});var sx=Ct({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ax=Ct({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ca={};ut(ca,{base2:()=>cx});var cx=Ct({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var fa={};ut(fa,{base256emoji:()=>dx});var yu=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),fx=yu.reduce((t,e,r)=>(t[r]=e,t),[]),ux=yu.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function lx(t){return t.reduce((e,r)=>(e+=fx[r],e),"")}function hx(t){let e=[];for(let r of t){let n=ux[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var dx=dn({prefix:"\u{1F680}",name:"base256emoji",encode:lx,decode:hx});var ua={};ut(ua,{base32:()=>pn,base32hex:()=>xx,base32hexpad:()=>bx,base32hexpadupper:()=>vx,base32hexupper:()=>mx,base32pad:()=>yx,base32padupper:()=>gx,base32upper:()=>px,base32z:()=>wx});var pn=Ct({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),px=Ct({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),yx=Ct({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gx=Ct({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xx=Ct({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),mx=Ct({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bx=Ct({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vx=Ct({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),wx=Ct({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var la={};ut(la,{base36:()=>Ex,base36upper:()=>Sx});var Ex=hr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Sx=hr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ha={};ut(ha,{base58btc:()=>Le,base58flickr:()=>Bx});var Le=hr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Bx=hr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var da={};ut(da,{base64:()=>Cx,base64pad:()=>Ax,base64url:()=>Tx,base64urlpad:()=>Ix});var Cx=Ct({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ax=Ct({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Tx=Ct({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ix=Ct({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var pa={};ut(pa,{base8:()=>_x});var _x=Ct({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ya={};ut(ya,{identity:()=>Rx});var Rx=dn({prefix:"\0",name:"identity",encode:t=>lu(t),decode:t=>uu(t)});var wE=new TextEncoder,EE=new TextDecoder;var xa={};ut(xa,{identity:()=>jx});var Lx=mu,gu=128,Ux=127,kx=~Ux,Px=Math.pow(2,31);function mu(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Px;)e[r++]=t&255|gu,t/=128;for(;t&kx;)e[r++]=t&255|gu,t>>>=7;return e[r]=t|0,mu.bytes=r-n+1,e}var Ox=ga,Kx=128,xu=127;function ga(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw ga.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&xu)<<i:(s&xu)*Math.pow(2,i),i+=7}while(s>=Kx);return ga.bytes=o-n,r}var Fx=Math.pow(2,7),Mx=Math.pow(2,14),Vx=Math.pow(2,21),qx=Math.pow(2,28),zx=Math.pow(2,35),Hx=Math.pow(2,42),Gx=Math.pow(2,49),$x=Math.pow(2,56),Yx=Math.pow(2,63),Wx=function(t){return t<Fx?1:t<Mx?2:t<Vx?3:t<qx?4:t<zx?5:t<Hx?6:t<Gx?7:t<$x?8:t<Yx?9:10},Zx={encode:Lx,decode:Ox,encodingLength:Wx},Qx=Zx,Qn=Qx;function Xn(t,e=0){return[Qn.decode(t,e),Qn.decode.bytes]}function yn(t,e,r=0){return Qn.encode(t,e,r),e}function gn(t){return Qn.encodingLength(t)}function Or(t,e){let r=e.byteLength,n=gn(t),i=n+gn(r),o=new Uint8Array(i+r);return yn(t,o,0),yn(r,o,n),o.set(e,i),new xn(t,r,e,o)}function bu(t){let e=Qe(t),[r,n]=Xn(e),[i,o]=Xn(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new xn(r,i,s,e)}function vu(t,e){if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&fu(t.bytes,r.bytes)}}var xn=class{code;size;digest;bytes;constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var wu=0,Xx="identity",Eu=Qe;function Jx(t){return Or(wu,Eu(t))}var jx={code:wu,name:Xx,encode:Eu,digest:Jx};var va={};ut(va,{sha256:()=>tm,sha512:()=>em});function ba({name:t,code:e,encode:r}){return new ma(t,e,r)}var ma=class{name;code;encode;constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Or(this.code,r):r.then(n=>Or(this.code,n))}else throw Error("Unknown type, must be binary type")}};function Bu(t){return async e=>new Uint8Array(await crypto.subtle.digest(t,e))}var tm=ba({name:"sha2-256",code:18,encode:Bu("SHA-256")}),em=ba({name:"sha2-512",code:19,encode:Bu("SHA-512")});function Cu(t,e){let{bytes:r,version:n}=t;switch(n){case 0:return nm(r,wa(t),e??Le.encoder);default:return im(r,wa(t),e??pn.encoder)}}var Au=new WeakMap;function wa(t){let e=Au.get(t);if(e==null){let r=new Map;return Au.set(t,r),r}return e}var ro=class t{code;version;multihash;bytes;"/";constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==jn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==om)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Or(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n!=null&&e.code===n.code&&e.version===n.version&&vu(e.multihash,n.multihash)}toString(e){return Cu(this,e)}toJSON(){return{"/":Cu(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new t(n,i,o,s??Tu(n,i,o.bytes))}else if(r[sm]===!0){let{version:n,multihash:i,code:o}=r,s=bu(i);return t.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==jn)throw new Error(`Version 0 CID must use dag-pb (code: ${jn}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=Tu(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,jn,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=Qe(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new xn(r.multihashCode,r.digestSize,o,i);return[r.version===0?t.createV0(s):t.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,d]=Xn(e.subarray(r));return r+=d,l},i=n(),o=jn;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),c=n(),f=r+c,u=f-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(e,r){let[n,i]=rm(e,r),o=t.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return wa(o).set(n,e),o}};function rm(t,e){switch(t[0]){case"Q":{let r=e??Le;return[Le.prefix,r.decode(`${Le.prefix}${t}`)]}case Le.prefix:{let r=e??Le;return[Le.prefix,r.decode(t)]}case pn.prefix:{let r=e??pn;return[pn.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function nm(t,e,r){let{prefix:n}=r;if(n!==Le.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i}function im(t,e,r){let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i}var jn=112,om=18;function Tu(t,e,r){let n=gn(t),i=n+gn(e),o=new Uint8Array(i+r.byteLength);return yn(t,o,0),yn(e,o,n),o.set(r,i),o}var sm=Symbol.for("@ipld/js-cid/CID");var Ea={...ya,...ca,...pa,...sa,...aa,...ua,...la,...ha,...da,...fa},zE={...va,...xa};function no(t=0){return globalThis.Buffer?.allocUnsafe!=null?Pr(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function _u(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var Iu=_u("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Sa=_u("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=no(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),am={utf8:Iu,"utf-8":Iu,hex:Ea.base16,latin1:Sa,ascii:Sa,binary:Sa,...Ea},io=am;function me(t,e="utf8"){let r=io[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Pr(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function ti(t,e="utf8"){let r=io[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var Xe="/",Ru=new TextEncoder().encode(Xe),oo=Ru[0],so=class t{_buf;constructor(e,r){if(typeof e=="string")this._buf=me(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==oo)throw new Error("Invalid key")}toString(e="utf8"){return ti(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new t(e.join(Xe))}static random(){return new t(Math.random().toString().substring(2))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new t(e):typeof e.uint8Array=="function"?new t(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Ru),this._buf[0]!==oo){let e=new Uint8Array(this._buf.byteLength+1);e.fill(oo,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===oo;)this._buf=this._buf.subarray(0,-1)}less(e){let r=this.list(),n=e.list();for(let i=0;i<r.length;i++){if(n.length<i+1)return!1;let o=r[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return r.length<n.length}reverse(){return t.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Xe).slice(1)}type(){return cm(this.baseNamespace())}name(){return fm(this.baseNamespace())}instance(e){return new t(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Xe)||(e+=Xe),e+=this.type(),new t(e)}parent(){let e=this.list();return e.length===1?new t(Xe):new t(e.slice(0,-1).join(Xe))}child(e){return this.toString()===Xe?e:e.toString()===Xe?this:new t(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return t.withNamespaces([...this.namespaces(),...um(e.map(r=>r.namespaces()))])}};function cm(t){let e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function fm(t){let e=t.split(":");return e[e.length-1]}function um(t){return[].concat(...t)}var $a=Rt(Ca(),1);function ei(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var Aa="ERR_UNRECOGNIZED_VALIDITY",Nu="ERR_SIGNATURE_CREATION",Kr="ERR_SIGNATURE_VERIFICATION",Du="ERR_UNRECOGNIZED_FORMAT";var Ta="ERR_UNDEFINED_PARAMETER",Lu="ERR_INVALID_RECORD_DATA",Uu="ERR_INVALID_VALUE",ku="ERR_INVALID_EMBEDDED_KEY",Pu="ERR_MISSING_PRIVATE_KEY";var te;(function(t){let e;(function(i){i.EOL="EOL"})(e=t.ValidityType||(t.ValidityType={}));let r;(function(i){i[i.EOL=0]="EOL"})(r||(r={})),function(i){i.codec=()=>qn(r)}(e=t.ValidityType||(t.ValidityType={}));let n;t.codec=()=>(n==null&&(n=an((i,o,s={})=>{s.lengthDelimited!==!1&&o.fork(),i.value!=null&&(o.uint32(10),o.bytes(i.value)),i.signatureV1!=null&&(o.uint32(18),o.bytes(i.signatureV1)),i.validityType!=null&&(o.uint32(24),t.ValidityType.codec().encode(i.validityType,o)),i.validity!=null&&(o.uint32(34),o.bytes(i.validity)),i.sequence!=null&&(o.uint32(40),o.uint64(i.sequence)),i.ttl!=null&&(o.uint32(48),o.uint64(i.ttl)),i.pubKey!=null&&(o.uint32(58),o.bytes(i.pubKey)),i.signatureV2!=null&&(o.uint32(66),o.bytes(i.signatureV2)),i.data!=null&&(o.uint32(74),o.bytes(i.data)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={},a=o==null?i.len:i.pos+o;for(;i.pos<a;){let c=i.uint32();switch(c>>>3){case 1:s.value=i.bytes();break;case 2:s.signatureV1=i.bytes();break;case 3:s.validityType=t.ValidityType.codec().decode(i);break;case 4:s.validity=i.bytes();break;case 5:s.sequence=i.uint64();break;case 6:s.ttl=i.uint64();break;case 7:s.pubKey=i.bytes();break;case 8:s.signatureV2=i.bytes();break;case 9:s.data=i.bytes();break;default:i.skipType(c&7);break}}return s})),n),t.encode=i=>on(i,t.codec()),t.decode=i=>nn(i,t.codec())})(te||(te={}));var Ia=Symbol.for("@libp2p/peer-id");function Ku(t){return t!=null&&!!t[Ia]}function _a(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var lm=Symbol.for("nodejs.util.inspect.custom"),Fu=Object.values(Me).map(t=>t.decoder).reduce((t,e)=>t.or(e),Me.identity.decoder),Mu=114,Ra=36,Na=37,ri=class{type;multihash;privateKey;publicKey;string;constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[Ia]=!0;toString(){return this.string==null&&(this.string=Ot.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return he.createV1(Mu,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return _a(this.multihash.bytes,e);if(typeof e=="string")return hm(e).equals(this);if(e?.multihash?.bytes!=null)return _a(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[lm](){return`PeerId(${this.toString()})`}},mn=class extends ri{type="RSA";publicKey;constructor(e){super({...e,type:"RSA"}),this.publicKey=e.publicKey}},bn=class extends ri{type="Ed25519";publicKey;constructor(e){super({...e,type:"Ed25519"}),this.publicKey=e.multihash.digest}},vn=class extends ri{type="secp256k1";publicKey;constructor(e){super({...e,type:"secp256k1"}),this.publicKey=e.multihash.digest}};function hm(t,e){if(e=e??Fu,t.charAt(0)==="1"||t.charAt(0)==="Q"){let r=wr(Ot.decode(`z${t}`));return t.startsWith("12D")?new bn({multihash:r}):t.startsWith("16U")?new vn({multihash:r}):new mn({multihash:r})}return Da(Fu.decode(t))}function Da(t){try{let e=wr(t);if(e.code===Ie.code){if(e.digest.length===Ra)return new bn({multihash:e});if(e.digest.length===Na)return new vn({multihash:e})}if(e.code===Kt.code)return new mn({multihash:e})}catch{return dm(he.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function dm(t){if(t==null||t.multihash==null||t.version==null||t.version===1&&t.code!==Mu)throw new Error("Supplied PeerID CID is invalid");let e=t.multihash;if(e.code===Kt.code)return new mn({multihash:t.multihash});if(e.code===Ie.code){if(e.digest.length===Ra)return new bn({multihash:t.multihash});if(e.digest.length===Na)return new vn({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function Vu(t,e){return t.length===Ra?new bn({multihash:Te(Ie.code,t),privateKey:e}):t.length===Na?new vn({multihash:Te(Ie.code,t),privateKey:e}):new mn({multihash:await Kt.digest(t),publicKey:t,privateKey:e})}var pm=["string","number","bigint","symbol"],ym=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function qu(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(pm.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(gm(t))return"Buffer";let r=xm(t);return r||"Object"}function gm(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function xm(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(ym.includes(e))return e}var T=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};T.uint=new T(0,"uint",!0);T.negint=new T(1,"negint",!0);T.bytes=new T(2,"bytes",!0);T.string=new T(3,"string",!0);T.array=new T(4,"array",!1);T.map=new T(5,"map",!1);T.tag=new T(6,"tag",!1);T.float=new T(7,"float",!0);T.false=new T(7,"false",!0);T.true=new T(7,"true",!0);T.null=new T(7,"null",!0);T.undefined=new T(7,"undefined",!0);T.break=new T(7,"break",!0);var H=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var wn=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",mm=new TextDecoder,bm=new TextEncoder;function ao(t){return wn&&globalThis.Buffer.isBuffer(t)}function La(t){return t instanceof Uint8Array?ao(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var $u=wn?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):Hu(t,e,r):(t,e,r)=>r-e>64?mm.decode(t.subarray(e,r)):Hu(t,e,r),Yu=wn?t=>t.length>64?globalThis.Buffer.from(t):zu(t):t=>t.length>64?bm.encode(t):zu(t),Ue=t=>Uint8Array.from(t),En=wn?(t,e,r)=>ao(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),Wu=wn?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),La(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},Zu=wn?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function Qu(t,e){if(ao(t)&&ao(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function zu(t){let e=[],r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e}function Hu(t,e,r){let n=[];for(;e<r;){let i=t[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=r){let a,c,f,u;switch(s){case 1:i<128&&(o=i);break;case 2:a=t[e+1],(a&192)===128&&(u=(i&31)<<6|a&63,u>127&&(o=u));break;case 3:a=t[e+1],c=t[e+2],(a&192)===128&&(c&192)===128&&(u=(i&15)<<12|(a&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:a=t[e+1],c=t[e+2],f=t[e+3],(a&192)===128&&(c&192)===128&&(f&192)===128&&(u=(i&15)<<18|(a&63)<<12|(c&63)<<6|f&63,u>65535&&u<1114112&&(o=u))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return vm(n)}var Gu=4096;function vm(t){let e=t.length;if(e<=Gu)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Gu));return r}var wm=256,ni=class{constructor(e=wm){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){let i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=Zu(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=En(n,0,this.cursor)}else r=Wu(this.chunks,this.cursor);return e&&this.reset(),r}};var Z="CBOR decode error:",Ua="CBOR encode error:",ii=[];ii[23]=1;ii[24]=2;ii[25]=3;ii[26]=5;ii[27]=9;function Je(t,e,r){if(t.length-e<r)throw new Error(`${Z} not enough data for type`)}var Ut=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ee(t,e,r){Je(t,e,1);let n=t[e];if(r.strict===!0&&n<Ut[0])throw new Error(`${Z} integer encoded in more bytes than necessary (strict decode)`);return n}function re(t,e,r){Je(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<Ut[1])throw new Error(`${Z} integer encoded in more bytes than necessary (strict decode)`);return n}function ne(t,e,r){Je(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<Ut[2])throw new Error(`${Z} integer encoded in more bytes than necessary (strict decode)`);return n}function ie(t,e,r){Je(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&o<Ut[3])throw new Error(`${Z} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(r.allowBigInt===!0)return o;throw new Error(`${Z} integers outside of the safe integer range are not supported`)}function Xu(t,e,r,n){return new H(T.uint,ee(t,e+1,n),2)}function Ju(t,e,r,n){return new H(T.uint,re(t,e+1,n),3)}function ju(t,e,r,n){return new H(T.uint,ne(t,e+1,n),5)}function tl(t,e,r,n){return new H(T.uint,ie(t,e+1,n),9)}function ce(t,e){return Ft(t,0,e.value)}function Ft(t,e,r){if(r<Ut[0]){let n=Number(r);t.push([e|n])}else if(r<Ut[1]){let n=Number(r);t.push([e|24,n])}else if(r<Ut[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<Ut[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<Ut[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,t.push(i)}else throw new Error(`${Z} encountered BigInt larger than allowable range`)}}ce.encodedSize=function(e){return Ft.encodedSize(e.value)};Ft.encodedSize=function(e){return e<Ut[0]?1:e<Ut[1]?2:e<Ut[2]?3:e<Ut[3]?5:9};ce.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function el(t,e,r,n){return new H(T.negint,-1-ee(t,e+1,n),2)}function rl(t,e,r,n){return new H(T.negint,-1-re(t,e+1,n),3)}function nl(t,e,r,n){return new H(T.negint,-1-ne(t,e+1,n),5)}var ka=BigInt(-1),il=BigInt(1);function ol(t,e,r,n){let i=ie(t,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new H(T.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${Z} integers outside of the safe integer range are not supported`);return new H(T.negint,ka-BigInt(i),9)}function co(t,e){let r=e.value,n=typeof r=="bigint"?r*ka-il:r*-1-1;Ft(t,e.type.majorEncoded,n)}co.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*ka-il:r*-1-1;return n<Ut[0]?1:n<Ut[1]?2:n<Ut[2]?3:n<Ut[3]?5:9};co.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function oi(t,e,r,n){Je(t,e,r+n);let i=En(t,e+r,e+r+n);return new H(T.bytes,i,r+n)}function sl(t,e,r,n){return oi(t,e,1,r)}function al(t,e,r,n){return oi(t,e,2,ee(t,e+1,n))}function cl(t,e,r,n){return oi(t,e,3,re(t,e+1,n))}function fl(t,e,r,n){return oi(t,e,5,ne(t,e+1,n))}function ul(t,e,r,n){let i=ie(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Z} 64-bit integer bytes lengths not supported`);return oi(t,e,9,i)}function fo(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===T.string?Yu(t.value):t.value),t.encodedBytes}function Sn(t,e){let r=fo(e);Ft(t,e.type.majorEncoded,r.length),t.push(r)}Sn.encodedSize=function(e){let r=fo(e);return Ft.encodedSize(r.length)+r.length};Sn.compareTokens=function(e,r){return Sm(fo(e),fo(r))};function Sm(t,e){return t.length<e.length?-1:t.length>e.length?1:Qu(t,e)}function si(t,e,r,n,i){let o=r+n;Je(t,e,o);let s=new H(T.string,$u(t,e+r,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=En(t,e+r,e+o)),s}function ll(t,e,r,n){return si(t,e,1,r,n)}function hl(t,e,r,n){return si(t,e,2,ee(t,e+1,n),n)}function dl(t,e,r,n){return si(t,e,3,re(t,e+1,n),n)}function pl(t,e,r,n){return si(t,e,5,ne(t,e+1,n),n)}function yl(t,e,r,n){let i=ie(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Z} 64-bit integer string lengths not supported`);return si(t,e,9,i,n)}var gl=Sn;function Bn(t,e,r,n){return new H(T.array,n,r)}function xl(t,e,r,n){return Bn(t,e,1,r)}function ml(t,e,r,n){return Bn(t,e,2,ee(t,e+1,n))}function bl(t,e,r,n){return Bn(t,e,3,re(t,e+1,n))}function vl(t,e,r,n){return Bn(t,e,5,ne(t,e+1,n))}function wl(t,e,r,n){let i=ie(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Z} 64-bit integer array lengths not supported`);return Bn(t,e,9,i)}function El(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Z} indefinite length items not allowed`);return Bn(t,e,1,1/0)}function uo(t,e){Ft(t,T.array.majorEncoded,e.value)}uo.compareTokens=ce.compareTokens;uo.encodedSize=function(e){return Ft.encodedSize(e.value)};function Cn(t,e,r,n){return new H(T.map,n,r)}function Sl(t,e,r,n){return Cn(t,e,1,r)}function Bl(t,e,r,n){return Cn(t,e,2,ee(t,e+1,n))}function Cl(t,e,r,n){return Cn(t,e,3,re(t,e+1,n))}function Al(t,e,r,n){return Cn(t,e,5,ne(t,e+1,n))}function Tl(t,e,r,n){let i=ie(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Z} 64-bit integer map lengths not supported`);return Cn(t,e,9,i)}function Il(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Z} indefinite length items not allowed`);return Cn(t,e,1,1/0)}function lo(t,e){Ft(t,T.map.majorEncoded,e.value)}lo.compareTokens=ce.compareTokens;lo.encodedSize=function(e){return Ft.encodedSize(e.value)};function _l(t,e,r,n){return new H(T.tag,r,1)}function Rl(t,e,r,n){return new H(T.tag,ee(t,e+1,n),2)}function Nl(t,e,r,n){return new H(T.tag,re(t,e+1,n),3)}function Dl(t,e,r,n){return new H(T.tag,ne(t,e+1,n),5)}function Ll(t,e,r,n){return new H(T.tag,ie(t,e+1,n),9)}function ho(t,e){Ft(t,T.tag.majorEncoded,e.value)}ho.compareTokens=ce.compareTokens;ho.encodedSize=function(e){return Ft.encodedSize(e.value)};var _m=20,Rm=21,Nm=22,Dm=23;function Ul(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${Z} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new H(T.null,null,1):new H(T.undefined,void 0,1)}function kl(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Z} indefinite length items not allowed`);return new H(T.break,void 0,1)}function Pa(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${Z} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${Z} Infinity values are not supported`)}return new H(T.float,t,e)}function Pl(t,e,r,n){return Pa(Oa(t,e+1),3,n)}function Ol(t,e,r,n){return Pa(Ka(t,e+1),5,n)}function Kl(t,e,r,n){return Pa(ql(t,e+1),9,n)}function po(t,e,r){let n=e.value;if(n===!1)t.push([T.float.majorEncoded|_m]);else if(n===!0)t.push([T.float.majorEncoded|Rm]);else if(n===null)t.push([T.float.majorEncoded|Nm]);else if(n===void 0)t.push([T.float.majorEncoded|Dm]);else{let i,o=!1;(!r||r.float64!==!0)&&(Ml(n),i=Oa(be,1),n===i||Number.isNaN(n)?(be[0]=249,t.push(be.slice(0,3)),o=!0):(Vl(n),i=Ka(be,1),n===i&&(be[0]=250,t.push(be.slice(0,5)),o=!0))),o||(Lm(n),i=ql(be,1),be[0]=251,t.push(be.slice(0,9)))}}po.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){Ml(n);let i=Oa(be,1);if(n===i||Number.isNaN(n))return 3;if(Vl(n),i=Ka(be,1),n===i)return 5}return 9};var Fl=new ArrayBuffer(9),fe=new DataView(Fl,1),be=new Uint8Array(Fl,0);function Ml(t){if(t===1/0)fe.setUint16(0,31744,!1);else if(t===-1/0)fe.setUint16(0,64512,!1);else if(Number.isNaN(t))fe.setUint16(0,32256,!1);else{fe.setFloat32(0,t);let e=fe.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)fe.setUint16(0,31744,!1);else if(r===0)fe.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let i=r-127;i<-24?fe.setUint16(0,0):i<-14?fe.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):fe.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function Oa(t,e){if(t.length-e<2)throw new Error(`${Z} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,i=r&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,r&32768?-o:o}function Vl(t){fe.setFloat32(0,t,!1)}function Ka(t,e){if(t.length-e<4)throw new Error(`${Z} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function Lm(t){fe.setFloat64(0,t,!1)}function ql(t,e){if(t.length-e<8)throw new Error(`${Z} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}po.compareTokens=ce.compareTokens;function ct(t,e,r){throw new Error(`${Z} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function yo(t){return()=>{throw new Error(`${Z} ${t}`)}}var K=[];for(let t=0;t<=23;t++)K[t]=ct;K[24]=Xu;K[25]=Ju;K[26]=ju;K[27]=tl;K[28]=ct;K[29]=ct;K[30]=ct;K[31]=ct;for(let t=32;t<=55;t++)K[t]=ct;K[56]=el;K[57]=rl;K[58]=nl;K[59]=ol;K[60]=ct;K[61]=ct;K[62]=ct;K[63]=ct;for(let t=64;t<=87;t++)K[t]=sl;K[88]=al;K[89]=cl;K[90]=fl;K[91]=ul;K[92]=ct;K[93]=ct;K[94]=ct;K[95]=yo("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)K[t]=ll;K[120]=hl;K[121]=dl;K[122]=pl;K[123]=yl;K[124]=ct;K[125]=ct;K[126]=ct;K[127]=yo("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)K[t]=xl;K[152]=ml;K[153]=bl;K[154]=vl;K[155]=wl;K[156]=ct;K[157]=ct;K[158]=ct;K[159]=El;for(let t=160;t<=183;t++)K[t]=Sl;K[184]=Bl;K[185]=Cl;K[186]=Al;K[187]=Tl;K[188]=ct;K[189]=ct;K[190]=ct;K[191]=Il;for(let t=192;t<=215;t++)K[t]=_l;K[216]=Rl;K[217]=Nl;K[218]=Dl;K[219]=Ll;K[220]=ct;K[221]=ct;K[222]=ct;K[223]=ct;for(let t=224;t<=243;t++)K[t]=yo("simple values are not supported");K[244]=ct;K[245]=ct;K[246]=ct;K[247]=Ul;K[248]=yo("simple values are not supported");K[249]=Pl;K[250]=Ol;K[251]=Kl;K[252]=ct;K[253]=ct;K[254]=ct;K[255]=kl;var ve=[];for(let t=0;t<24;t++)ve[t]=new H(T.uint,t,1);for(let t=-1;t>=-24;t--)ve[31-t]=new H(T.negint,t,1);ve[64]=new H(T.bytes,new Uint8Array(0),1);ve[96]=new H(T.string,"",1);ve[128]=new H(T.array,0,1);ve[160]=new H(T.map,0,1);ve[244]=new H(T.false,!1,1);ve[245]=new H(T.true,!0,1);ve[246]=new H(T.null,null,1);function zl(t){switch(t.type){case T.false:return Ue([244]);case T.true:return Ue([245]);case T.null:return Ue([246]);case T.bytes:return t.value.length?void 0:Ue([64]);case T.string:return t.value===""?Ue([96]):void 0;case T.array:return t.value===0?Ue([128]):void 0;case T.map:return t.value===0?Ue([160]):void 0;case T.uint:return t.value<24?Ue([Number(t.value)]):void 0;case T.negint:if(t.value>=-24)return Ue([31-Number(t.value)])}}var km={float64:!1,mapSorter:Km,quickEncodeToken:zl};function Pm(){let t=[];return t[T.uint.major]=ce,t[T.negint.major]=co,t[T.bytes.major]=Sn,t[T.string.major]=gl,t[T.array.major]=uo,t[T.map.major]=lo,t[T.tag.major]=ho,t[T.float.major]=po,t}var Hl=Pm(),Fa=new ni,xo=class t{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${Ua} object contains circular references`);return new t(r,e)}},dr={null:new H(T.null,null),undefined:new H(T.undefined,void 0),true:new H(T.true,!0),false:new H(T.false,!1),emptyArray:new H(T.array,0),emptyMap:new H(T.map,0)},pr={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new H(T.float,t):t>=0?new H(T.uint,t):new H(T.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new H(T.uint,t):new H(T.negint,t)},Uint8Array(t,e,r,n){return new H(T.bytes,t)},string(t,e,r,n){return new H(T.string,t)},boolean(t,e,r,n){return t?dr.true:dr.false},null(t,e,r,n){return dr.null},undefined(t,e,r,n){return dr.undefined},ArrayBuffer(t,e,r,n){return new H(T.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new H(T.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[dr.emptyArray,new H(T.break)]:dr.emptyArray;n=xo.createCheck(n,t);let i=[],o=0;for(let s of t)i[o++]=go(s,r,n);return r.addBreakTokens?[new H(T.array,t.length),i,new H(T.break)]:[new H(T.array,t.length),i]},Object(t,e,r,n){let i=e!=="Object",o=i?t.keys():Object.keys(t),s=i?t.size:o.length;if(!s)return r.addBreakTokens===!0?[dr.emptyMap,new H(T.break)]:dr.emptyMap;n=xo.createCheck(n,t);let a=[],c=0;for(let f of o)a[c++]=[go(f,r,n),go(i?t.get(f):t[f],r,n)];return Om(a,r),r.addBreakTokens?[new H(T.map,s),a,new H(T.break)]:[new H(T.map,s),a]}};pr.Map=pr.Object;pr.Buffer=pr.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))pr[`${t}Array`]=pr.DataView;function go(t,e={},r){let n=qu(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||pr[n];if(typeof i=="function"){let s=i(t,n,e,r);if(s!=null)return s}let o=pr[n];if(!o)throw new Error(`${Ua} unsupported type: ${n}`);return o(t,n,e,r)}function Om(t,e){e.mapSorter&&t.sort(e.mapSorter)}function Km(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);let i=r.type.major,o=Hl[i].compareTokens(r,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function Gl(t,e,r,n){if(Array.isArray(e))for(let i of e)Gl(t,i,r,n);else r[e.type.major](t,e,n)}function Fm(t,e,r){let n=go(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){let i=r.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let s=o.encodedSize(n,r),a=new ni(s);if(o(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return La(a.chunks[0])}}return Fa.reset(),Gl(Fa,n,e,r),Fa.toBytes(!0)}function Ma(t,e){return e=Object.assign({},km,e),Fm(t,Hl,e)}var Mm={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Va=class{constructor(e,r={}){this._pos=0,this.data=e,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let e=this.data[this._pos],r=ve[e];if(r===void 0){let n=K[e];if(!n)throw new Error(`${Z} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;r=n(this.data,this._pos,i,this.options)}return this._pos+=r.encodedLength,r}},ai=Symbol.for("DONE"),mo=Symbol.for("BREAK");function Vm(t,e,r){let n=[];for(let i=0;i<t.value;i++){let o=ci(e,r);if(o===mo){if(t.value===1/0)break;throw new Error(`${Z} got unexpected break to lengthed array`)}if(o===ai)throw new Error(`${Z} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=o}return n}function qm(t,e,r){let n=r.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<t.value;s++){let a=ci(e,r);if(a===mo){if(t.value===1/0)break;throw new Error(`${Z} got unexpected break to lengthed map`)}if(a===ai)throw new Error(`${Z} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${Z} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&o.has(a)||!n&&a in i))throw new Error(`${Z} found repeat map key "${a}"`);let c=ci(e,r);if(c===ai)throw new Error(`${Z} found map but not enough entries (got ${s} [no value], expected ${t.value})`);n?o.set(a,c):i[a]=c}return n?o:i}function ci(t,e){if(t.done())return ai;let r=t.next();if(r.type===T.break)return mo;if(r.type.terminal)return r.value;if(r.type===T.array)return Vm(r,t,e);if(r.type===T.map)return qm(r,t,e);if(r.type===T.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=ci(t,e);return e.tags[r.value](n)}throw new Error(`${Z} tag not supported (${r.value})`)}throw new Error("unsupported")}function $l(t,e){if(!(t instanceof Uint8Array))throw new Error(`${Z} data to decode must be a Uint8Array`);e=Object.assign({},Mm,e);let r=e.tokenizer||new Va(t,e),n=ci(r,e);if(n===ai)throw new Error(`${Z} did not find any content to decode`);if(n===mo)throw new Error(`${Z} got unexpected break`);return[n,t.subarray(r.pos())]}function qa(t,e){let[r,n]=$l(t,e);if(n.length>0)throw new Error(`${Z} too many terminals, data makes no sense`);return r}var Ht=Rt(ea(),1);var Yl=Rt(Ca(),1);function bo(t,e){if(globalThis.Buffer!=null)return Pr(globalThis.Buffer.concat(t,e));e==null&&(e=t.reduce((i,o)=>i+o.length,0));let r=no(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return Pr(r)}var za=to("ipns:utils"),Wl=me("/ipns/"),Hm=114;function Gm(t){let e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(r==null)throw new Error("Invalid format");let n=parseInt(r[1],10),i=parseInt(r[2],10)-1,o=parseInt(r[3],10),s=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),f=parseInt(r[7].padEnd(6,"0").slice(0,3),10);return new Date(Date.UTC(n,i,o,s,a,c,f))}var Zl=async(t,e)=>{if(e==null||t==null){let n=new Error("one or more of the provided parameters are not defined");throw za.error(n),(0,Ht.default)(n,Ta)}let r;if(e.pubKey!=null){try{r=ta(e.pubKey)}catch(i){throw za.error(i),i}if(!(await Vu(e.pubKey)).equals(t))throw(0,Ht.default)(new Error("Embedded public key did not match PeerID"),ku)}else t.publicKey!=null&&(r=ta(t.publicKey));if(r!=null)return r;throw(0,Ht.default)(new Error("no public key is available"),Ta)},Ql=(t,e,r)=>{let n=me(e);return bo([t,r,n])},Xl=t=>{let e=me("ipns-signature:");return bo([e,t])},Jl=t=>"signatureV1"in t?te.encode({value:me(t.value),signatureV1:t.signatureV1,validityType:t.validityType,validity:me(t.validity.toString()),sequence:t.sequence,ttl:t.ttl,pubKey:t.pubKey,signatureV2:t.signatureV2,data:t.data}):te.encode({pubKey:t.pubKey,signatureV2:t.signatureV2,data:t.data});function jl(t){let e=te.decode(t);if(e.sequence!=null&&(e.sequence=BigInt(e.sequence)),e.ttl!=null&&(e.ttl=BigInt(e.ttl)),e.signatureV2==null||e.data==null)throw(0,Ht.default)(new Error("missing data or signatureV2"),Kr);let r=nh(e.data),n=Ha(r.Value),i;try{i=Yl.default.fromDate(Gm(ti(r.Validity)))}catch{throw za.error("unrecognized validity format (not an rfc3339 format)"),(0,Ht.default)(new Error("unrecognized validity format (not an rfc3339 format)"),Du)}if(e.value!=null&&e.signatureV1!=null)return $m(e),{value:n,validityType:te.ValidityType.EOL,validity:i,sequence:r.Sequence,ttl:r.TTL,pubKey:e.pubKey,signatureV1:e.signatureV1,signatureV2:e.signatureV2,data:e.data};if(e.signatureV2!=null)return{value:n,validityType:te.ValidityType.EOL,validity:i,sequence:r.Sequence,ttl:r.TTL,pubKey:e.pubKey,signatureV2:e.signatureV2,data:e.data};throw new Error("invalid record: does not include signatureV1 or signatureV2")}var th=t=>bo([Wl,t.toBytes()]),eh=t=>Da(t.slice(Wl.length)),rh=(t,e,r,n,i)=>{let o;if(r===te.ValidityType.EOL)o=0;else throw(0,Ht.default)(new Error("Unknown validity type"),Aa);return Ma({Value:t,Validity:e,ValidityType:o,Sequence:n,TTL:i})},nh=t=>{let e=qa(t);if(e.ValidityType===0)e.ValidityType=te.ValidityType.EOL;else throw(0,Ht.default)(new Error("Unknown validity type"),Aa);return Number.isInteger(e.Sequence)&&(e.Sequence=BigInt(e.Sequence)),Number.isInteger(e.TTL)&&(e.TTL=BigInt(e.TTL)),e},Ha=t=>{if(t!=null){if(Ku(t))return`/ipns/${t.toCID().toString(Ii)}`;if(t instanceof Uint8Array){let n=ti(t);n.startsWith("/")&&(t=n)}let e=t.toString().trim();if(e.startsWith("/")&&e.length>1)return e;let r=he.asCID(t);if(r!=null)return r.code===Hm?`/ipns/${r.toString(Ii)}`:`/ipfs/${r.toV1().toString()}`;try{return t instanceof Uint8Array?`/ipfs/${he.decode(t).toV1().toString()}`:`/ipfs/${he.parse(e).toV1().toString()}`}catch{}}throw(0,Ht.default)(new Error("Value must be a valid content path starting with /"),Uu)},$m=t=>{if(t.data==null)throw(0,Ht.default)(new Error("Record data is missing"),Lu);let e=nh(t.data);if(!ei(e.Value,t.value??new Uint8Array(0)))throw(0,Ht.default)(new Error('Field "value" did not match between protobuf and CBOR'),Kr);if(!ei(e.Validity,t.validity??new Uint8Array(0)))throw(0,Ht.default)(new Error('Field "validity" did not match between protobuf and CBOR'),Kr);if(e.ValidityType!==t.validityType)throw(0,Ht.default)(new Error('Field "validityType" did not match between protobuf and CBOR'),Kr);if(e.Sequence!==t.sequence)throw(0,Ht.default)(new Error('Field "sequence" did not match between protobuf and CBOR'),Kr);if(e.TTL!==t.ttl)throw(0,Ht.default)(new Error('Field "ttl" did not match between protobuf and CBOR'),Kr)};var Ym=to("ipns"),Wm=Ie.code,ih="/ipns/",Zm=ih.length,Ya={v1Compatible:!0};async function Qm(t,e,r,n,i=Ya){let o=new $a.default(Date.now()+Number(n)),s=te.ValidityType.EOL,[a,c]=n.toString().split("."),f=BigInt(a)*BigInt(1e5)+BigInt(c??"0");return oh(t,e,r,s,o,f,i)}async function Xm(t,e,r,n,i=Ya){let o=$a.default.fromString(n),s=te.ValidityType.EOL,a=o.toDate().getTime()-Date.now(),c=BigInt(a)*BigInt(1e5)+BigInt(o.getNano());return oh(t,e,r,s,o,c,i)}var oh=async(t,e,r,n,i,o,s=Ya)=>{r=BigInt(r);let a=me(i.toString()),c=Ha(e),f=me(c);if(t.privateKey==null)throw(0,Ga.default)(new Error("Missing private key"),Pu);let u=await eu(t.privateKey),l=rh(f,a,n,r,o),d=Xl(l),g=await u.sign(d),h;if(t.publicKey!=null){let p=wr(t.toBytes());(p.code!==Wm||!ei(t.publicKey,p.digest))&&(h=t.publicKey)}if(s.v1Compatible===!0){let p=await t2(u,f,n,a),y={value:c,signatureV1:p,validity:i,validityType:n,sequence:r,ttl:o,signatureV2:g,data:l};return h!=null&&(y.pubKey=h),y}else{let p={value:c,validity:i,validityType:n,sequence:r,ttl:o,signatureV2:g,data:l};return h!=null&&(p.pubKey=h),p}},Jm=t=>Xo.encode(t).slice(1),jm=t=>new so(`/ipns/${Jm(t)}`),t2=async(t,e,r,n)=>{try{let i=Ql(e,r,n);return await t.sign(i)}catch(i){throw Ym.error("record signature creation failed",i),(0,Ga.default)(new Error("record signature creation failed"),Nu)}};return bh(e2);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
return Ipns}));
